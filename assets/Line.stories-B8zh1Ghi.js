import{R as _n}from"./index-RYns6xqu.js";import{Y as zi,Z as mn,_ as Xt,$ as Gt,a0 as ve,a1 as Fi,a2 as S,i as I,a3 as vn,a4 as bn,a5 as yn,a6 as Hi,a7 as _i,a8 as fn,a9 as os,aa as ls,ab as F,e as G,l as X,b as T,ac as xn,ad as pe,ae as Pt,af as Ue,ag as D,c as O,ah as Sn,ai as be,aj as $e,ak as _e,al as Ne,am as $,an as An,ao as kn,ap as Me,aq as Vi,a as C,ar as Mn,as as Cn,at as Tn,au as A,av as Ln,aw as da,o as It,ax as Bn,ay as Pn,az as te,aA as On,aB as Dn,aC as En,aD as In,aE as wn,aF as hs,aG as ds,aH as Rn,aI as zn,aJ as Fn,aK as Hn,aL as Vn,aM as jn,aN as cs,aO as nt,aP as Dt,aQ as Mt,aR as Yn,aS as Oe,aT as Xn,aU as Gn,aV as ca,aW as Zn,aX as ae,aY as We,aZ as Un,a_ as ji,a$ as mi,b0 as $n,b1 as Yi,b2 as Ke,b3 as At,b4 as ua,b5 as Nn,b6 as Wn,b7 as ga,b8 as H,b9 as mt,ba as Ct,bb as $t,bc as Ce,bd as Yt,be as vt,bf as st,bg as De,E as at,m as R,bh as Kn,bi as wt,bj as qn,bk as us,A as gs,bl as ct,n as Jn,bm as Qn,bn as tr,r as ut,bo as pa,F as W,bp as ye,bq as bt,br as ze,H as Bi,bs as Ee,bt as _t,bu as er,bv as ir,bw as _a,bx as E,by as sr,bz as ne,bA as ar,bB as Xi,bC as ma,C as L,bD as Gi,bE as et,bF as le,bG as zt,bH as Xe,bI as va,bJ as ps,bK as _s,bL as ms,bM as nr,bN as qe,bO as Ze,bP as vs,bQ as Ie,bR as ba,bS as bs,bT as ya,bU as fa,bV as ys,bW as rr,S as fe,bX as or,bY as lr,bZ as hr,t as dr,u as cr,I as fs,b_ as ur,J as gr,b$ as pr,c0 as _r,c1 as mr,c2 as vr,c3 as br,c4 as yr,K as fr,c5 as xa,c6 as Sa,j as Ft,c7 as Je,c8 as Ti,c9 as pt,ca as Vt,d as ft,cb as xr,cc as Qe,cd as Aa,ce as Sr,cf as Ar,cg as kr,ch as Mr,ci as Cr,cj as Tr,ck as Lr,cl as ka,cm as Br,cn as Pr,co as xs,cp as Qt,cq as Or,cr as Dr,cs as Er,ct as Ir,cu as wr,cv as Rr,cw as zr,cx as Fr,cy as Hr,cz as Vr,cA as jr,cB as Yr,cC as Xr,cD as Gr,cE as Zr,cF as Ss,M as Ur,N as $r,O as Nr,P as Wr,R as Kr,Q as qr,T as Jr,U as Qr,V as to,W as eo,X as io}from"./BaseChart-2uIudXZh.js";import"./index-BX6J8nRb.js";import"./index-DcfIKM1A.js";import"./index-CpOIycTO.js";class so extends zi{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:0}})}onEnd(){this.target.setTheme({common:{opacity:1}})}onUpdate(t,e,i){this.target.setTheme({common:{opacity:e}})}}class ao extends zi{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:1}})}onEnd(){this.target.setTheme({common:{opacity:0}})}onUpdate(t,e,i){this.target.setTheme({common:{opacity:1-e}})}}function no(r,t){let e,i,s=r[0].x,a=r[0].y;const n=[r[0]];for(let o=1,l=r.length;o<l;o++)e=r[o].x-s,i=r[o].y-a,e*e+i*i>t&&(s=r[o].x,a=r[o].y,n.push(r[o]));return r[r.length-1].x===s&&r[r.length-1].y===a||n.push(r[r.length-1]),n}function Pi(r,t,e,i,s){let a=i,n=t;const o=r[t].x,l=r[t].y,h=r[e].x-o,d=r[e].y-l,c=h*h+d*d;let u,g,p,_,v;for(let m=t+1,y=e-1;m<y;m++)_=r[m].x-o,v=r[m].y-l,u=_*d-h*v,g=u*u,p=g/c,p>a&&(a=p,n=m);a>i&&(n-t>2&&Pi(r,t,n,i,s),s.push(r[n],r[n+1]),e-n>2&&Pi(r,n,e,i,s))}function ro(r,t){const e=r.length-1,i=[r[0]];return Pi(r,0,e,t,i),i.push(r[e]),i}function oo(r,t,e){if(r.length<=10)return r;const i=t!==void 0?t*t:1;return r=ro(r=no(r,i),i)}function lo(r,t){return[r[0]*t,r[1]*t]}function ho(r){const[t,e]=r;return Math.sqrt(t*t+e*e)}function co(r){let t=ho(r);return t>0&&(t=1/t),[r[0]*t,r[1]*t]}function uo(r,t){const[e,i]=r,[s,a]=t,n=Math.sqrt((e*e+i*i)*(s*s+a*a)),o=n&&(e*s+i*a)/n;return Math.acos(Math.min(Math.max(o,-1),1))}function go(r,t,e){const i=uo(r,t),s=mn(r,t)>=0;return e?s?2*Math.PI-i:i:s?i:2*Math.PI-i}const Li=(r,t)=>{const e=Math.atan2(r,t);return e<0?e+2*Math.PI:e};function Ma(r,t){const{x1:e,y1:i,x2:s,y2:a}=t,{x1:n,y1:o,x2:l,y2:h}=r.AABBBounds;let d=0,c=0;return n<e&&(d=e-n),o<i&&(c=i-o),l>s&&(d=s-l),h>a&&(c=a-h),{dx:d,dy:c}}function Ca(r,t){const{dx:e,dy:i}=Ma(r,t),{dx:s=0,dy:a=0}=r.attribute;e&&r.setAttribute("dx",e+s),i&&r.setAttribute("dy",i+a)}class Ta extends Xt{constructor(){super(...arguments),this.name="crosshair"}render(){this.renderCrosshair(this)}}function po(){Gt(),ve()}function _o(){Gt(),Fi()}po();class vi extends Ta{constructor(t,e){super(e!=null&&e.skipDefault?t:S({},vi.defaultAttributes,t))}renderCrosshair(t){const{start:e,end:i,lineStyle:s}=this.attribute;return t.createOrUpdateChild("crosshair-line",Object.assign({points:[e,i]},s),"line")}setLocation(t){const{start:e,end:i}=t;this.setAttributes({start:e,end:i})}}vi.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}};_o();class bi extends Ta{constructor(t,e){super(e!=null&&e.skipDefault?t:S({},bi.defaultAttributes,t))}renderCrosshair(t){const{start:e,end:i,rectStyle:s}=this.attribute;return t.createOrUpdateChild("crosshair-rect",Object.assign({x:e.x,y:e.y,width:i.x-e.x,height:i.y-e.y},s),"rect")}setLocation(t){const{start:e,end:i}=t;this.setAttributes({start:e,end:i})}}bi.defaultAttributes={rectStyle:{fill:"#b2bacf",opacity:.2}};class yi extends Xt{constructor(t,e){super(e!=null&&e.skipDefault?t:S({},yi.defaultAttributes,t)),this.name="data-label"}render(){var t;const{dataLabels:e,size:i}=this.attribute;if(!e||e.length===0)return;const{width:s=0,height:a=0,padding:n}=i||{};if(!s||!a||!I(a*s))return;this._componentMap||(this._componentMap=new Map);const o=yn(s,a,n),l=o.bitmap(),h=new Map,d=this._componentMap;for(let c=0;c<e.length;c++){const u=e[c],g=vn(u.type)||bn;if(g){const{baseMarkGroupName:p,type:_}=u,v=(t=u.id)!==null&&t!==void 0?t:`${p}-${_}-${c}`;let m=this._componentMap.get(v);m?(m.setBitmapTool(o),m.setBitmap(l),m.setAttributes(u),h.set(v,m)):(m=new g(u),m.setBitmap(l),m.setBitmapTool(o),this.add(m),h.set(v,m))}}d.forEach((c,u)=>{h.get(u)||this.removeChild(c)}),this._componentMap=h}setLocation(t){this.translateTo(t.x,t.y)}disableAnimation(){this._componentMap.forEach(t=>{t.disableAnimation()})}enableAnimation(){this._componentMap.forEach(t=>{t.enableAnimation()})}}yi.defaultAttributes={pickable:!1};function Zi(){Gt(),ve(),Hi(),_i()}function La(){Gt(),ve(),fn(),_i()}Zi();class Et extends Xt{getStartAngle(){return os(this._startAngle)}getEndAngle(){return os(this._endAngle)}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(t,e){super(e!=null&&e.skipDefault?t:S({},Et.defaultAttributes,t)),this.name="segment",this.key="segment",this.lines=[]}render(){this.removeAllChild(!0),this._reset();const{startSymbol:t,endSymbol:e,lineStyle:i,state:s,visible:a=!0,multiSegment:n,mainSegmentIndex:o}=this.attribute;if(!a)return;this._computeLineAngle();const l=this._getMainSegmentPoints(),h=this._renderSymbol(t,l,"start"),d=this._renderSymbol(e,l,"end");if(this.startSymbol=h,this.endSymbol=d,n){const c=[...this.attribute.points];if(I(o))c[o]=this._clipPoints(c[o]);else{const u=this._clipPoints(ls(c));c[0][0]=u[0],c[c.length-1][c[c.length-1].length-1]=u[u.length-1]}c.forEach((u,g)=>{var p,_;const v=F.line(Object.assign(Object.assign({points:u},G(i)?(p=i[g])!==null&&p!==void 0?p:i[i.length-1]:i),{fill:!1}));v.name=`${this.name}-line`,v.id=this._getNodeId("line"+g),X(s==null?void 0:s.line)||(v.states=G(s.line)?(_=s.line[g])!==null&&_!==void 0?_:s.line[s.line.length-1]:s.line),this.add(v),this.lines.push(v)})}else{let c=F.line;T(i)[0].cornerRadius&&(c=F.polygon);const u=c(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},T(i)[0]),{fill:!1,closePath:!1}));u.name=`${this.name}-line`,u.id=this._getNodeId("line"),X(s==null?void 0:s.line)||(u.states=[].concat(s.line)[0]),this.add(u),this.lines.push(u)}}_computeStartRotate(t){return t+Math.PI/2}_computeEndRotate(t){return t+Math.PI/2}_renderSymbol(t,e,i){if(!e.length)return;const{autoRotate:s=!0}=t;let a;if(t&&t.visible){const n=this.getStartAngle(),o=this.getEndAngle(),{state:l}=this.attribute,h=e[0],d=e[e.length-1],{refX:c=0,refY:u=0,refAngle:g=0,style:p,symbolType:_,size:v=12}=t;let m,y;i==="start"?(m={x:h.x+(I(n)?c*Math.cos(n)+u*Math.cos(n-Math.PI/2):0),y:h.y+(I(n)?c*Math.sin(n)+u*Math.sin(n-Math.PI/2):0)},y=this._computeStartRotate(this._startAngle)):(m={x:d.x+(I(o)?c*Math.cos(o)+u*Math.cos(o-Math.PI/2):0),y:d.y+(I(o)?c*Math.sin(o)+u*Math.sin(o-Math.PI/2):0)},y=this._computeEndRotate(this._endAngle)),a=F.symbol(Object.assign(Object.assign(Object.assign({},m),{symbolType:_,size:v,angle:s?y+g:0,strokeBoundsBuffer:0}),p)),a.name=`${this.name}-${i}-symbol`,a.id=this._getNodeId(`${i}-symbol`),X(l==null?void 0:l.symbol)||(a.states=l.symbol),i==="start"?X(l==null?void 0:l.startSymbol)||(a.states=l.startSymbol):X(l==null?void 0:l.endSymbol)||(a.states=l.endSymbol),this.add(a)}return a}_getMainSegmentPoints(){if(this._mainSegmentPoints)return this._mainSegmentPoints;const{points:t,multiSegment:e,mainSegmentIndex:i}=this.attribute;let s;return s=e?I(i)?t[i]:ls(t):t,this._mainSegmentPoints=s,s}_clipPoints(t){const{startSymbol:e={},endSymbol:i={}}=this.attribute;let s=t;if(e.visible){const a=e.clip?e.size||10:0;s=[{x:t[0].x-a/2*(Math.cos(this._startAngle)||0),y:t[0].y-a/2*(Math.sin(this._startAngle)||0)},...s.slice(1)]}if(i.visible){const a=i.clip?i.size||10:0,n={x:t[t.length-1].x-a/2*(Math.cos(this._endAngle)||0),y:t[t.length-1].y-a/2*(Math.sin(this._endAngle)||0)};s=[...s.slice(0,s.length-1),n]}return s}_computeLineAngle(){const t=this._getMainSegmentPoints();if(t.length<=1)return;const e=t[0],i=t[1],s=t[t.length-2],a=t[t.length-1],n=[e.x-i.x,e.y-i.y],o=Math.atan2(n[1],n[0]),l=[a.x-s.x,a.y-s.y],h=Math.atan2(l[1],l[0]);this._startAngle=o,this._endAngle=h}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}Et.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}};La();class As extends Et{constructor(t,e){super(e!=null&&e.skipDefault?t:S({},Et.defaultAttributes,t)),this.name="arc-segment",this.key="arc-segment",this.isReverseArc=!1}getStartAngle(){const t=this.isReverseArc?this._startAngle+Math.PI/2:this._startAngle-Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getEndAngle(){const t=this.isReverseArc?this._endAngle-Math.PI/2:this._endAngle+Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getMainSegmentPoints(){return this._mainSegmentPoints}_computeStartRotate(t){return this.isReverseArc?t+Math.PI:t}_computeEndRotate(t){return this.isReverseArc?t:t+Math.PI}render(){this.removeAllChild(!0),this._reset();const{startSymbol:t,endSymbol:e,lineStyle:i,state:s,visible:a=!0,radius:n,startAngle:o,endAngle:l,center:h}=this.attribute;if(!a)return;this._startAngle=o,this._endAngle=l,this.isReverseArc=o>l;const d={x:h.x+n*Math.cos(this._startAngle),y:h.y+n*Math.sin(this._startAngle)},c={x:h.x+n*Math.cos(this._endAngle),y:h.y+n*Math.sin(this._endAngle)};this._mainSegmentPoints=[d,c];const u=this._renderSymbol(t,this._mainSegmentPoints,"start"),g=this._renderSymbol(e,this._mainSegmentPoints,"end");this.startSymbol=u,this.endSymbol=g;const p=F.arc(Object.assign({x:h.x,y:h.y,startAngle:o,endAngle:l,innerRadius:n,outerRadius:n},i));p.name=`${this.name}-line`,p.id=this._getNodeId("arc"),X(s==null?void 0:s.line)||(p.states=[].concat(s.line)[0]),this.add(p),this.line=p}}var dt;(function(r){r.innerView="inner-view",r.axisContainer="axis-container",r.labelContainer="axis-label-container",r.tickContainer="axis-tick-container",r.tick="axis-tick",r.subTick="axis-sub-tick",r.label="axis-label",r.title="axis-title",r.gridContainer="axis-grid-container",r.grid="axis-grid",r.gridRegion="axis-grid-region",r.line="axis-line",r.background="axis-background",r.axisLabelBackground="axis-label-background"})(dt||(dt={}));var de;(function(r){r.selected="selected",r.selectedReverse="selected_reverse",r.hover="hover",r.hoverReverse="hover_reverse"})(de||(de={}));const re={[de.selectedReverse]:{},[de.selected]:{},[de.hover]:{},[de.hoverReverse]:{}},Oi={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}};function Ba(r){const t={};return pe(r,e=>{e.type!=="group"&&e.id&&(t[e.id]=e)}),t}function Pa(r,t){return{x:r.x+t[0],y:r.y+t[1]}}function mo(r,t,e,i,s){const a=[],n=s-i;for(let o=0;o<t;o++){const l=i+o*n/t;a.push(xn(r,e,l))}return a}function ce(r,t){let e="";return r.length===0||(r.forEach((i,s)=>{s===0?e=`M${i.x},${i.y}`:e+=`L${i.x},${i.y}`}),t&&(e+="Z")),e}const Oa=(r,t,e)=>{const i=r.target;return i!==e&&i.name&&!X(i.states)?(i.addState(Pt.hover,!0),pe(t,s=>{s!==i&&s.name&&!X(s.states)&&s.addState(Pt.hoverReverse,!0)}),i):e},Da=(r,t,e)=>e&&(pe(t,i=>{i.name&&!X(i.states)&&(i.removeState(Pt.hoverReverse),i.removeState(Pt.hover))}),null),Ea=(r,t,e)=>{const i=r.target;return e===i&&i.hasState(Pt.selected)?(pe(t,s=>{s.name&&!X(s.states)&&(s.removeState(Pt.selectedReverse),s.removeState(Pt.selected))}),null):i.name&&!X(i.states)?(i.addState(Pt.selected,!0),pe(t,s=>{s!==i&&s.name&&!X(s.states)&&s.addState(Pt.selectedReverse,!0)}),i):e};class vo extends Xt{constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=t=>{this._lastHover=Oa(t,this.axisContainer,this._lastHover)},this._onUnHover=t=>{this._lastHover=Da(t,this.axisContainer,this._lastHover)},this._onClick=t=>{this._lastSelect=Ea(t,this.axisContainer,this._lastSelect)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(t){const e=Ue(this.attribute);S(this.attribute,t);const i=F.group({x:this.attribute.x,y:this.attribute.y});return this.add(i),this._renderInner(i),this.removeChild(i),this.attribute=e,i.AABBBounds}render(){this._prevInnerView=this._innerView&&Ba(this._innerView),this.removeAllChild(!0),this._innerView=F.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent()}_bindEvent(){if(this.attribute.disableTriggerEvent)return;const{hover:t,select:e}=this.attribute;t&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),e&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(t){const{title:e,label:i,tick:s,line:a,items:n}=this.attribute,o=F.group({x:0,y:0,zIndex:1,pickable:!1});if(o.name=dt.axisContainer,o.id=this._getNodeId("container"),o.setMode(this.mode),this.axisContainer=o,t.add(o),a&&a.visible&&this.renderLine(o),n&&n.length&&(this.data=this._transformItems(n[0]),s&&s.visible&&this.renderTicks(o),i&&i.visible)){const l=F.group({x:0,y:0,pickable:!1});l.name=dt.labelContainer,l.id=this._getNodeId("label-container"),this.axisLabelsContainer=l,o.add(l),n.forEach((h,d)=>{const c=this.renderLabels(l,h,d),u=c.getChildren();this.beforeLabelsOverlap(u,h,c,d,n.length),this.handleLabelsOverlap(u,h,c,d,n.length),this.afterLabelsOverlap(u,h,c,d,n.length);let g=0,p=0,_="center",v="middle";u.forEach(m=>{var y;const b=m.attribute,f=(y=b.angle)!==null&&y!==void 0?y:0,x=m.AABBBounds;let M=x.width(),k=x.height();f&&(M=Math.abs(M*Math.cos(f)),k=Math.abs(k*Math.sin(f))),g=Math.max(g,M),p=Math.max(p,k),_=b.textAlign,v=b.textBaseline}),this.axisLabelLayerSize[d]={width:g,height:p,textAlign:_,textBaseline:v}})}e&&e.visible&&this.renderTitle(o)}renderTicks(t){const e=this.getTickLineItems(),i=F.group({x:0,y:0,pickable:!1});i.name=dt.tickContainer,i.id=this._getNodeId("tick-container"),t.add(i),e.forEach((a,n)=>{var o;const l=F.line(Object.assign({},this._getTickLineAttribute("tick",a,n,e)));if(l.name=dt.tick,l.id=this._getNodeId(a.id),X((o=this.attribute.tick)===null||o===void 0?void 0:o.state))l.states=D;else{const h=this.data[n],d=S({},D,this.attribute.tick.state);Object.keys(d).forEach(c=>{O(d[c])&&(d[c]=d[c](h.rawValue,n,h,this.data))}),l.states=d}i.add(l)}),this.tickLineItems=e;const{subTick:s}=this.attribute;if(s&&s.visible){const a=this.getSubTickLineItems();a.length&&a.forEach((n,o)=>{const l=F.line(Object.assign({},this._getTickLineAttribute("subTick",n,o,e)));if(l.name=dt.subTick,l.id=this._getNodeId(`${o}`),X(s.state))l.states=D;else{const h=S({},D,s.state);Object.keys(h).forEach(d=>{O(h[d])&&(h[d]=h[d](n.value,o,n,e))}),l.states=h}i.add(l)}),this.subTickLineItems=a}}renderLabels(t,e,i){const{dataFilter:s}=this.attribute.label;s&&O(s)&&(e=s(e,i));const a=this._transformItems(e),n=F.group({x:0,y:0,pickable:!1});return n.name=`${dt.labelContainer}-layer-${i}`,n.id=this._getNodeId(`label-container-layer-${i}`),t.add(n),a.forEach((o,l)=>{var h;const d=this._getLabelAttribute(o,l,a,i),c=Sn(d);if(c.name=dt.label,c.id=this._getNodeId(`layer${i}-label-${o.id}`),X((h=this.attribute.label)===null||h===void 0?void 0:h.state))c.states=D;else{const u=S({},D,this.attribute.label.state);Object.keys(u).forEach(g=>{O(u[g])&&(u[g]=u[g](o,l,a,i))}),c.states=u}n.add(c)}),n}renderTitle(t){const e=this.getTitleAttribute(),i=new be(Object.assign({},e));i.name=dt.title,i.id=this._getNodeId("title"),t.add(i)}getVerticalCoord(t,e,i){return Pa(t,this.getVerticalVector(e,i,t))}getTextAlign(t){let e="center";return $e(t[0],0)?$e(t[1],0)?Object.is(t[1],-0)?e="start":Object.is(t[0],-0)&&(e="end"):e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e}getTickLineItems(){const{tick:t}=this.attribute,e=this.data,i=[],{alignWithLabel:s,inside:a=!1,length:n,dataFilter:o}=t;let l=1;return e.length>=2&&(l=e[1].value-e[0].value),(o&&O(o)?o(e):e).forEach(h=>{let d=h.point,c=h.value;if(!s){const g=h.value-l/2;if(this.isInValidValue(g))return;d=this.getTickCoord(g),c=g}const u=this.getVerticalCoord(d,n,a);if(this.mode==="3d"){const g=this.getVerticalVector(n,a,d);let p=0,_=0;_e(g[0])>_e(g[1])?p=Ne/2*(u.x>d.x?1:-1):_=Ne/2*(u.y>d.y?-1:1),i.push({start:d,end:u,value:c,id:`tick-${h.id}`,anchor:[d.x,d.y],alpha:p,beta:_})}else i.push({start:d,end:u,value:c,id:`tick-${h.id}`})}),i}getSubTickLineItems(){const{subTick:t}=this.attribute,e=[],{count:i=4,inside:s=!1,length:a=2}=t,n=this.tickLineItems,o=n.length;if(o>=2)for(let l=0;l<o-1;l++){const h=n[l],d=n[l+1];for(let c=0;c<i;c++){const u=(c+1)/(i+1),g=(1-u)*h.value+u*d.value,p=this.getTickCoord(g),_=this.getVerticalCoord(p,a,s);e.push({start:p,end:_,value:g,id:`sub-tick-${g}`})}}return e}_getTickLineAttribute(t,e,i,s){let a=$(this.attribute,`${t}.style`);const n=this.data[i];a=O(a)?S({},$(Oi,`${t}.style`),t==="tick"?a(n.rawValue,i,n,this.data):a(e.value,i,e,s)):a;const{start:o,end:l,anchor:h,alpha:d,beta:c}=e;return Object.assign({points:[o,l],anchor:h,alpha:d,beta:c},a)}_getLabelAttribute(t,e,i,s){var a,n;const{space:o=4,inside:l=!1,formatMethod:h,type:d="text",text:c}=this.attribute.label;let u=o,g=0;!((a=this.attribute.tick)===null||a===void 0)&&a.visible&&this.attribute.tick.inside===l&&(g=this.attribute.tick.length||4),!((n=this.attribute.subTick)===null||n===void 0)&&n.visible&&this.attribute.subTick.inside===l&&(g=Math.max(g,this.attribute.subTick.length||2)),u+=g;const p=this.getRelativeVector(t.point);s>0&&(p[1]===0?u+=(this.axisLabelLayerSize[s-1].height+$(this.attribute,"label.space",4))*s:u+=(this.axisLabelLayerSize[s-1].width+$(this.attribute,"label.space",4))*s);const _=this.getVerticalCoord(t.point,u,l),v=this.getVerticalVector(u||1,l,_),m=h?h(`${t.label}`,t,e,i,s):t.label;let{style:y}=this.attribute.label;y=O(y)?S({},Oi.label.style,y(t,e,i,s)):y;const b=this.getLabelAlign(v,l,y.angle);return y=S(b,y),O(y.text)&&(y.text=y.text({label:t.label,value:t.rawValue,index:t.index,layer:s})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(_,v,m,y)),{text:c??m,_originText:t.label,lineHeight:y==null?void 0:y.fontSize,type:d}),y)}getLabelPosition(t,e,i,s){return t}_transformItems(t){const e=[];return t.forEach(i=>{var s;e.push(Object.assign(Object.assign({},i),{point:this.getTickCoord(i.value),id:(s=i.id)!==null&&s!==void 0?s:i.label}))}),e}release(){super.release(),this._prevInnerView=null,this._innerView=null}}function bo(r,t,e,i,s){return{x:(r-i)*Math.cos(e)+(t-s)*Math.sin(e)+i,y:(r-i)*Math.sin(e)+(s-t)*Math.cos(e)+s}}function yo(r){const t=r.AABBBounds;return{x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,centerX:r.attribute.x,centerY:r.attribute.y,angle:r.attribute.angle}}function Ia(r){r.forEach(t=>{if(t.rotatedBounds||!t.attribute.angle)return;const e=yo(t),i=bo(e.centerX,e.centerY,e.angle,t.attribute.x,t.attribute.y),s=i.x-e.centerX,a=i.y-e.centerY;e.x1+=s,e.x2+=s,e.y1+=a,e.y2+=a,e.centerX+=s,e.centerY+=a,t.rotatedBounds=e})}function fo(r,t){return An(r.AABBBounds,t.AABBBounds,!1)&&(!r.rotatedBounds||!t.rotatedBounds||kn(r.rotatedBounds,t.rotatedBounds,!0))}const ks={parity:function(r){return r.filter((t,e)=>e%2?t.setAttribute("opacity",0):1)},greedy:function(r,t){let e;return r.filter((i,s)=>s&&Ui(e,i,t)?i.setAttribute("opacity",0):(e=i,1))}};function Ui(r,t,e){const i=r.AABBBounds,s=t.AABBBounds;return e>Math.max(s.x1-i.x2,i.x1-s.x2,s.y1-i.y2,i.y1-s.y2)&&(!r.rotatedBounds||!t.rotatedBounds||e>Math.max(t.rotatedBounds.x1-r.rotatedBounds.x2,r.rotatedBounds.x1-t.rotatedBounds.x2,t.rotatedBounds.y1-r.rotatedBounds.y2,r.rotatedBounds.y1-t.rotatedBounds.y2))}function Ms(r,t){for(let e,i=1,s=r.length,a=r[0];i<s;a=e,++i)if(Ui(a,e=r[i],t))return!0}function xo(r){const t=r.AABBBounds;return t.width()>1&&t.height()>1}function So(r){return r.forEach(t=>t.setAttribute("opacity",1)),r}function Ao(r,t){if(X(r))return;const e=r.filter(xo);if(X(e))return;let i;i=So(e),Ia(i);const{method:s="parity",separation:a=0}=t,n=O(s)?s:ks[s]||ks.parity;if(i.length>=3&&Ms(i,a)){do i=n(i,a);while(i.length>=3&&Ms(i,a));if(i.length<3||t.lastVisible){const o=Me(e);if(!o.attribute.opacity){const l=i.length;if(l>1){o.setAttribute("opacity",1);for(let h=l-1;h>=0&&Ui(i[h],o,a);h--)i[h].setAttribute("opacity",0)}}}}e.forEach(o=>{o.setAttribute("visible",!!o.attribute.opacity)})}function ko(r,t){if(X(r))return;const{orient:e,labelRotateAngle:i=[0,45,90]}=t;if(i.length===0||r.some(n=>!!n.attribute.angle))return;let s=0,a=0;for(i&&i.length>0&&(a=i.length);s<a;){const n=i[s++];if(r.forEach(o=>{o.attribute.angle=Vi(n)}),Co(e,r),!Mo(r))break}}function Mo(r){for(let t=1;t<r.length;t++)if(fo(r[t-1],r[t]))return!0;return!1}function Co(r,t){r!=="bottom"&&r!=="top"||Lo(r,t),r!=="left"&&r!=="right"||To(r,t),Ia(t)}function fi(r=0){if(r<0)for(;r<0;)r+=2*Math.PI;if(r>0)for(;r>=2*Math.PI;)r-=2*Math.PI;return r}function To(r,t){t.forEach((e,i)=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},Ra(r,e.attribute.angle)),{angle:fi(e.attribute.angle)}))})}function Lo(r,t){t.forEach(e=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},wa(r,e.attribute.angle)),{angle:fi(e.attribute.angle)}))})}function wa(r,t=0){let e=["center","left","left","left","center","right","right","right","left"],i=["top","top","middle","bottom","bottom","bottom","middle","top","top"];r==="top"&&(e=["center","right","right","right","center","left","left","left","right"],i=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);const s=(t=fi(t))/(.5*Math.PI);let a;return a=s===Math.floor(s)?2*Math.floor(s):2*Math.floor(s)+1,{textAlign:e[a],textBaseline:i[a]}}function Ra(r,t=0){let e=["right","right","center","left","center","left","center","right","right"],i=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];r==="right"&&(e=["left","right","right","right","left","left","left","left","right"],i=["middle","bottom","middle","top","top","top","middle","bottom","bottom"]);const s=(t=fi(t))/(.5*Math.PI);let a;return a=s===Math.floor(s)?2*Math.floor(s):2*Math.floor(s)+1,{textAlign:e[a],textBaseline:i[a]}}function Bo(r,t){const{limitLength:e,verticalLimitLength:i,ellipsis:s="...",orient:a,axisLength:n}=t;if(X(r)||!I(e))return;const o=Math.sin(Math.PI/10);r.forEach(l=>{var h;const d=l.attribute.angle,c=!C(d),u=c?Math.cos(d):1,g=c?Math.sin(d):0,p=!c||Math.abs(g)<=o,_=c&&Math.abs(u)<=o,v=a==="top"||a==="bottom";if(v&&(_&&Math.floor(l.AABBBounds.height())<=e||p&&Math.floor(l.AABBBounds.width())<=i))return;const m=l.attribute.direction;if(!v&&(m==="vertical"&&Math.floor(l.AABBBounds.height())<=i||m!=="vertical"&&(p&&Math.floor(l.AABBBounds.width())<=e||_&&Math.floor(l.AABBBounds.height())<=i)))return;let y=null;if(p||_)y=v?p?i:e:m==="vertical"||_?i:e;else if(v){const{x1:b,x2:f}=l.AABBBounds,x=g/u;y=x>0&&b<=n&&e/x+b>n?(n-b)/Math.abs(u):x<0&&f>=0&&e/x+f<0?f/Math.abs(u):Math.abs(e/g)}else y=Math.abs(e/u);I(l.attribute.maxLineWidth)&&(y=I(y)?Math.min(l.attribute.maxLineWidth,y):l.attribute.maxLineWidth),l.setAttributes({maxLineWidth:y,ellipsis:(h=l.attribute.ellipsis)!==null&&h!==void 0?h:s})})}function Po(r,t,e,i,s){if(i==="right"||i==="left"){if(s==="left"){const a=i==="right"?0:-1;r.forEach(n=>{n.setAttributes({x:t+e*a,textAlign:"left"})})}else if(s==="right"){const a=i==="right"?1:0;r.forEach(n=>{n.setAttributes({x:t+e*a,textAlign:"right"})})}else if(s==="center"){const a=i==="right"?1:-1;r.forEach(n=>{n.setAttributes({x:t+.5*e*a,textAlign:"center"})})}}else if(i==="bottom"||i==="top"){if(s==="top"){const a=i==="bottom"?0:-1;r.forEach(n=>{n.setAttributes({y:t+e*a,textBaseline:"top"})})}else if(s==="bottom"){const a=i==="bottom"?1:0;r.forEach(n=>{n.setAttributes({y:t+e*a,textBaseline:"bottom"})})}else if(s==="middle"){const a=i==="bottom"?1:-1;r.forEach(n=>{n.setAttributes({y:t+.5*e*a,textBaseline:"middle"})})}}}class za{isInValidValue(t){return t<0||t>1}getTickCoord(t){const{start:e}=this.attribute,i=this.getRelativeVector();return{x:e.x+i[0]*t,y:e.y+i[1]*t}}getRelativeVector(t){const{start:e,end:i}=this.attribute;return[i.x-e.x,i.y-e.y]}getVerticalVector(t,e=!1,i){const{verticalFactor:s=1}=this.attribute,a=this.getRelativeVector(),n=co(a),o=[n[1],-1*n[0]];return lo(o,t*(e?1:-1)*s)}}function Oo(){Gt(),ve(),Cn(),Tn()}function Do(){Oo(),Fi()}function Eo(){Gt(),Mn()}var Cs=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(i=Object.getOwnPropertySymbols(r);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(e[i[s]]=r[i[s]])}return e};Do();class we extends vo{constructor(t,e){super(e!=null&&e.skipDefault?t:S({},we.defaultAttributes,t),e)}_renderInner(t){var e;super._renderInner(t);const{panel:i}=this.attribute;if(i&&i.visible){const s=this.axisContainer,a=s.AABBBounds,n=F.rect(Object.assign({x:a.x1,y:a.y1,width:a.width(),height:a.height()},i.style));n.name=dt.background,n.id=this._getNodeId("background"),n.states=S({},re,(e=i.state)!==null&&e!==void 0?e:{}),s.insertBefore(n,s.firstChild)}}renderLine(t){const{start:e,end:i,line:s}=this.attribute,a=s,{startSymbol:n,endSymbol:o,style:l,breakRange:h,breakShape:d,breakShapeStyle:c,state:u}=a,g=Cs(a,["startSymbol","endSymbol","style","breakRange","breakShape","breakShapeStyle","state"]),p=Object.assign({points:[e,i],startSymbol:n,endSymbol:o,lineStyle:l},g);X(u)||(p.state={line:S({},re,u),symbol:S({},re,u)});const _=new Et(p);_.name=dt.line,_.id=this._getNodeId("line"),t.add(_)}getTitleAttribute(){var t,e,i;const s=this.attribute.title,{position:a="middle",space:n=4,textStyle:o={},autoRotate:l=!0,shape:h,background:d,state:c={},maxWidth:u}=s,g=Cs(s,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]);let p=.5;a==="start"?p=0:a==="end"&&(p=1);const{verticalFactor:_=1}=this.attribute,v=-1*_,m=this.getTickCoord(p),y=this.getRelativeVector();let b=0;if(!((t=this.attribute.label)===null||t===void 0)&&t.visible&&this.attribute.label.inside===!1){const j=+$(this.attribute,"label.space",4);b+=j;const ot=Object.keys(this.axisLabelLayerSize).length;if(y[1]===0){const Y=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(Y)?b+=Y+(ot-1)*j:b=0}else{if(y[0]===0){const yt=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.width():0;isFinite(yt)?b+=yt+(ot-1)*j:b=0}else Object.keys(this.axisLabelLayerSize).forEach((yt,ee)=>{b+=this.axisLabelLayerSize[yt].width+(ee>0?j:0)});const Y=this.axisLabelLayerSize[0].textAlign,Z=Y==="start"||Y==="left",U=Y==="center",xt=y[1]>0;b=v===1?xt?Z?b:U?b/2:j:Z?j:U?b/2:b:xt?Z?j:U?b/2:b:Z?b:U?b/2:j}}let f=0;!((e=this.attribute.tick)===null||e===void 0)&&e.visible&&this.attribute.tick.inside===!1&&(f=this.attribute.tick.length||4),!((i=this.attribute.subTick)===null||i===void 0)&&i.visible&&this.attribute.subTick.inside===!1&&(f=Math.max(f,this.attribute.subTick.length||2));const x=f+b+n,M=this.getVerticalCoord(m,x,!1),k=this.getVerticalVector(x,!1,{x:0,y:0});let B,P,{angle:w}=g;if(B=a==="start"?"start":a==="end"?"end":"center",C(w)&&l){w=go(y,[1,0],!0);const{verticalFactor:j=1}=this.attribute;P=-1*j===1?"bottom":"top"}else B=this.getTextAlign(k),P=this.getTextBaseline(k,!1);let V=u;if(C(V)){const{verticalLimitSize:j,verticalMinSize:ot,orient:Y}=this.attribute,Z=Math.min(j||1/0,ot||1/0);if(I(Z))if(Y==="bottom"||Y==="top")if(w!==Math.PI/2){const U=Math.abs(Math.cos(w??0));V=U<1e-6?1/0:this.attribute.end.x/U}else V=Z-x;else if(w&&w!==0){const U=Math.abs(Math.sin(w));V=U<1e-6?1/0:this.attribute.end.y/U}else V=Z-x}const J=Object.assign(Object.assign(Object.assign({},M),g),{maxWidth:V,textStyle:Object.assign({textAlign:B,textBaseline:P},o),state:{text:S({},re,c.text),shape:S({},re,c.shape),panel:S({},re,c.background)}});return J.angle=w,h&&h.visible&&(J.shape=Object.assign({visible:!0},h.style),h.space&&(J.space=h.space)),d&&d.visible&&(J.panel=Object.assign({visible:!0},d.style)),J}getTextBaseline(t,e){let i="middle";const{verticalFactor:s=1}=this.attribute,a=(e?1:-1)*s;return $e(t[1],0)?i=!$e(t[0],0)||Object.is(t[0],-0)||Object.is(t[1],-0)?"middle":a===1?"bottom":"top":t[1]>0?i="top":t[1]<0&&(i="bottom"),i}getLabelAlign(t,e,i){const s=this.attribute.orient;if(["top","bottom","right","left"].includes(s)||t[0]===0&&t[1]===0){if(s==="top"||s==="bottom")return wa(e?s==="bottom"?"top":"bottom":s,i);if(s==="left"||s==="right")return Ra(e?s==="left"?"right":"left":s,i)}return{textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline(t,e)}}beforeLabelsOverlap(t,e,i,s,a){var n,o,l,h;const{flush:d=!1}=this.attribute.label||{};if(d&&t.length){const{orient:c,start:u,end:g}=this.attribute,p=c==="bottom"||c==="top",_=t[0],v=Me(t),m=p?_.attribute.x>v.attribute.x:_.attribute.y<v.attribute.y;if(p){const y=m?v:_,b=m?_:v,f=u.x,x=g.x,M=y.AABBBounds.x1,k=b.AABBBounds.x2;M<f&&(y.attribute.angle?y.setAttributes({dx:((n=y.attribute.dx)!==null&&n!==void 0?n:0)+f-M}):y.setAttributes({x:f,textAlign:"left"})),k>x&&(b.attribute.angle?b.setAttributes({dx:((o=b.attribute.dx)!==null&&o!==void 0?o:0)+x-k}):b.setAttributes({x,textAlign:"right"}))}else{const y=m?v:_,b=m?_:v,f=y.AABBBounds.y2,x=b.AABBBounds.y1,M=u.y,k=g.y;x<M&&(b.attribute.angle?b.setAttributes({dy:((l=b.attribute.dy)!==null&&l!==void 0?l:0)+M-x}):b.setAttributes({y:M,textBaseline:"top"})),f>k&&(y.attribute.angle?y.setAttributes({dy:((h=y.attribute.dy)!==null&&h!==void 0?h:0)+k-f}):y.setAttributes({y:k,textBaseline:"bottom"}))}}}handleLabelsOverlap(t,e,i,s,a){if(X(t))return;const{verticalLimitSize:n,label:o,orient:l}=this.attribute,h=this._getAxisLabelLimitLength(n,a),{layoutFunc:d,autoRotate:c,autoRotateAngle:u,autoLimit:g,limitEllipsis:p,autoHide:_,autoHideMethod:v,autoHideSeparation:m,lastVisible:y}=o;if(O(d))d(t,e,s,this);else{if(c&&ko(t,{labelRotateAngle:u,orient:l}),g&&I(h)&&h>0){const b=l==="left"||l==="right",f=Math.abs(b?this.attribute.start.y-this.attribute.end.y:this.attribute.start.x-this.attribute.end.x),x=b?f/t.length:_||c?1/0:f/t.length;Bo(t,{limitLength:h,verticalLimitLength:x,ellipsis:p,orient:l,axisLength:f})}_&&Ao(t,{orient:l,method:v,separation:m,lastVisible:y})}}afterLabelsOverlap(t,e,i,s,a){const{verticalLimitSize:n,orient:o}=this.attribute,l=o==="bottom"||o==="top",h=i.AABBBounds;let d=l?h.height():h.width();const{verticalMinSize:c}=this.attribute;if(I(c)&&(!I(n)||c<=n)){const u=this._getAxisLabelLimitLength(c,a);let g,p;d=Math.max(d,u),o==="left"?(g=h.x2-d,p=h.y1):o==="right"?(g=h.x1,p=h.y1):o==="top"?(g=h.x1,p=h.y2-d):o==="bottom"&&(g=h.x1,p=h.y1);const _=F.rect({x:g,y:p,width:l?h.width():d,height:l?d:h.height(),pickable:!1});_.name=dt.axisLabelBackground,_.id=this._getNodeId("axis-label-background"),i.insertBefore(_,i.firstChild)}if(A(this.attribute.label.containerAlign)){let u;o==="left"?u=h.x2:o==="right"?u=h.x1:o==="top"?u=h.y2:o==="bottom"&&(u=h.y1),Po(t,u,d,o,this.attribute.label.containerAlign)}}_getAxisLabelLimitLength(t,e){var i,s,a,n,o;const{label:l,title:h,line:d,tick:c}=this.attribute,u=(i=l.space)!==null&&i!==void 0?i:4;let g=t,p=0,_=0;const v=d&&d.visible?(s=d.style.lineWidth)!==null&&s!==void 0?s:1:0,m=c&&c.visible?(a=c.length)!==null&&a!==void 0?a:4:0;if(h&&h.visible&&typeof h.text=="string"){p=Ln(h.text,h.textStyle,(o=(n=this.stage)===null||n===void 0?void 0:n.getTheme())===null||o===void 0?void 0:o.text).height;const y=da(h.padding);_=h.space+y[0]+y[2]}return g&&(g=(g-u-_-p-v-m)/e),g}}we.defaultAttributes=Oi,It(we,za);class Io extends zi{constructor(){super(...arguments),this.mode=Bn.NORMAL}onBind(){const t=this.target.getInnerView(),e=this.target.getPrevInnerView();e&&(this._newElementAttrMap={},pe(t,i=>{var s,a,n,o,l,h;if(i.type!=="group"&&i.id){const d=e[i.id];if(d){if(!te(i.attribute,d.attribute)){const c=Ue(i.attribute);this._newElementAttrMap[i.id]={state:"update",node:i,attrs:Object.assign(Object.assign({},c),{opacity:(s=c.opacity)!==null&&s!==void 0?s:1,fillOpacity:(a=c.fillOpacity)!==null&&a!==void 0?a:1,strokeOpacity:(n=c.strokeOpacity)!==null&&n!==void 0?n:1})},i.setAttributes(d.attribute)}}else{const c={opacity:(o=i.attribute.opacity)!==null&&o!==void 0?o:1,fillOpacity:(l=i.attribute.fillOpacity)!==null&&l!==void 0?l:1,strokeOpacity:(h=i.attribute.strokeOpacity)!==null&&h!==void 0?h:1};this._newElementAttrMap[i.id]={state:"enter",node:i,attrs:c},i.setAttributes({opacity:0,fillOpacity:0,strokeOpacity:0})}}}))}onStart(){let t=this.duration,e=this.easing;this._newElementAttrMap&&Object.keys(this._newElementAttrMap).forEach(i=>{var s;const{node:a,attrs:n,state:o}=this._newElementAttrMap[i];if(o==="enter"){const{enter:l={}}=(s=this.params)!==null&&s!==void 0?s:{};t=I(l.duration)?l.duration:t,e=l.easing?l.easing:e}a.type==="path"?a.animate({interpolate:(l,h,d,c,u)=>l==="path"&&(u.path=Pn(d,c)(h),!0)}).to(n,t,e):a.animate().to(n,t,e)})}onUpdate(t,e,i){}}const Nt=r=>r.map((t,e)=>({index:e,value:t}));function Fa(r,t,e){return e>Math.max(t.x1-r.x2,r.x1-t.x2,t.y1-r.y2,r.y1-t.y2)}function wo(r,t){for(let e,i=1,s=r.length,a=r[0];i<s;a=e,++i)if(e=r[i],Fa(a.AABBBounds,e.AABBBounds,t))return!0;return!1}const Ge=(r,t,e,i)=>e<r?Math.max(r-t/2,e):e>r?Math.min(r-t/2,e-t):e<i?e:e-t,Ha=(r,t,e)=>{var i;const{labelStyle:s,axisOrientType:a,labelFlush:n,labelFormatter:o,startAngle:l=0}=e;let h=(i=s.angle)!==null&&i!==void 0?i:0;s.direction==="vertical"&&(h+=Vi(90));const d=["bottom","top"].includes(a),c=["left","right"].includes(a);let u=1,g=0;d||(c?(u=0,g=1):l&&(u=Math.cos(l),g=-Math.sin(l)));const p=On(s),_=r.range();return t.map((m,y)=>{var b,f;const x=o?o(m):`${m}`,{width:M,height:k}=p.quickMeasure(x),B=Math.max(M,12),P=Math.max(k,12),w=r.scale(m),V=u*w,J=g*w;let j,ot,Y=V,Z=J;n&&d&&y===0?Y=Ge(V,B,_[0],_[_.length-1]):n&&d&&y===t.length-1?Y=Ge(V,B,_[_.length-1],_[0]):j=(b=s.textAlign)!==null&&b!==void 0?b:"center",j==="right"?Y-=B:j==="center"&&(Y-=B/2),n&&c&&y===0?Z=Ge(J,P,_[0],_[_.length-1]):n&&c&&y===t.length-1?Z=Ge(J,P,_[_.length-1],_[0]):ot=(f=s.textBaseline)!==null&&f!==void 0?f:"middle",ot==="bottom"?Z-=P:ot==="middle"&&(Z-=P/2);const U=new Dn().set(Y,Z,Y+B,Z+P);return h&&U.rotate(h,V,J),U})},Ro=r=>["bottom","top","z"].includes(r);class zo{nice(t=10,e){var i,s,a,n;const o=this._domain;let l=[],h=null;if(e){const d=En(o,e);if(l=d.niceMinMax,this._domainValidator=d.domainValidator,h=d.niceType,d.niceDomain)return this._niceDomain=d.niceDomain,this.rescale(),this}else h="all";if(h){const d=In(o.slice(),(s=(i=this.getNiceConfig)===null||i===void 0?void 0:i.call(this))!==null&&s!==void 0?s:{floor:c=>Math.floor(c),ceil:c=>Math.ceil(c)});return h==="min"?d[d.length-1]=(a=l[1])!==null&&a!==void 0?a:d[d.length-1]:h==="max"&&(d[0]=(n=l[0])!==null&&n!==void 0?n:d[0]),this._niceDomain=d,this.rescale(),this}return this}niceMin(){const t=this._domain[this._domain.length-1];this.nice();const e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){const t=this._domain[0];this.nice();const e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}}function Ts(r){return t=>-r(-t)}function Ls(r=Number.EPSILON){return t=>Math.max(t,r)}function Fo(r=Number.EPSILON){return t=>Math.min(t,-r)}class xi extends wn{constructor(){super(hs(10),ds(10)),this.type=Rn.Log,this._limit=Ls(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return new xi().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(t){var e;if(t)return this;super.rescale();const i=hs(this._base),s=ds(this._base);return((e=this._niceDomain)!==null&&e!==void 0?e:this._domain)[0]<0?(this._logs=Ts(i),this._pows=Ts(s),this._limit=Fo(),this.transformer=zn,this.untransformer=Fn):(this._logs=i,this._pows=s,this._limit=Ls(),this.transformer=this._logs,this.untransformer=s),this}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const i=this._output(this.transformer(this._limit(this._clamp(t))));return this._fishEyeTransform?this._fishEyeTransform(i):i}base(t,e){return arguments.length?(this._base=t,this.rescale(e)):this._base}tickFormat(){return Hn}d3Ticks(t=10,e){const i=this.domain(),s=this._limit(i[0]),a=this._limit(i[i.length-1]);return Vn(s,a,t,this._base,this.transformer,this.untransformer,e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return jn(this._limit(e[0]),this._limit(e[e.length-1]),t,this._base,this.transformer,this.untransformer)}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return cs(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return cs(this._limit(e[0]),this._limit(e[e.length-1]),t,this.transformer,this.untransformer)}getNiceConfig(){return{floor:t=>this._pows(Math.floor(this._logs(this._limit(t)))),ceil:t=>Math.abs(t)>=1?Math.ceil(t):this._pows(Math.ceil(this._logs(this._limit(t))))}}}It(xi,zo);const $i=(r,t)=>{if(!nt(r.type))return Nt(r.domain());const e=r.range(),i=Math.abs(e[e.length-1]-e[0]);if(i<2)return Nt([r.domain()[0]]);const{tickCount:s,forceTickCount:a,tickStep:n,noDecimals:o=!1,labelStyle:l}=t;let h;if(A(n))h=r.stepTicks(n);else if(A(a))h=r.forceTicks(a);else if(t.tickMode==="d3"){const d=O(s)?s({axisLength:i,labelStyle:l}):s;h=r.d3Ticks(d??5,{noDecimals:o})}else{const d=O(s)?s({axisLength:i,labelStyle:l}):s,c=O(t.tickMode)?t.tickMode:void 0;h=r.ticks(d??5,{noDecimals:o,customTicks:c})}if(t.sampling&&(t.coordinateType==="cartesian"||t.coordinateType==="polar"&&t.axisOrientType==="radius")){const{labelGap:d=4,labelFlush:c}=t;let u=Ha(r,h,t).map((p,_)=>({AABBBounds:p,value:h[_]}));for(;u.length>=3&&wo(u,d);)u=Ho.parity(u);const g=u.map(p=>p.value);g.length<3&&c&&(g.length>1&&g.pop(),Me(g)!==Me(h)&&g.push(Me(h))),h=g}return Nt(h)},Ho={parity:function(r){return r.filter((t,e)=>e%2==0)},greedy:function(r,t){let e;return r.filter((i,s)=>(!s||!Fa(e.AABBBounds,i.AABBBounds,t))&&(e=i,!0))}},Bs=(r,t,e,i)=>Ha(r,t,e).map(s=>i?[s.x1,s.x2,s.width()]:[s.y1,s.y2,s.height()]),Ps=(r,t,e=0)=>Math.max(r[0],t[0])-e/2<=Math.min(r[1],t[1])+e/2,Os=(r,t)=>r[1]<t[0]?t[0]-r[1]:t[1]<r[0]?r[0]-t[1]:0,Vo=(r,t)=>{var e;const i=r.domain();if(!i.length)return[];const{tickCount:s,forceTickCount:a,tickStep:n,labelGap:o=4,axisOrientType:l,labelStyle:h}=t,d=Ro(l),c=r.range(),u=r.calculateWholeRangeSize();if(u<2)return t.labelLastVisible?Nt([i[i.length-1]]):Nt([i[0]]);let g;if(A(n))g=r.stepTicks(n);else if(A(a))g=r.forceTicks(a);else if(A(s)){const p=O(s)?s({axisLength:u,labelStyle:h}):s;g=r.ticks(p)}else if(t.sampling){const p=((e=t.labelStyle.fontSize)!==null&&e!==void 0?e:12)+2,_=Dt(c),v=Mt(c);if(i.length<=u/p){const m=(v-_)/i.length,y=Bs(r,i,t,d),b=Math.min(...y.map(x=>x[2])),f=jo(i,y,o,t.labelLastVisible,Math.floor(b/m),!1);g=r.stepTicks(f.step),t.labelLastVisible&&(f.delCount&&(g=g.slice(0,g.length-f.delCount)),g.push(i[i.length-1]))}else{const m=[i[0],i[Math.floor(i.length/2)],i[i.length-1]],y=Bs(r,m,t,d);let b=null;y.forEach(x=>{b?b[2]<x[2]&&(b=x):b=x});const f=v-_-o>0?Math.ceil(i.length*(o+b[2])/(v-_-o)):i.length-1;g=r.stepTicks(f),!t.labelLastVisible||g.length&&g[g.length-1]===i[i.length-1]||(g.length&&Math.abs(r.scale(g[g.length-1])-r.scale(i[i.length-1]))<b[2]&&(g=g.slice(0,-1)),g.push(i[i.length-1]))}}else g=r.domain();return Nt(g)},jo=(r,t,e,i,s,a)=>{let n=0,o=0,l=-1,h=Number.MAX_VALUE;const d=g=>{let p=!0,_=0;do _+g<r.length&&Ps(t[_],t[_+g],e)&&(p=!1),_+=g;while(p&&_<r.length);return p},c=Yn(s,r.length,g=>d(g)?1:-1);let u=c;do if(u>c&&!a&&!d(u))u++;else{if(!i){o=u;break}{const g=r.length-1;let p,_=0;p=r.length%u>0?r.length-r.length%u+u:r.length;do{if(p-=u,p!==g&&!Ps(t[p],t[g],e))break;_++}while(p>0);if(p===g){o=u,n=_;break}{const v=Math.floor(r.length/u)-_+1;if(v<l)break;{l=v;const m=Os(t[p],t[g]),y=p-u>=0?Os(t[p-u],t[p]):m,b=Math.abs(m-y);if(b<h&&(h=b,o=u,n=_),m<=y)break}}}u++}while(u<=r.length);return{step:o,delCount:n}};function Di(r,t,e,i){let s="";if(!r||t.length===0)return s;const a=t[0],n=Oe.distancePP(r,a),o=e?0:1;return i?s+=`M${r.x},${r.y-n}A${n},${n},0,0,${o},${r.x},${r.y+n}A${n},${n},0,0,${o},${r.x},${r.y-n}Z`:t.forEach((l,h)=>{h===0?s=`M${l.x},${l.y}`:s+=`A${n},${n},0,0,${o},${l.x},${l.y}`}),s}function Yo(r,t,e){const{type:i,closed:s}=e,a=t.slice(0).reverse();let n="",o="";if(i==="line"&&e.smoothLink&&e.center){const l=r[0],h=a[0],d=e.center;n=ce(r,!!s),o=ce(a,!!s);const c=Oe.distancePP(h,d),u=Oe.distancePP(l,d);n+=`A${c},${c},0,0,1,${h.x},${h.y}L${h.x},${h.y}`,o+=`A${u},${u},0,0,0,${l.x},${l.y}`}else if(i==="circle"){const{center:l}=e;n=Di(l,r,!1,!!s),o=Di(l,a,!0,!!s)}else i!=="line"&&i!=="polygon"||(n=ce(r,!!s),o=ce(a,!!s));return s?n+=o:(o="L"+o.substring(1),n+=o,n+="Z"),n}class me extends Xt{constructor(){super(...arguments),this.name="axis-grid",this.data=[]}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}render(){this._prevInnerView=this._innerView&&Ba(this._innerView),this.removeAllChild(!0),this._innerView=F.group({x:0,y:0,pickable:!1}),this.add(this._innerView);const{items:t,visible:e}=this.attribute;t&&t.length&&e!==!1&&(this.data=this._transformItems(t),this._renderGrid(this._innerView))}getVerticalCoord(t,e,i){return Pa(t,this.getVerticalVector(e,i,t))}_transformItems(t){const e=[];return t.forEach(i=>{var s;e.push(Object.assign(Object.assign({},i),{point:this.getTickCoord(i.value),id:(s=i.id)!==null&&s!==void 0?s:i.label}))}),e}_renderGrid(t){const{visible:e}=this.attribute.subGrid||{};e&&this._renderGridByType(!0,t),this._renderGridByType(!1,t)}_renderGridByType(t,e){const i=S({},this.attribute,this.getGridAttribute(t)),{type:s,items:a,style:n,closed:o,alternateColor:l,depth:h=0}=i,d=t?`${dt.grid}-sub`:`${dt.grid}`;if(a.forEach((c,u)=>{const{id:g,points:p}=c;let _="";if(s==="line"||s==="polygon")_=ce(p,!!o);else if(s==="circle"){const{center:m}=this.attribute;_=Di(m,p,!1,!!o)}const v=F.path(Object.assign({path:_,z:h},O(n)?S({},this.skipDefault?null:me.defaultAttributes.style,n(c,u)):n));v.name=`${d}-line`,v.id=this._getNodeId(`${d}-path-${g}`),e.add(v)}),h&&s==="line"&&a.forEach((c,u)=>{const{id:g,points:p}=c,_=[];_.push(p[0]);const v=p[1].x-p[0].x,m=p[1].y-p[0].y,y=Math.sqrt(v*v+m*m),b=h/y;_.push({x:p[0].x+v*b,y:p[0].y+m*b});const f=ce(_,!!o),x=_e(_[0].x-_[1].x),M=_e(_[0].y-_[1].y),k=F.path(Object.assign({path:f,z:0,alpha:x>M?(p[1].x-p[0].x>0?-1:1)*Ne/2:0,beta:x<M?-Ne/2:0,anchor3d:x>M?[_[0].x,0]:[0,_[0].y]},O(n)?S({},this.skipDefault?null:me.defaultAttributes.style,n(c,u)):n));k.name=`${d}-line`,k.id=this._getNodeId(`${d}-path-${g}`),e.add(k)}),a.length>1&&l){const c=G(l)?l:[l,"transparent"],u=g=>c[g%c.length];for(let g=0;g<a.length-1;g++){const[p,_]=[a[g].points,a[g+1].points],v=Yo(p,_,i),m=F.path({path:v,fill:u(g)});m.name=`${d}-region`,m.id=this._getNodeId(`${d}-region-${g}`),e.add(m)}}}_getNodeId(t){return`${this.id}-${t}`}_parseTickSegment(){let t=1;return this.data.length>=2&&(t=this.data[1].value-this.data[0].value),t}_getPointsOfSubGrid(t,e){const i=this.data.length,s=[];return i>=2&&this.data.forEach(a=>{let n=a.value;if(!e){const o=a.value-t/2;if(this.isInValidValue(o))return;n=o}s.push({value:n})}),s}release(){super.release(),this._prevInnerView=null,this._innerView=null}}me.defaultAttributes={style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]}}};Eo();class Va extends me{constructor(t,e){super(e!=null&&e.skipDefault?t:S({},me.defaultAttributes,t),e)}_getGridPoint(t,e){let i;if(t==="line"){const{length:s}=this.attribute;i=[e,this.getVerticalCoord(e,s,!0)]}else if(t==="circle"||t==="polygon"){const{center:s,sides:a=6,startAngle:n=Xn,endAngle:o=Gn}=this.attribute,l=Oe.distancePP(s,e);i=mo(s,a,l,n,o)}return i}getGridAttribute(t){const{type:e,alignWithLabel:i=!0}=this.attribute,s=this._parseTickSegment();let a,n=[];if(t){a=S({},this.attribute,this.attribute.subGrid);const o=[],{count:l=4}=this.attribute.subGrid||{};if(this.data.length>=2){const h=this._getPointsOfSubGrid(s,i);for(let d=0;d<h.length-1;d++){const c=h[d],u=h[d+1];o.push({id:`sub-${d}-0`,points:this._getGridPoint(e,this.getTickCoord(c.value)),datum:{}});for(let g=0;g<l;g++){const p=(g+1)/(l+1),_=(1-p)*c.value+p*u.value,v=this.getTickCoord(_);o.push({id:`sub-${d}-${g+1}`,points:this._getGridPoint(e,v),datum:{}})}d===h.length-2&&o.push({id:`sub-${d}-${l+1}`,points:this._getGridPoint(e,this.getTickCoord(u.value)),datum:{}})}n=o}}else{a=this.attribute;const o=[];this.data.forEach(l=>{let{point:h}=l;if(!i){const d=l.value-s/2;if(this.isInValidValue(d))return;h=this.getTickCoord(d)}o.push({id:l.label,datum:l,points:this._getGridPoint(e,h)})}),n=o}return Object.assign(Object.assign({},a),{items:n})}}It(Va,za);const Ds="M -0.0544 0.25 C -0.0742 0.25 -0.0901 0.234 -0.0901 0.2143 L -0.0901 -0.1786 C -0.0901 -0.1983 -0.0742 -0.2143 -0.0544 -0.2143 L -0.0187 -0.2143 L -0.0187 -0.5 L 0.017 -0.5 L 0.017 -0.2143 L 0.0527 -0.2143 C 0.0724 -0.2143 0.0884 -0.1983 0.0884 -0.1786 L 0.0884 0.2143 C 0.0884 0.234 0.0724 0.25 0.0527 0.25 L 0.017 0.25 L 0.017 0.5 L -0.0187 0.5 L -0.0187 0.25 L -0.0544 0.25 Z M -0.0187 -0.1429 L -0.0544 -0.1429 L -0.0544 0.1786 L -0.0187 0.1786 L -0.0187 -0.1429 Z M 0.0527 -0.1429 L 0.017 -0.1429 L 0.017 0.1786 L 0.0527 0.1786 L 0.0527 -0.1429 Z",Xo={orient:"bottom",showDetail:"auto",brushSelect:!0,zoomLock:!1,minSpan:0,maxSpan:1,delayType:"throttle",delayTime:0,realTime:!0,backgroundStyle:{fill:"white",stroke:"#D1DBEE",lineWidth:1,cornerRadius:2},dragMaskStyle:{fill:"#B0C8F9",fillOpacity:.2},backgroundChartStyle:{area:{visible:!0,stroke:"#D1DBEE",lineWidth:1,fill:"#F6F8FC"},line:{visible:!0,stroke:"#D1DBEE",lineWidth:1}},selectedBackgroundStyle:{fill:"#B0C8F9",fillOpacity:.5},selectedBackgroundChartStyle:{area:{visible:!0,stroke:"#B0C8F9",lineWidth:1,fill:"#fbb934"},line:{visible:!0,stroke:"#fbb934",lineWidth:1}},middleHandlerStyle:{visible:!0,background:{size:8,style:{fill:"white",stroke:"#B0C8F9",cornerRadius:2}},icon:{size:6,fill:"white",stroke:"#B0C8F9",symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}},startHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:Ds,fill:"white",stroke:"#B0C8F9",lineWidth:.5},endHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:Ds,fill:"white",stroke:"#B0C8F9",lineWidth:.5},startTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}},endTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}}},Ht={horizontal:{angle:0,strokeBoundsBuffer:0,boundsPadding:2,pickMode:"imprecise",cursor:"ew-resize"},vertical:{angle:Math.PI/180*90,cursor:"ns-resize",boundsPadding:2,pickMode:"imprecise",strokeBoundsBuffer:0}};var ht;(function(r){r.startHandler="startHandler",r.endHandler="endHandler",r.middleHandler="middleHandler",r.background="background"})(ht||(ht={}));function Go(){ca(),Fi(),_i(),Zn(),ve()}var Es=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(i=Object.getOwnPropertySymbols(r);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(e[i[s]]=r[i[s]])}return e};const Zo={debounce:ji,throttle:mi};Go();let ja=class Ya extends Xt{setPropsFromAttrs(){const{start:t,end:e,orient:i,previewData:s,previewPointsX:a,previewPointsY:n,previewPointsX1:o,previewPointsY1:l}=this.attribute;t&&(this.state.start=t),e&&(this.state.end=e);const{width:h,height:d}=this.getLayoutAttrFromConfig();this._spanCache=this.state.end-this.state.start,this._isHorizontal=i==="top"||i==="bottom",this._layoutCache.max=this._isHorizontal?h:d,this._layoutCache.attPos=this._isHorizontal?"x":"y",this._layoutCache.attSize=this._isHorizontal?"width":"height",s&&(this._previewData=s),O(a)&&(this._previewPointsX=a),O(n)&&(this._previewPointsY=n),O(o)&&(this._previewPointsX1=o),O(l)&&(this._previewPointsY1=l)}constructor(t,e){super(e!=null&&e.skipDefault?t:S({},Ya.defaultAttributes,t)),this.name="dataZoom",this._previewData=[],this._activeState=!1,this._activeCache={startPos:{x:0,y:0},lastPos:{x:0,y:0}},this._layoutCache={attPos:"x",attSize:"width",max:0},this.state={start:0,end:1},this._statePointToData=a=>a,this._onHandlerPointerDown=(a,n)=>{a.stopPropagation(),n==="start"?(this._activeTag=ht.startHandler,this._activeItem=this._startHandlerMask):n==="end"?(this._activeTag=ht.endHandler,this._activeItem=this._endHandlerMask):n==="middleRect"?(this._activeTag=ht.middleHandler,this._activeItem=this._middleHandlerRect):n==="middleSymbol"?(this._activeTag=ht.middleHandler,this._activeItem=this._middleHandlerSymbol):n==="background"&&(this._activeTag=ht.background,this._activeItem=this._background),this._activeState=!0,this._activeCache.startPos=this.eventPosToStagePos(a),this._activeCache.lastPos=this.eventPosToStagePos(a),ae.env==="browser"&&(ae.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),ae.addEventListener("pointerup",this._onHandlerPointerUp)),this.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0})},this._pointerMove=a=>{a.stopPropagation();const{start:n,end:o,brushSelect:l,realTime:h=!0}=this.attribute,d=this.eventPosToStagePos(a),{attPos:c,max:u}=this._layoutCache,g=(d[c]-this._activeCache.lastPos[c])/u;let{start:p,end:_}=this.state;this._activeState&&(this._activeTag===ht.middleHandler?this.moveZoomWithMiddle((this.state.start+this.state.end)/2+g):this._activeTag===ht.startHandler?p+g>_?(p=_,_=p+g,this._activeTag=ht.endHandler):p+=g:this._activeTag===ht.endHandler&&(_+g<p?(_=p,p=_+g,this._activeTag=ht.startHandler):_+=g),this._activeCache.lastPos=d,l&&this.renderDragMask()),p=Math.min(Math.max(p,0),1),_=Math.min(Math.max(_,0),1),n===p&&o===_||(this.setStateAttr(p,_,!0),h&&this._dispatchEvent("change",{start:p,end:_,tag:this._activeTag}))},this._onHandlerPointerMove=this.attribute.delayTime===0?this._pointerMove:Zo[this.attribute.delayType](this._pointerMove,this.attribute.delayTime),this._onHandlerPointerUp=a=>{a.preventDefault();const{start:n,end:o,brushSelect:l,realTime:h=!0}=this.attribute;if(this._activeState&&this._activeTag===ht.background){const d=this.eventPosToStagePos(a);this.backgroundDragZoom(this._activeCache.startPos,d)}this._activeState=!1,l&&this.renderDragMask(),n===this.state.start&&o===this.state.end||(this.setStateAttr(this.state.start,this.state.end,!0),this._dispatchEvent("change",{start:this.state.start,end:this.state.end,tag:this._activeTag})),ae.env==="browser"&&(ae.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),ae.removeEventListener("pointerup",this._onHandlerPointerUp)),this.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.removeEventListener("pointerup",this._onHandlerPointerUp)};const{position:i,showDetail:s}=t;this._activeCache.startPos=i,this._activeCache.lastPos=i,this._showText=s!=="auto"&&s,this.setPropsFromAttrs()}setAttributes(t,e){super.setAttributes(t,e),this.setPropsFromAttrs()}bindEvents(){if(this.attribute.disableTriggerEvent)return void this.setAttribute("childrenPickable",!1);const{showDetail:t,brushSelect:e}=this.attribute;this._startHandlerMask&&this._startHandlerMask.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"start")),this._endHandlerMask&&this._endHandlerMask.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"end")),this._middleHandlerSymbol&&this._middleHandlerSymbol.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"middleSymbol")),this._middleHandlerRect&&this._middleHandlerRect.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"middleRect"));const i=e?"background":"middleRect";this._selectedBackground&&this._selectedBackground.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,i)),e&&this._background&&this._background.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"background")),e&&this._previewGroup&&this._previewGroup.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,"background")),this._selectedPreviewGroup&&this._selectedPreviewGroup.addEventListener("pointerdown",s=>this._onHandlerPointerDown(s,i)),this.addEventListener("pointerup",this._onHandlerPointerUp),this.addEventListener("pointerupoutside",this._onHandlerPointerUp),t==="auto"&&(this.addEventListener("pointerenter",this._onHandlerPointerEnter),this.addEventListener("pointerleave",this._onHandlerPointerLeave))}dragMaskSize(){const{position:t}=this.attribute,{attPos:e,max:i}=this._layoutCache;return this._activeCache.lastPos[e]-t[e]>i?i+t[e]-this._activeCache.startPos[e]:this._activeCache.lastPos[e]-t[e]<0?t[e]-this._activeCache.startPos[e]:this._activeCache.lastPos[e]-this._activeCache.startPos[e]}setStateAttr(t,e,i){const{zoomLock:s=!1,minSpan:a=0,maxSpan:n=1}=this.attribute,o=e-t;o!==this._spanCache&&(s||o<a||o>n)||(this._spanCache=o,this.state.start=t,this.state.end=e,i&&this.setAttributes({start:t,end:e}))}eventPosToStagePos(t){return this.stage.eventPointTransform(t)}_onHandlerPointerEnter(t){t.stopPropagation(),this._showText=!0,this.renderText()}_onHandlerPointerLeave(t){t.stopPropagation(),this._showText=!1,this.renderText()}backgroundDragZoom(t,e){const{attPos:i,max:s}=this._layoutCache,{position:a}=this.attribute,n=t[i]-a[i],o=e[i]-a[i],l=Math.min(Math.max(Math.min(n,o)/s,0),1),h=Math.min(Math.max(Math.max(n,o)/s,0),1);Math.abs(l-h)<.01?this.moveZoomWithMiddle(l):this.setStateAttr(l,h,!1)}moveZoomWithMiddle(t){let e=t-(this.state.start+this.state.end)/2;e!==0&&(e>0?this.state.end+e>1&&(e=1-this.state.end):e<0&&this.state.start+e<0&&(e=-this.state.start),this.setStateAttr(this.state.start+e,this.state.end+e,!1))}renderDragMask(){const{dragMaskStyle:t}=this.attribute,{position:e,width:i,height:s}=this.getLayoutAttrFromConfig();this._isHorizontal?this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:We(this.dragMaskSize()<0?this._activeCache.lastPos.x:this._activeCache.startPos.x,e.x,e.x+i),y:e.y,width:this._activeState&&this._activeTag===ht.background&&Math.abs(this.dragMaskSize())||0,height:s},t),"rect"):this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:e.x,y:We(this.dragMaskSize()<0?this._activeCache.lastPos.y:this._activeCache.startPos.y,e.y,e.y+s),width:i,height:this._activeState&&this._activeTag===ht.background&&Math.abs(this.dragMaskSize())||0},t),"rect")}isTextOverflow(t,e,i){if(!e)return!1;if(this._isHorizontal){if(i==="start"){if(e.x1<t.x1)return!0}else if(e.x2>t.x2)return!0}else if(i==="start"){if(e.y1<t.y1)return!0}else if(e.y2>t.y2)return!0;return!1}setTextAttr(t,e){const{startTextStyle:i,endTextStyle:s}=this.attribute,{formatMethod:a}=i,n=Es(i,["formatMethod"]),{formatMethod:o}=s,l=Es(s,["formatMethod"]),{start:h,end:d}=this.state;this._startValue=this._statePointToData(h),this._endValue=this._statePointToData(d);const{position:c,width:u,height:g}=this.getLayoutAttrFromConfig(),p=a?a(this._startValue):this._startValue,_=o?o(this._endValue):this._endValue,v={x1:c.x,y1:c.y,x2:c.x+u,y2:c.y+g};let m,y,b,f;this._isHorizontal?(m={x:c.x+h*u,y:c.y+g/2},y={x:c.x+d*u,y:c.y+g/2},b={textAlign:this.isTextOverflow(v,t,"start")?"left":"right",textBaseline:"middle"},f={textAlign:this.isTextOverflow(v,e,"end")?"right":"left",textBaseline:"middle"}):(m={x:c.x+u/2,y:c.y+h*g},y={x:c.x+u/2,y:c.y+d*g},b={textAlign:"center",textBaseline:this.isTextOverflow(v,t,"start")?"top":"bottom"},f={textAlign:"center",textBaseline:this.isTextOverflow(v,e,"end")?"bottom":"top"}),this._startText=this.maybeAddLabel(this._container,S({},n,{text:p,x:m.x,y:m.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:b}),`data-zoom-start-text-${c}`),this._endText=this.maybeAddLabel(this._container,S({},l,{text:_,x:y.x,y:y.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:f}),`data-zoom-end-text-${c}`)}renderText(){let t=null,e=null;this.setTextAttr(t,e),t=this._startText.AABBBounds,e=this._endText.AABBBounds,this.setTextAttr(t,e),t=this._startText.AABBBounds,e=this._endText.AABBBounds;const{x1:i,x2:s,y1:a,y2:n}=t,{dx:o=0,dy:l=0}=this.attribute.startTextStyle;if(new Un().set(i,a,s,n).intersects(e)){const h=this.attribute.orient==="bottom"||this.attribute.orient==="right"?-1:1;this._isHorizontal?this._startText.setAttribute("dy",l+h*Math.abs(e.y1-e.y2)):this._startText.setAttribute("dx",o+h*Math.abs(e.x1-e.x2))}else this._isHorizontal?this._startText.setAttribute("dy",l):this._startText.setAttribute("dx",o)}getLayoutAttrFromConfig(){var t,e,i,s,a,n;if(this._layoutAttrFromConfig)return this._layoutAttrFromConfig;const{position:o,size:l,orient:h,middleHandlerStyle:d={},startHandlerStyle:c={},endHandlerStyle:u={},backgroundStyle:g={}}=this.attribute,{width:p,height:_}=l,v=(e=(t=d.background)===null||t===void 0?void 0:t.size)!==null&&e!==void 0?e:10;let m,y,b;d.visible?this._isHorizontal?(m=p,y=_-v,b={x:o.x,y:o.y+v}):(m=p-v,y=_,b={x:o.x+(h==="left"?v:0),y:o.y}):(m=p,y=_,b=o);const f=(i=c.size)!==null&&i!==void 0?i:this._isHorizontal?y:m,x=(s=u.size)!==null&&s!==void 0?s:this._isHorizontal?y:m;return c.visible&&(this._isHorizontal?(m-=(f+x)/2,b={x:b.x+f/2,y:b.y}):(y-=(f+x)/2,b={x:b.x,y:b.y+f/2})),y+=(a=g.lineWidth/2)!==null&&a!==void 0?a:1,m+=(n=g.lineWidth/2)!==null&&n!==void 0?n:1,this._layoutAttrFromConfig={position:b,width:m,height:y},this._layoutAttrFromConfig}render(){var t,e,i,s,a,n,o,l,h,d,c,u,g,p,_,v,m,y,b,f,x,M,k,B,P,w,V,J,j,ot,Y,Z,U,xt;this._layoutAttrFromConfig=null;const{orient:yt,backgroundStyle:ee,backgroundChartStyle:Tt={},selectedBackgroundStyle:xe={},selectedBackgroundChartStyle:Se={},middleHandlerStyle:it={},startHandlerStyle:Zt={},endHandlerStyle:Ut={},brushSelect:Fe,zoomLock:lt}=this.attribute,{start:gt,end:St}=this.state,{position:z,width:K,height:tt}=this.getLayoutAttrFromConfig(),He=(t=Zt.triggerMinSize)!==null&&t!==void 0?t:40,Ve=(e=Ut.triggerMinSize)!==null&&e!==void 0?e:40,N=this.createOrUpdateChild("dataZoom-container",{},"group");if(this._container=N,this._background=N.createOrUpdateChild("background",Object.assign(Object.assign({x:z.x,y:z.y,width:K,height:tt,cursor:Fe?"crosshair":"auto"},ee),{pickable:!lt&&((i=ee.pickable)===null||i===void 0||i)}),"rect"),!((s=Tt.line)===null||s===void 0)&&s.visible&&this.setPreviewAttributes("line",N),!((a=Tt.area)===null||a===void 0)&&a.visible&&this.setPreviewAttributes("area",N),Fe&&this.renderDragMask(),this._isHorizontal?this._selectedBackground=N.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:z.x+gt*K,y:z.y,width:(St-gt)*K,height:tt,cursor:Fe?"crosshair":"move"},xe),{pickable:!lt&&((n=Se.pickable)===null||n===void 0||n)}),"rect"):this._selectedBackground=N.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:z.x,y:z.y+gt*tt,width:K,height:(St-gt)*tt,cursor:Fe?"crosshair":"move"},xe),{pickable:!lt&&((o=xe.pickable)===null||o===void 0||o)}),"rect"),!((l=Se.line)===null||l===void 0)&&l.visible&&this.setSelectedPreviewAttributes("line",N),!((h=Se.area)===null||h===void 0)&&h.visible&&this.setSelectedPreviewAttributes("area",N),this._isHorizontal){if(it.visible){const Rt=((d=it.background)===null||d===void 0?void 0:d.size)||10;this._middleHandlerRect=N.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:z.x+gt*K,y:z.y-Rt,width:(St-gt)*K,height:Rt},(c=it.background)===null||c===void 0?void 0:c.style),{pickable:!lt&&((p=(g=(u=it.background)===null||u===void 0?void 0:u.style)===null||g===void 0?void 0:g.pickable)===null||p===void 0||p)}),"rect"),this._middleHandlerSymbol=N.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:z.x+(gt+St)/2*K,y:z.y-Rt/2,strokeBoundsBuffer:0,angle:0,symbolType:(v=(_=it.icon)===null||_===void 0?void 0:_.symbolType)!==null&&v!==void 0?v:"square"},it.icon),{pickable:!lt&&((m=it.icon.pickable)===null||m===void 0||m)}),"symbol")}this._startHandler=N.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:z.x+gt*K,y:z.y+tt/2,size:tt,symbolType:(y=Zt.symbolType)!==null&&y!==void 0?y:"square"},Ht.horizontal),Zt),{pickable:!lt&&((b=Zt.pickable)===null||b===void 0||b)}),"symbol"),this._endHandler=N.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:z.x+St*K,y:z.y+tt/2,size:tt,symbolType:(f=Ut.symbolType)!==null&&f!==void 0?f:"square"},Ht.horizontal),Ut),{pickable:!lt&&((x=Ut.pickable)===null||x===void 0||x)}),"symbol");const je=Math.max(this._startHandler.AABBBounds.width(),He),Ye=Math.max(this._startHandler.AABBBounds.height(),He),ie=Math.max(this._endHandler.AABBBounds.width(),Ve),se=Math.max(this._endHandler.AABBBounds.height(),Ve);this._startHandlerMask=N.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:z.x+gt*K-je/2,y:z.y+tt/2-Ye/2,width:je,height:Ye,fill:"white",fillOpacity:0,zIndex:999},Ht.horizontal),{pickable:!lt}),"rect"),this._endHandlerMask=N.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:z.x+St*K-ie/2,y:z.y+tt/2-se/2,width:ie,height:se,fill:"white",fillOpacity:0,zIndex:999},Ht.horizontal),{pickable:!lt}),"rect")}else{if(it.visible){const Rt=((M=it.background)===null||M===void 0?void 0:M.size)||10;this._middleHandlerRect=N.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:yt==="left"?z.x-Rt:z.x+K,y:z.y+gt*tt,width:Rt,height:(St-gt)*tt},(k=it.background)===null||k===void 0?void 0:k.style),{pickable:!lt&&((w=(P=(B=it.background)===null||B===void 0?void 0:B.style)===null||P===void 0?void 0:P.pickable)===null||w===void 0||w)}),"rect"),this._middleHandlerSymbol=N.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:yt==="left"?z.x-Rt/2:z.x+K+Rt/2,y:z.y+(gt+St)/2*tt,angle:Math.PI/180*90,symbolType:(J=(V=it.icon)===null||V===void 0?void 0:V.symbolType)!==null&&J!==void 0?J:"square",strokeBoundsBuffer:0},it.icon),{pickable:!lt&&((ot=(j=it.icon)===null||j===void 0?void 0:j.pickable)===null||ot===void 0||ot)}),"symbol")}this._startHandler=N.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:z.x+K/2,y:z.y+gt*tt,size:K,symbolType:(Y=Zt.symbolType)!==null&&Y!==void 0?Y:"square"},Ht.vertical),Zt),{pickable:!lt&&((Z=Zt.pickable)===null||Z===void 0||Z)}),"symbol"),this._endHandler=N.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:z.x+K/2,y:z.y+St*tt,size:K,symbolType:(U=Ut.symbolType)!==null&&U!==void 0?U:"square"},Ht.vertical),Ut),{pickable:!lt&&((xt=Ut.pickable)===null||xt===void 0||xt)}),"symbol");const je=Math.max(this._startHandler.AABBBounds.width(),He),Ye=Math.max(this._startHandler.AABBBounds.height(),He),ie=Math.max(this._endHandler.AABBBounds.width(),Ve),se=Math.max(this._endHandler.AABBBounds.height(),Ve);this._startHandlerMask=N.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:z.x+K/2+je/2,y:z.y+gt*tt-Ye/2,width:se,height:ie,fill:"white",fillOpacity:0,zIndex:999},Ht.vertical),{pickable:!lt}),"rect"),this._endHandlerMask=N.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:z.x+K/2+ie/2,y:z.y+St*tt-se/2,width:se,height:ie,fill:"white",fillOpacity:0,zIndex:999},Ht.vertical),{pickable:!lt}),"rect")}this._showText&&this.renderText()}computeBasePoints(){const{orient:t}=this.attribute,{position:e,width:i,height:s}=this.getLayoutAttrFromConfig();let a,n;return this._isHorizontal?(a=[{x:e.x,y:e.y+s}],n=[{x:e.x+i,y:e.y+s}]):t==="left"?(a=[{x:e.x+i,y:e.y}],n=[{x:e.x+i,y:e.y+s}]):(a=[{x:e.x,y:e.y+s}],n=[{x:e.x,y:e.y}]),{basePointStart:a,basePointEnd:n}}simplifyPoints(t){var e;if(t.length>1e4){const i=(e=this.attribute.tolerance)!==null&&e!==void 0?e:this._previewData.length/1e4;return oo(t,i)}return t}getPreviewLinePoints(){let t=this._previewData.map(s=>({x:this._previewPointsX&&this._previewPointsX(s),y:this._previewPointsY&&this._previewPointsY(s)}));if(t.length===0)return t;t=this.simplifyPoints(t);const{basePointStart:e,basePointEnd:i}=this.computeBasePoints();return e.concat(t).concat(i)}getPreviewAreaPoints(){let t=this._previewData.map(s=>({x:this._previewPointsX&&this._previewPointsX(s),y:this._previewPointsY&&this._previewPointsY(s),x1:this._previewPointsX1&&this._previewPointsX1(s),y1:this._previewPointsY1&&this._previewPointsY1(s)}));if(t.length===0)return t;t=this.simplifyPoints(t);const{basePointStart:e,basePointEnd:i}=this.computeBasePoints();return e.concat(t).concat(i)}setPreviewAttributes(t,e){this._previewGroup||(this._previewGroup=e.createOrUpdateChild("previewGroup",{pickable:!1},"group")),t==="line"?this._previewLine=this._previewGroup.createOrUpdateChild("previewLine",{},"line"):this._previewArea=this._previewGroup.createOrUpdateChild("previewArea",{curveType:"basis"},"area");const{backgroundChartStyle:i={}}=this.attribute;t==="line"&&this._previewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),t==="area"&&this._previewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}setSelectedPreviewAttributes(t,e){this._selectedPreviewGroupClip||(this._selectedPreviewGroupClip=e.createOrUpdateChild("selectedPreviewGroupClip",{pickable:!1},"group"),this._selectedPreviewGroup=this._selectedPreviewGroupClip.createOrUpdateChild("selectedPreviewGroup",{},"group")),t==="line"?this._selectedPreviewLine=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewLine",{},"line"):this._selectedPreviewArea=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewArea",{curveType:"basis"},"area");const{selectedBackgroundChartStyle:i={}}=this.attribute,{start:s,end:a}=this.state,{position:n,width:o,height:l}=this.getLayoutAttrFromConfig();this._selectedPreviewGroupClip.setAttributes({x:this._isHorizontal?n.x+s*o:n.x,y:this._isHorizontal?n.y:n.y+s*l,width:this._isHorizontal?(a-s)*o:o,height:this._isHorizontal?l:(a-s)*l,clip:!0,pickable:!1}),this._selectedPreviewGroup.setAttributes({x:-(this._isHorizontal?n.x+s*o:n.x),y:-(this._isHorizontal?n.y:n.y+s*l),width:this._isHorizontal?(a-s)*o:o,height:this._isHorizontal?l:(a-s)*l,pickable:!1}),t==="line"&&this._selectedPreviewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),t==="area"&&this._selectedPreviewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}maybeAddLabel(t,e,i){let s=this.find(a=>a.name===i,!0);return s?s.setAttributes(e):(s=new be(e),s.name=i),t.add(s),s}setStartAndEnd(t,e){const{start:i,end:s}=this.attribute;A(t)&&A(e)&&(t!==this.state.start||e!==this.state.end)&&(this.state.start=t,this.state.end=e,i===this.state.start&&s===this.state.end||(this.setStateAttr(t,e,!0),this._dispatchEvent("change",{start:t,end:e,tag:this._activeTag})))}setPreviewData(t){this._previewData=t}setText(t,e){e==="start"?this._startText.setAttribute("text",t):this._endText.setAttribute("text",t)}getStartValue(){return this._startValue}getEndTextValue(){return this._endValue}getMiddleHandlerSize(){var t,e,i,s;const{middleHandlerStyle:a={}}=this.attribute,n=(e=(t=a.background)===null||t===void 0?void 0:t.size)!==null&&e!==void 0?e:10,o=(s=(i=a.icon)===null||i===void 0?void 0:i.size)!==null&&s!==void 0?s:10;return Math.max(n,...T(o))}setPreviewPointsX(t){O(t)&&(this._previewPointsX=t)}setPreviewPointsY(t){O(t)&&(this._previewPointsY=t)}setPreviewPointsX1(t){O(t)&&(this._previewPointsX1=t)}setPreviewPointsY1(t){O(t)&&(this._previewPointsY1=t)}setStatePointToData(t){O(t)&&(this._statePointToData=t)}};ja.defaultAttributes=Xo;var Ei;(function(r){r.start="start",r.startTop="startTop",r.startBottom="startBottom",r.insideStart="insideStart",r.insideStartTop="insideStartTop",r.insideStartBottom="insideStartBottom",r.middle="middle",r.insideMiddleTop="insideMiddleTop",r.insideMiddleBottom="insideMiddleBottom",r.end="end",r.endTop="endTop",r.endBottom="endBottom",r.insideEnd="insideEnd",r.insideEndTop="insideEndTop",r.insideEndBottom="insideEndBottom"})(Ei||(Ei={}));var Ii;(function(r){r.left="left",r.right="right",r.top="top",r.bottom="bottom",r.middle="middle",r.insideLeft="insideLeft",r.insideRight="insideRight",r.insideTop="insideTop",r.insideBottom="insideBottom"})(Ii||(Ii={}));var ti;(function(r){r.arcInnerStart="arcInnerStart",r.arcInnerEnd="arcInnerEnd",r.arcInnerMiddle="arcInnerMiddle",r.arcOuterStart="arcOuterStart",r.arcOuterEnd="arcOuterEnd",r.arcOuterMiddle="arcOuterMiddle",r.center="center"})(ti||(ti={}));var wi;(function(r){r.top="top",r.bottom="bottom",r.middle="middle",r.insideTop="insideTop",r.insideBottom="insideBottom",r.insideMiddle="insideMiddle"})(wi||(wi={}));function Ni(){Gt(),ca()}function Uo(){Ni(),Zi()}function $o(){Ni(),Hi()}function No(){Ni(),Zi(),La(),_i(),$n(),ve()}class Wi extends Xt{constructor(){super(...arguments),this.name="marker",this._onHover=t=>{this._lastHover=Oa(t,this._container,this._lastHover)},this._onUnHover=t=>{this._lastHover=Da(t,this._container,this._lastHover)},this._onClick=t=>{this._lastSelect=Ea(t,this._container,this._lastSelect)}}transAnimationConfig(){var t,e,i;if(this.attribute.animation!==!1){const s=Yi(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={enter:S({},this.defaultUpdateAnimation,s,(t=this.attribute.animationEnter)!==null&&t!==void 0?t:{}),exit:S({},this.defaultExitAnimation,s,(e=this.attribute.animationExit)!==null&&e!==void 0?e:{}),update:S({},this.defaultUpdateAnimation,s,(i=this.attribute.animationUpdate)!==null&&i!==void 0?i:{})}}}setAttribute(t,e,i){super.setAttribute(t,e,i),t==="visible"&&this.render()}_bindEvent(){var t,e,i;if(!this.attribute.interactive)return;const{hover:s,select:a}=this.attribute;s&&((t=this._container)===null||t===void 0||t.addEventListener("pointermove",this._onHover),(e=this._container)===null||e===void 0||e.addEventListener("pointerout",this._onUnHover)),a&&((i=this._container)===null||i===void 0||i.addEventListener("pointerdown",this._onClick))}_releaseEvent(){var t,e,i;(t=this._container)===null||t===void 0||t.removeEventListener("pointermove",this._onHover),(e=this._container)===null||e===void 0||e.removeEventListener("pointerout",this._onUnHover),(i=this._container)===null||i===void 0||i.removeEventListener("pointerdown",this._onClick)}_initContainer(){var t,e;const{limitRect:i={},clipInRange:s}=this.attribute;let a;if(s){const n=F.group(Object.assign(Object.assign({},i),{clip:!0,pickable:!1}));a=F.group({x:-((t=i.x)!==null&&t!==void 0?t:0),y:-((e=i.y)!==null&&e!==void 0?e:0),pickable:!1}),n.add(a),this._containerClip=n,this.add(n)}else a=F.group({x:0,y:0,pickable:!1}),this.add(a);a.name="marker-container",this._container=a}_updateContainer(){var t,e;const{limitRect:i={},clipInRange:s}=this.attribute;this._containerClip&&this._containerClip.setAttributes(Object.assign({},i)),this._container.setAttributes({x:s?-((t=i.x)!==null&&t!==void 0?t:0):0,y:s?-((e=i.y)!==null&&e!==void 0?e:0):0})}render(){var t;this.transAnimationConfig(),this.setAttribute("pickable",!1);const e=(t=this.attribute.visible)===null||t===void 0||t;this.attribute.interactive===!1&&this.setAttribute("childrenPickable",!1),e&&this.isValidPoints()?this._container?(this._updateContainer(),this.updateMarker(),this.markerAnimate("update")):(this._initContainer(),this.initMarker(this._container),this.markerAnimate("enter")):(this.markerAnimate("exit"),this._container=null,this.removeAllChild(!0)),this._releaseEvent(),this._bindEvent()}release(){this.markerAnimate("exit"),super.release(),this._releaseEvent(),this._container=null}}function q(r,t,e,i){var s,a,n,o,l;if(!r)return;(s=r==null?void 0:r.animates)===null||s===void 0||s.forEach(c=>c.stop("end"));const h=(n=(a=r.attribute)===null||a===void 0?void 0:a.fillOpacity)!==null&&n!==void 0?n:1,d=(l=(o=r.attribute)===null||o===void 0?void 0:o.strokeOpacity)!==null&&l!==void 0?l:1;r.setAttributes({fillOpacity:0,strokeOpacity:0}),r.animate().wait(t).to({fillOpacity:h,strokeOpacity:d},e,i)}function Xa(r,t,e,i){r&&(q(r.startSymbol,t,e,i),r.lines.forEach(s=>q(s,t,e,i)),q(r.line,t,e,i),q(r.endSymbol,t,e,i))}function Ki(r,t,e,i){r&&(q(r.getTextShape(),t,e,i),q(r.getBgRect(),t,e,i))}function Ot(r,t,e,i){var s,a,n,o;r&&(r.setAttributes({fillOpacity:(a=(s=r.attribute)===null||s===void 0?void 0:s.fillOpacity)!==null&&a!==void 0?a:1,strokeOpacity:(o=(n=r.attribute)===null||n===void 0?void 0:n.strokeOpacity)!==null&&o!==void 0?o:1}),r.animate().wait(t).to({fillOpacity:0,strokeOpacity:0},e,i))}function Ga(r,t,e,i){r&&(Ot(r.startSymbol,t,e,i),r.lines.forEach(s=>Ot(s,t,e,i)),Ot(r.line,t,e,i),Ot(r.endSymbol,t,e,i))}function qi(r,t,e,i){r&&(Ot(r.getTextShape(),t,e,i),Ot(r.getBgRect(),t,e,i))}function Is(r,t,e,i,s){const a=.1*e,n=.7*e,o=.1*e,l=.1*e;q(r.startSymbol,i,a,s),r.lines.forEach(h=>h.setAttribute("clipRange",0)),r.lines.forEach((h,d)=>{const c=n/r.lines.length;h.animate().wait(i+a+d*c).to({clipRange:1},c,s)}),q(r.endSymbol,i+a+n,o,s),q(t.getTextShape(),i+a+n+o,l,s),q(t.getBgRect(),i+a+n+o,l,s)}function ws(r,t,e,i,s){Xa(r,i,e,s),Ki(t,i,e,s)}function Rs(r,t,e,i,s){q(r,i,e,s),Ki(t,i,e,s)}function zs(r,t,e,i,s,a){var n;Xa(r,s,i,a),q(t,s,i,a),!((n=e.getTextShape)===null||n===void 0)&&n.call(e)?Ki(e,s,i,a):q(e,s,i,a)}function Wo(r,t,e,i,s){Ga(r,i,e,s),qi(t,i,e,s)}function Ko(r,t,e,i,s){Ot(r,i,e,s),qi(t,i,e,s)}function qo(r,t,e,i,s,a){var n;Ga(r,s,i,a),Ot(t,s,i,a),!((n=e.getTextShape)===null||n===void 0)&&n.call(e)?qi(e,s,i,a):Ot(e,s,i,a)}function Fs(r,t,e,i,s,a){var n;const o=.1*i,l=.65*i,h=.05*i,d=.1*i,c=.1*i;q(r.startSymbol,s,o,a),r.lines.forEach(u=>u.setAttribute("clipRange",0)),r.lines.forEach((u,g)=>{const p=l/r.lines.length;u.animate().wait(s+o+g*p).to({clipRange:1},p,a)}),q(t,s+o+l,h,a),q(r.endSymbol,s+o+l+h,d,a),!((n=e.getTextShape)===null||n===void 0)&&n.call(e)?(q(e.getTextShape(),s+o+l+h+d,c,a),q(e.getBgRect(),s+o+l+d,c,a)):q(e,s+o+l+d,c,a)}function Jo(r,t,e,i){const{enter:s,update:a,exit:n}=e;if(i==="enter"){const{type:o,duration:l,delay:h,easing:d}=s;o==="clipIn"?Is(r,t,l,h,d):o==="fadeIn"&&ws(r,t,l,h,d)}else if(i==="update"){const{type:o,duration:l,delay:h,easing:d}=a;o==="clipIn"?Is(r,t,l,h,d):o==="fadeIn"&&ws(r,t,l,h,d)}else if(i==="exit"){const{duration:o,delay:l,easing:h}=n;Wo(r,t,o,l,h)}}function Qo(r,t,e,i){const{enter:s,update:a,exit:n}=e;if(i==="enter"){const{type:o,duration:l,delay:h,easing:d}=s;o==="fadeIn"&&Rs(r,t,l,h,d)}else if(i==="update"){const{type:o,duration:l,delay:h,easing:d}=a;o==="fadeIn"&&Rs(r,t,l,h,d)}else if(i==="exit"){const{duration:o,delay:l,easing:h}=n;Ko(r,t,o,l,h)}}function tl(r,t,e,i){const[s,a]=r,{enter:n,update:o,exit:l}=e;if(i==="enter"){const{type:h,duration:d,delay:c,easing:u}=n;h==="fadeIn"?zs(s,a,t,d,c,u):h==="callIn"&&Fs(s,a,t,d,c,u)}else if(i==="update"){const{type:h,duration:d,delay:c,easing:u}=o;h==="fadeIn"?zs(s,a,t,d,c,u):h==="callIn"&&Fs(s,a,t,d,c,u)}else if(i==="exit"){const{duration:h,delay:d,easing:c}=l;qo(s,a,t,h,d,c)}}const el={type:"clipIn",duration:500,easing:"linear",delay:0},il={type:"fadeIn",duration:500,easing:"linear",delay:0},sl={type:"callIn",duration:500,easing:"linear",delay:0},Ji={type:"fadeOut",duration:500,easing:"linear",delay:0};class al extends Wi{constructor(){super(...arguments),this.name="markCommonLine",this.defaultUpdateAnimation=el,this.defaultExitAnimation=Ji}getLine(){return this._line}getLabel(){return this._label}setLabelPos(){const{label:t={},limitRect:e}=this.attribute,{position:i,confine:s,autoRotate:a}=t,n=this.getPointAttrByPosition(i),o=i.toString().toLocaleLowerCase().includes("start")?this._line.getStartAngle()||0:this._line.getEndAngle()||0;if(this._label.setAttributes(Object.assign(Object.assign({},n.position),{angle:a?this.getRotateByAngle(n.angle):0,textStyle:Object.assign(Object.assign({},this.getTextStyle(i,o,a)),t.textStyle)})),e&&s){const{x:l,y:h,width:d,height:c}=e;Ca(this._label,{x1:l,y1:h,x2:l+d,y2:h+c})}}initMarker(t){const{label:e,state:i}=this.attribute,s=this.createSegment();s.name="mark-common-line-line",this._line=s,t.add(s);const a=new be(Object.assign(Object.assign({},e),{state:{panel:S({},D,i==null?void 0:i.labelBackground),text:S({},D,i==null?void 0:i.label)}}));a.name="mark-common-line-label",this._label=a,t.add(a),this.setLabelPos()}updateMarker(){const{label:t,state:e}=this.attribute;this.setLineAttributes(),this._label&&(this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},t),{state:{panel:S({},D,e==null?void 0:e.labelBackground),text:S({},D,e==null?void 0:e.label)}})),this.setLabelPos())}}const kt=.001,nl={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:Ei.end,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},Hs={postiveXAxis:{start:{textAlign:"left",textBaseline:"middle"},startTop:{textAlign:"left",textBaseline:"bottom"},startBottom:{textAlign:"left",textBaseline:"top"},insideStart:{textAlign:"right",textBaseline:"middle"},insideStartTop:{textAlign:"right",textBaseline:"bottom"},insideStartBottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"left",textBaseline:"middle"},endTop:{textAlign:"left",textBaseline:"bottom"},endBottom:{textAlign:"left",textBaseline:"top"},insideEnd:{textAlign:"right",textBaseline:"middle"},insideEndTop:{textAlign:"right",textBaseline:"bottom"},insideEndBottom:{textAlign:"right",textBaseline:"top"}},negativeXAxis:{start:{textAlign:"right",textBaseline:"middle"},startTop:{textAlign:"right",textBaseline:"bottom"},startBottom:{textAlign:"right",textBaseline:"top"},insideStart:{textAlign:"left",textBaseline:"middle"},insideStartTop:{textAlign:"left",textBaseline:"bottom"},insideStartBottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"right",textBaseline:"middle"},endTop:{textAlign:"right",textBaseline:"bottom"},endBottom:{textAlign:"right",textBaseline:"top"},insideEnd:{textAlign:"left",textBaseline:"middle"},insideEndTop:{textAlign:"left",textBaseline:"bottom"},insideEndBottom:{textAlign:"left",textBaseline:"top"}}};ti.arcOuterMiddle;const rl={interactive:!0,label:{position:Ii.right,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}};ti.arcOuterMiddle;const ol={left:{textAlign:"right",textBaseline:"middle"},insideLeft:{textAlign:"left",textBaseline:"middle"},right:{textAlign:"left",textBaseline:"middle"},insideRight:{textAlign:"right",textBaseline:"middle"},top:{textAlign:"center",textBaseline:"bottom"},insideTop:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"},insideBottom:{textAlign:"center",textBaseline:"bottom"},middle:{textAlign:"center",textBaseline:"middle"}},ll={interactive:!0,targetSymbol:{visible:!1,offset:0,style:{symbolType:"circle",size:20,fill:!1,stroke:"rgba(46, 47, 50)"}},itemLine:{visible:!0,decorativeLine:{visible:!1,length:30},startSymbol:{visible:!0,clip:!0,symbolType:"circle",size:20,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},endSymbol:{visible:!1,clip:!0,symbolType:"triangle",size:12,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},lineStyle:{stroke:"#000",lineWidth:1}},itemContent:{type:"text",position:"middle",refX:10,symbolStyle:{symbolType:"star",fill:"rgb(48, 115, 242)",fillOpacity:.8,size:20},textStyle:{dx:0,dy:0},imageStyle:{width:80,height:80},richTextStyle:{width:100,height:100}}},Vs={postiveXAxis:{top:{textAlign:"left",textBaseline:"bottom"},bottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"left",textBaseline:"middle"},insideTop:{textAlign:"right",textBaseline:"bottom"},insideBottom:{textAlign:"right",textBaseline:"top"},insideMiddle:{textAlign:"right",textBaseline:"middle"}},negativeXAxis:{top:{textAlign:"right",textBaseline:"bottom"},bottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"right",textBaseline:"middle"},insideTop:{textAlign:"left",textBaseline:"bottom"},insideBottom:{textAlign:"left",textBaseline:"top"},insideMiddle:{textAlign:"left",textBaseline:"middle"}}};Uo();function hl(){Wt._animate=Jo}class Wt extends al{markerAnimate(t){Wt._animate&&this._animationConfig&&Wt._animate(this._line,this._label,this._animationConfig,t)}constructor(t,e){super(e!=null&&e.skipDefault?t:S({},Wt.defaultAttributes,t)),this.name="markLine"}getPointAttrByPosition(t){var e;const{label:i={}}=this.attribute,{refX:s=0,refY:a=0}=i,n=this._line.getMainSegmentPoints(),o=(e=this._line.getEndAngle())!==null&&e!==void 0?e:0,l=o,h=s*Math.cos(l)+a*Math.cos(l-Math.PI/2),d=s*Math.sin(l)+a*Math.sin(l-Math.PI/2);return t.includes("start")||t.includes("Start")?{position:{x:n[0].x+h,y:n[0].y+d},angle:l}:t.includes("middle")||t.includes("Middle")?{position:{x:(n[0].x+n[n.length-1].x)/2+h,y:(n[0].y+n[n.length-1].y)/2+d},angle:l}:{position:{x:n[n.length-1].x+h,y:n[n.length-1].y+d},angle:l}}getRotateByAngle(t){var e;return(Ke(t)?t:t-Math.PI)+((e=this.attribute.label.refAngle)!==null&&e!==void 0?e:0)}getTextStyle(t,e,i){return At(Math.abs(e),Math.PI/2,kt)||At(Math.abs(e),3*Math.PI/2,kt)?ua(i,e,t):Ke(e)?Hs.postiveXAxis[t]:Hs.negativeXAxis[t]}createSegment(){const{points:t,startSymbol:e,endSymbol:i,lineStyle:s,mainSegmentIndex:a,multiSegment:n,state:o}=this.attribute;return new Et({points:t,startSymbol:e,endSymbol:i,lineStyle:s,mainSegmentIndex:a,multiSegment:n,pickable:!1,state:{line:S({},D,o==null?void 0:o.line),startSymbol:S({},D,o==null?void 0:o.lineStartSymbol),endSymbol:S({},D,o==null?void 0:o.lineEndSymbol)}})}setLineAttributes(){const{points:t,startSymbol:e,endSymbol:i,lineStyle:s,mainSegmentIndex:a,multiSegment:n,state:o}=this.attribute;this._line&&this._line.setAttributes({points:t,startSymbol:e,endSymbol:i,lineStyle:s,mainSegmentIndex:a,multiSegment:n,state:{line:S({},D,o==null?void 0:o.line),startSymbol:S({},D,o==null?void 0:o.lineStartSymbol),endSymbol:S({},D,o==null?void 0:o.lineEndSymbol)}})}isValidPoints(){const{points:t}=this.attribute;if(!t||t.length<2)return!1;let e=!0;return t.forEach(i=>{if(i.length)i.forEach(s=>{I(s.x)&&I(s.y)||(e=!1)});else if(!I(i.x)||!I(i.y))return void(e=!1)}),e}}Wt.defaultAttributes=nl;$o();function dl(){Kt._animate=Qo}class Kt extends Wi{markerAnimate(t){Kt._animate&&this._animationConfig&&Kt._animate(this._area,this._label,this._animationConfig,t)}getArea(){return this._area}getLabel(){return this._label}constructor(t,e){super(e!=null&&e.skipDefault?t:S({},Kt.defaultAttributes,t)),this.name="markArea",this.defaultUpdateAnimation=il,this.defaultExitAnimation=Ji}getPointAttrByPosition(t){const{x1:e,x2:i,y1:s,y2:a}=this._area.AABBBounds;return t.includes("left")||t.includes("Left")?{x:e,y:(s+a)/2}:t.includes("right")||t.includes("Right")?{x:i,y:(s+a)/2}:t.includes("top")||t.includes("Top")?{x:(e+i)/2,y:s}:t.includes("bottom")||t.includes("Bottom")?{x:(e+i)/2,y:a}:{x:(e+i)/2,y:(s+a)/2}}setLabelPos(){var t;if(this._label&&this._area){const{label:e={}}=this.attribute,i=(t=e.position)!==null&&t!==void 0?t:"middle",s=this.getPointAttrByPosition(i);if(this._label.setAttributes(Object.assign(Object.assign({},s),{textStyle:Object.assign(Object.assign({},ol[i]),e.textStyle)})),this.attribute.limitRect&&e.confine){const{x:a,y:n,width:o,height:l}=this.attribute.limitRect;Ca(this._label,{x1:a,y1:n,x2:a+o,y2:n+l})}}}initMarker(t){const{points:e,label:i,areaStyle:s,state:a}=this.attribute,n=F.polygon(Object.assign({points:e},s));n.states=S({},D,a==null?void 0:a.area),n.name="mark-area-polygon",this._area=n,t.add(n);const o=new be(Object.assign(Object.assign({},i),{state:{panel:S({},D,a==null?void 0:a.labelBackground),text:S({},D,a==null?void 0:a.label)}}));o.name="mark-area-label",this._label=o,t.add(o),this.setLabelPos()}updateMarker(){const{points:t,label:e,areaStyle:i,state:s}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({points:t},i)),this._area.states=S({},D,s==null?void 0:s.area)),this._label&&this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},e),{state:{panel:S({},D,s==null?void 0:s.labelBackground),text:S({},D,s==null?void 0:s.label)}})),this.setLabelPos()}isValidPoints(){const{points:t}=this.attribute;if(!t||t.length<3)return!1;let e=!0;return t.forEach(i=>{I(i.x)&&I(i.y)||(e=!1)}),e}}Kt.defaultAttributes=rl;No();function cl(){qt._animate=tl}class qt extends Wi{markerAnimate(t){qt._animate&&this._animationConfig&&qt._animate([this._line,this._decorativeLine],this._item,this._animationConfig,t)}constructor(t,e){super(e!=null&&e.skipDefault?t:S({},qt.defaultAttributes,t)),this.name="markPoint",this.defaultUpdateAnimation=sl,this.defaultExitAnimation=Ji,this._isArcLine=!1,this._isStraightLine=!1}setLabelPos(){}getTextAlignAttr(t,e,i,s,a){return At(Math.abs(s),Math.PI/2,kt)||At(Math.abs(s),3*Math.PI/2,kt)?ua(t,s,a):Ke(s)?Vs.postiveXAxis[a]:Vs.negativeXAxis[a]}setItemAttributes(t,e,i,s,a){var n,o;if(!t)return;const{autoRotate:l=!0,refX:h=0,refY:d=0,refAngle:c=0,textStyle:u={},richTextStyle:g={},imageStyle:p={},position:_=wi.middle}=e,{state:v}=this.attribute,m=((n=this._line)===null||n===void 0?void 0:n.getEndAngle())||0,y=h*Math.cos(m)+d*Math.cos(m-Math.PI/2),b=h*Math.sin(m)+d*Math.sin(m-Math.PI/2);if(a==="text"){const x=s.x-i.x,M=s.y-i.y;t.setAttributes(Object.assign(Object.assign({},u),{textStyle:Object.assign(Object.assign({},this.getTextAlignAttr(l,x,M,m,(o=e.position)!==null&&o!==void 0?o:"end")),u.textStyle),state:{panel:S({},D,v==null?void 0:v.textBackground),text:S({},D,v==null?void 0:v.text)}}))}else a==="richText"?(t.setAttributes({dx:this.getItemDx(t,_,g)+(g.dx||0),dy:this.getItemDy(t,_,g)+(g.dy||0)}),t.states=S({},D,v==null?void 0:v.richText)):a==="image"&&(t.setAttributes({dx:this.getItemDx(t,_,p)+(p.dx||0),dy:this.getItemDy(t,_,p)+(p.dy||0)}),t.states=S({},D,v==null?void 0:v.image));const f=Ke(m)?m:m-Math.PI;t.setAttributes({x:s.x+(y||0),y:s.y+(b||0),angle:l&&f+c})}getItemDx(t,e,i){var s,a;const n=(a=(s=t==null?void 0:t.AABBBounds)===null||s===void 0?void 0:s.width())!==null&&a!==void 0?a:(i==null?void 0:i.width)||0;return e.includes("inside")?-n:0}getItemDy(t,e,i){var s,a;const n=(a=(s=t==null?void 0:t.AABBBounds)===null||s===void 0?void 0:s.height())!==null&&a!==void 0?a:(i==null?void 0:i.height)||0;return e.includes("top")||e.includes("Top")?-n:e.includes("middle")||e.includes("Middle")?-n/2:0}initItem(t,e,i){const{state:s}=this.attribute,{type:a="text",symbolStyle:n,richTextStyle:o,imageStyle:l,renderCustomCallback:h}=t;let d;return a==="symbol"?(d=F.symbol(Object.assign(Object.assign({},i),n)),d.states=S({},D,s==null?void 0:s.symbol)):a==="text"?d=new be(Object.assign(Object.assign({},i),{state:{panel:S({},D,s==null?void 0:s.textBackground),text:S({},D,s==null?void 0:s.text)}})):a==="richText"?(d=F.richtext(Object.assign(Object.assign({},i),o)),d.states=S({},D,s==null?void 0:s.richText)):a==="image"?(d=F.image(Object.assign(Object.assign({},i),l)),d.states=S({},D,s==null?void 0:s.image)):a==="custom"&&h&&(d=h(),d.states=S({},D,s==null?void 0:s.customMark)),d.name=`mark-point-${a}`,this.setItemAttributes(d,t,e,i,a),d}getItemLineAttr(t,e,i){let s=[],a={x:0,y:0},n=0,o=0,l=0;const{type:h="type-s",arcRatio:d=.8}=t,c=i.x-e.x,u=i.y-e.y;if(this._isStraightLine=At(c,0,kt)||At(u,0,kt),this._isArcLine){const{x:g,y:p}=e,{x:_,y:v}=i,m=(g+_)/2,y=(p+v)/2,b=p===v?0:-(g-_)/(p-v),f=m+d*(v>p?-1:1)*m,x=(M=>b*(M-m)+y)(f);o=Li(p-x,g-f),l=Li(v-x,_-f),a={x:f,y:x},d>0?l<o&&(l+=2*Math.PI):o<l&&(o+=2*Math.PI),n=Math.sqrt((f-g)*(f-g)+(x-p)*(x-p))}else s=h!=="type-do"||this._isStraightLine?h!=="type-po"||this._isStraightLine?h!=="type-op"||this._isStraightLine?[e,i]:[e,{x:e.x,y:i.y},i]:[e,{x:i.x,y:e.y},i]:[e,{x:(e.x+i.x)/2,y:i.y},i];return s=Nn(s),{points:s,center:a,radius:n,startAngle:o,endAngle:l}}reDrawLine(t,e){this._line.release();const{startSymbol:i,endSymbol:s,lineStyle:a,type:n="type-s"}=t,{state:o}=this.attribute,l=this._isArcLine?As:Et;this._container.removeChild(this._line),this._line=new l(Object.assign(Object.assign({},e),{pickable:!1,startSymbol:i,endSymbol:s,lineStyle:a,visible:t.visible,state:{line:S({},D,o==null?void 0:o.line),startSymbol:S({},D,o==null?void 0:o.lineStartSymbol),endSymbol:S({},D,o==null?void 0:o.lineEndSymbol)}})),this._container.add(this._line)}setItemLineAttr(t,e,i){if(this._line){const{startSymbol:s,endSymbol:a,lineStyle:n,type:o="type-s"}=t,{state:l}=this.attribute,h=this.getItemLineAttr(t,e,i);this._isArcLine&&this._line.key==="arc-segment"||!this._isArcLine&&this._line.key==="segment"?this._line.setAttributes(Object.assign(Object.assign({},h),{startSymbol:s,endSymbol:a,lineStyle:n,visible:t.visible,state:{line:S({},D,l==null?void 0:l.line),startSymbol:S({},D,l==null?void 0:l.lineStartSymbol),endSymbol:S({},D,l==null?void 0:l.lineEndSymbol)}})):this.reDrawLine(t,h)}}getDecorativeLineAttr(t){var e;const i=((e=t==null?void 0:t.decorativeLine)===null||e===void 0?void 0:e.length)||10,s=this._line.getEndAngle()||0;return{startPointOffsetX:i/2*Math.cos(s-Math.PI/2),startPointOffsetY:i/2*Math.sin(s-Math.PI/2),endPointOffsetX:-i/2*Math.cos(s-Math.PI/2),endPointOffsetY:-i/2*Math.sin(s-Math.PI/2)}}setDecorativeLineAttr(t,e,i){var s;if(this._decorativeLine){const{lineStyle:a}=t,{startPointOffsetX:n,startPointOffsetY:o,endPointOffsetX:l,endPointOffsetY:h}=this.getDecorativeLineAttr(t);this._decorativeLine.setAttributes(Object.assign(Object.assign({points:[{x:e.x+n,y:e.y+o},{x:e.x+l,y:e.y+h}]},a),{visible:i})),this._decorativeLine.states=S({},D,(s=this.attribute.state)===null||s===void 0?void 0:s.line)}}setTargetItemAttributes(t,e){var i,s;this._targetItem&&(this._targetItem.setAttributes(Object.assign({x:e.x,y:e.y,visible:(i=t.visible)!==null&&i!==void 0&&i,size:t.size},t.style)),this._targetItem.states=S({},D,(s=this.attribute.state)===null||s===void 0?void 0:s.targetItem))}setAllOfItemsAttr(t,e){var i;const{position:s,itemLine:a={},itemContent:n={},limitRect:o,targetSymbol:l}=this.attribute,{type:h="text",confine:d}=n;if(o&&d){const{x:c,y:u,width:g,height:p}=o,{dx:_,dy:v}=Ma(this._item,{x1:c,y1:u,x2:c+g,y2:u+p});e.x=e.x+_,e.y=e.y+v}this.setTargetItemAttributes(l,s),this.setItemLineAttr(a,t,e),this.setItemAttributes(this._item,n,t,e,h),this.setDecorativeLineAttr(a,e,(i=a.decorativeLine)===null||i===void 0?void 0:i.visible)}computeNewPositionAfterTargetItem(t){var e,i;const{itemContent:s={},targetSymbol:a}=this.attribute,{offsetX:n=0,offsetY:o=0}=s,{offset:l=0,style:h,visible:d=!1,size:c}=a,u=d?(i=(e=h.size)!==null&&e!==void 0?e:c)!==null&&i!==void 0?i:20:0,g=Li(o,n);return{newPosition:{x:t.x+(u/2+l)*Math.cos(g),y:t.y+(u/2+l)*Math.sin(g)},newItemPosition:{x:t.x+(u/2+l)*Math.cos(g)+n,y:t.y+(u/2+l)*Math.sin(g)+o}}}initMarker(t){const{position:e,itemContent:i={},itemLine:s}=this.attribute,{type:a="type-s",arcRatio:n=.8}=s,{offsetX:o=0,offsetY:l=0}=i;this._isStraightLine=At(o,0,kt)||At(l,0,kt),this._isArcLine=a==="type-arc"&&n!==0&&!this._isStraightLine;const{newPosition:h,newItemPosition:d}=this.computeNewPositionAfterTargetItem(e),c=new(this._isArcLine?As:Et)({points:[],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0});c.name="mark-point-line",this._line=c,t.add(c);const u=F.line({points:[]});u.name="mark-point-decorativeLine",this._decorativeLine=u,t.add(u);const g=F.symbol({});g.name="mark-point-targetItem",this._targetItem=g,t.add(this._targetItem);const p=this.initItem(i,h,d);this._item=p,t.add(p),this.setAllOfItemsAttr(h,d)}updateMarker(){const{position:t,itemContent:e={},itemLine:i}=this.attribute,{type:s="text"}=e,{type:a="type-s",arcRatio:n=.8}=i,{offsetX:o=0,offsetY:l=0}=e;this._isStraightLine=At(o,0,kt)||At(l,0,kt);const h=a==="type-arc"&&n!==0&&!this._isStraightLine,{newPosition:d,newItemPosition:c}=this.computeNewPositionAfterTargetItem(t);h!==this._isArcLine?(this._isArcLine=h,this.reDrawLine(i,{points:[{x:0,y:0}],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0})):this._isArcLine=h,this.setItemAttributes(this._item,e,d,c,s),this.setAllOfItemsAttr(d,c)}isValidPoints(){const{position:t}=this.attribute;return!(!I(t.x)||!I(t.y))}}qt.defaultAttributes=ll;var rt;(function(r){r.drawStart="drawStart",r.drawEnd="drawEnd",r.drawing="drawing",r.moving="moving",r.moveStart="moveStart",r.moveEnd="moveEnd",r.brushClear="brushClear"})(rt||(rt={}));const Bt={trigger:"pointerdown",updateTrigger:"pointermove",endTrigger:"pointerup",resetTrigger:"pointerupoutside",hasMask:!0,brushMode:"single",brushType:"rect",brushStyle:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",strokeWidth:2},brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:10,interactiveRange:{y1:-1/0,y2:1/0,x1:-1/0,x2:1/0}},ul=5;function gl(){Gt(),Hi()}const pl={debounce:ji,throttle:mi};gl();let Za=class Ua extends Xt{constructor(t,e){super(e!=null&&e.skipDefault?t:S({},Ua.defaultAttributes,t)),this.name="brush",this._activeDrawState=!1,this._cacheDrawPoints=[],this._isDrawedBeforeEnd=!1,this._activeMoveState=!1,this._operatingMaskMoveDx=0,this._operatingMaskMoveDy=0,this._operatingMaskMoveRangeX=[-1/0,1/0],this._operatingMaskMoveRangeY=[-1/0,1/0],this._brushMaskAABBBoundsDict={},this._onBrushStart=i=>{var s;if(this._outOfInteractiveRange(i))return;i.stopPropagation();const a=(s=this.attribute.brushMoved)===null||s===void 0||s;this._activeMoveState=a&&this._isPosInBrushMask(i),this._activeDrawState=!this._activeMoveState,this._activeDrawState&&this._initDraw(i),this._activeMoveState&&this._initMove(i)},this._onBrushing=i=>{this._outOfInteractiveRange(i)||((this._activeDrawState||this._activeMoveState)&&i.stopPropagation(),this._activeDrawState&&this._drawing(i),this._activeMoveState&&this._moving(i))},this._onBrushingWithDelay=this.attribute.delayTime===0?this._onBrushing:pl[this.attribute.delayType](this._onBrushing,this.attribute.delayTime),this._onBrushEnd=i=>{var s;if(!this._activeDrawState&&!this._activeMoveState)return;i.preventDefault();const{removeOnClick:a=!0}=this.attribute;this._activeDrawState&&!this._isDrawedBeforeEnd&&a?(!((s=this._operatingMask)===null||s===void 0)&&s._AABBBounds.empty()&&this._dispatchEvent(rt.brushClear,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:i}),this._container.incrementalClearChild(),this._brushMaskAABBBoundsDict={}):(this._activeDrawState&&this._dispatchEvent(rt.drawEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:i}),this._activeMoveState&&this._dispatchEvent(rt.moveEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:i})),this._activeDrawState=!1,this._activeMoveState=!1,this._isDrawedBeforeEnd=!1,this._operatingMask&&this._operatingMask.setAttribute("pickable",!1)}}_bindBrushEvents(){if(this.attribute.disableTriggerEvent)return;const{trigger:t=Bt.trigger,updateTrigger:e=Bt.updateTrigger,endTrigger:i=Bt.endTrigger,resetTrigger:s=Bt.resetTrigger}=this.attribute;this.stage.addEventListener(t,this._onBrushStart),this.stage.addEventListener(e,this._onBrushingWithDelay),this.stage.addEventListener(i,this._onBrushEnd),this.stage.addEventListener(s,this._onBrushEnd)}_isPosInBrushMask(t){const e=this.eventPosToStagePos(t),i=this._container.getChildren();for(let s=0;s<i.length;s++){const{points:a=[],dx:n=0,dy:o=0}=i[s].attribute,l=a.map(h=>({x:h.x+n,y:h.y+o}));if(Wn(l,e.x,e.y))return this._operatingMask=i[s],!0}return!1}_initDraw(t){const{brushMode:e}=this.attribute,i=this.eventPosToStagePos(t);this._cacheDrawPoints=[i],this._isDrawedBeforeEnd=!1,e==="single"&&(this._brushMaskAABBBoundsDict={},this._container.incrementalClearChild()),this._addBrushMask(),this._dispatchEvent(rt.drawStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_initMove(t){var e,i;this._cacheMovePoint=this.eventPosToStagePos(t),this._operatingMaskMoveDx=(e=this._operatingMask.attribute.dx)!==null&&e!==void 0?e:0,this._operatingMaskMoveDy=(i=this._operatingMask.attribute.dy)!==null&&i!==void 0?i:0;const{interactiveRange:s}=this.attribute,{minY:a=-1/0,maxY:n=1/0,minX:o=-1/0,maxX:l=1/0}=s,{x1:h,x2:d,y1:c,y2:u}=this._operatingMask.globalAABBBounds,g=o-h,p=l-d,_=a-c,v=n-u;this._operatingMaskMoveRangeX=[g,p],this._operatingMaskMoveRangeY=[_,v],this._operatingMask.setAttribute("pickable",!0),this._dispatchEvent(rt.moveStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_drawing(t){var e,i;const s=this.eventPosToStagePos(t),{sizeThreshold:a=ul,brushType:n}=this.attribute,o=this._cacheDrawPoints.length;if(o>0){const g=(e=this._cacheDrawPoints[this._cacheDrawPoints.length-1])!==null&&e!==void 0?e:{};if(s.x===g.x&&s.y===g.y)return}n==="polygon"||o<=1?this._cacheDrawPoints.push(s):this._cacheDrawPoints[o-1]=s;const l=this._computeMaskPoints();this._operatingMask.setAttribute("points",l);const{x1:h=0,x2:d=0,y1:c=0,y2:u=0}=(i=this._operatingMask)===null||i===void 0?void 0:i._AABBBounds;this._isDrawedBeforeEnd=!this._operatingMask._AABBBounds.empty()&&(Math.abs(d-h)>a||Math.abs(c-u)>a),this._isDrawedBeforeEnd&&(this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(rt.drawing,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}))}_moving(t){const e=this._cacheMovePoint,i=this.eventPosToStagePos(t);if(i.x===(e==null?void 0:e.x)&&i.y===(e==null?void 0:e.y))return;const s=i.x-e.x,a=i.y-e.y,n=Math.min(this._operatingMaskMoveRangeX[1],Math.max(this._operatingMaskMoveRangeX[0],s))+this._operatingMaskMoveDx,o=Math.min(this._operatingMaskMoveRangeY[1],Math.max(this._operatingMaskMoveRangeY[0],a))+this._operatingMaskMoveDy;this._operatingMask.setAttributes({dx:n,dy:o}),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(rt.moving,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_computeMaskPoints(){const{brushType:t,xRange:e=[0,0],yRange:i=[0,0]}=this.attribute;let s=[];const a=this._cacheDrawPoints[0],n=this._cacheDrawPoints[this._cacheDrawPoints.length-1];return s=t==="rect"?[a,{x:n.x,y:a.y},n,{x:a.x,y:n.y}]:t==="x"?[{x:a.x,y:i[0]},{x:n.x,y:i[0]},{x:n.x,y:i[1]},{x:a.x,y:i[1]}]:t==="y"?[{x:e[0],y:a.y},{x:e[0],y:n.y},{x:e[1],y:n.y},{x:e[1],y:a.y}]:Ue(this._cacheDrawPoints),s}_addBrushMask(){var t;const{brushStyle:e,hasMask:i}=this.attribute,s=F.polygon(Object.assign(Object.assign({points:Ue(this._cacheDrawPoints),cursor:"move",pickable:!1},e),{opacity:i?(t=e.opacity)!==null&&t!==void 0?t:1:0}));s.name=`brush-${Date.now()}`,this._operatingMask=s,this._container.add(s),this._brushMaskAABBBoundsDict[s.name]=s.AABBBounds}_outOfInteractiveRange(t){const{interactiveRange:e}=this.attribute,{minY:i=-1/0,maxY:s=1/0,minX:a=-1/0,maxX:n=1/0}=e,o=this.eventPosToStagePos(t);return o.x>n||o.x<a||o.y>s||o.y<i}eventPosToStagePos(t){return this.stage.eventPointTransform(t)}render(){this._bindBrushEvents();const t=this.createOrUpdateChild("brush-container",{},"group");this._container=t}releaseBrushEvents(){const{delayType:t="throttle",delayTime:e=0,trigger:i=Bt.trigger,updateTrigger:s=Bt.updateTrigger,endTrigger:a=Bt.endTrigger,resetTrigger:n=Bt.resetTrigger}=this.attribute;this.stage.removeEventListener(i,this._onBrushStart),this.stage.removeEventListener(s,this._onBrushingWithDelay),this.stage.removeEventListener(a,this._onBrushEnd),this.stage.removeEventListener(n,this._onBrushEnd)}};Za.defaultAttributes=Bt;class $a extends ga{parseAddition(t){return super.parseAddition(t),this.scale(t.scale),this}scale(t){if(this.spec.scale){const i=H(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this.detach(i),this.spec.scale=void 0}const e=H(t)?this.view.getScaleById(t):t;return this.spec.scale=e,this.attach(e),this._updateComponentEncoders(),this.commit(),this}getScale(){return H(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale}}const _l=(r,t,e,i)=>{var s,a,n,o;const l=(a=(s=t==null?void 0:t.components)===null||s===void 0?void 0:s.axis)!==null&&a!==void 0?a:{};if(!r)return S({},l,e??{});const h=[((o=(n=r.tickData)===null||n===void 0?void 0:n.call(r,i))!==null&&o!==void 0?o:[]).map(d=>({id:d.index,label:d.tick,value:d.value,rawValue:d.tick}))];return S({},l,{items:h},e??{})},ml=(r,t,e,i)=>{var s,a,n,o;const l=(a=(s=t==null?void 0:t.components)===null||s===void 0?void 0:s.circleAxis)!==null&&a!==void 0?a:{};if(!r)return S({},l,e??{});const h=[((o=(n=r.tickData)===null||n===void 0?void 0:n.call(r,i))!==null&&o!==void 0?o:[]).map(d=>({id:d.index,label:d.tick,value:d.value,rawValue:d.tick}))];return S({},l,{items:h},e??{})},Na=(r,t,e,i,s,a)=>{var n;const o=r.getCoordinateAxisPosition();s&&s.position==="auto"&&(s.position=e?"content":o);const l=r.getCoordinateAxisPoints(i);if(l){const c={start:l[0],end:l[1],verticalFactor:(o==="top"||o==="left"?-1:1)*(e?-1:1)*(!((n=r.getSpec().range)===null||n===void 0)&&n.reversed?-1:1)};if(a&&t.type==="polar"){const u=t.angle();c.center=t.origin(),c.startAngle=u[0],c.endAngle=u[1]}return c}const h=t.radius(),d=t.angle();return{center:t.origin(),radius:h[1],innerRadius:h[0],inside:e,startAngle:d[0],endAngle:d[1]}};class Wa extends $a{constructor(t,e,i){super(t,mt.axis,e),this.spec.componentType=mt.axis,this.mode=i}parseAddition(t){return super.parseAddition(t),this.axisType(t.axisType),this.tickCount(t.tickCount),this.inside(t.inside),this.baseValue(t.baseValue),this}scale(t){return super.scale(t),this._axisComponentType=null,this}axisType(t){return this.spec.axisType=t,this._axisComponentType=null,this._prepareRejoin(),this.commit(),this}addGraphicItem(t,e){const i=S({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},t),s=Ct.createGraphicComponent(this._getAxisComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,e,s)}tickCount(t){const e=H(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return e&&e.tickCount(t),this.setFunctionSpec(t,"tickCount")}inside(t){return this.setFunctionSpec(t,"inside")}baseValue(t){return this.setFunctionSpec(t,"baseValue")}getAxisComponentType(){return this._axisComponentType}_updateComponentEncoders(){const t=H(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale,e=Object.assign({update:{}},this.spec.encode),i=Object.keys(e).reduce((s,a)=>{const n=e[a];return n&&(s[a]={callback:(o,l,h)=>{var d,c;const u=this.spec.skipTheme?null:this.view.getCurrentTheme();let g=Ce(n,o,l,h);const p=Yt(this.spec.inside,h,o,l),_=Yt(this.spec.baseValue,h,o,l),v=(d=t==null?void 0:t.getCoordinate)===null||d===void 0?void 0:d.call(t);v&&(g=Object.assign(Na(t,v,p,_,this.spec.layout),g));const m=(c=t==null?void 0:t.getScale)===null||c===void 0?void 0:c.call(t),y=Yt(this.spec.tickCount,h,o,l);switch(this._getAxisComponentType()){case $t.lineAxis:return _l(m,u,g,y);case $t.circleAxis:return ml(m,u,g,y)}return g}}),s},{});this._encoders=i}_getAxisComponentType(){var t;if(this._axisComponentType)return this._axisComponentType;let e=this.spec.axisType;if(C(e)){const i=H(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;e=!((t=i==null?void 0:i.getCoordinate)===null||t===void 0)&&t.call(i)?i.getCoordinateAxisPoints()?"line":"circle":"line"}return this._axisComponentType=e==="circle"?$t.circleAxis:$t.lineAxis,this._axisComponentType}}Wa.componentType=mt.axis;const Si=()=>{Ct.registerGraphicComponent($t.lineAxis,(r,t)=>new we(r,t)),Ct.registerComponent(mt.axis,Wa)},vl=(r,t,e,i,s,a={})=>{var n;const o=(n=a.components)===null||n===void 0?void 0:n.dataLabel,l=r.map((h,d)=>{var c,u,g,p,_;const v=Object.assign(Object.assign({},s),{labelIndex:d}),m=(c=Yt(i,v,h))!==null&&c!==void 0?c:{},{components:y={}}=a;let b={};switch(h.markType){case vt.line:case vt.area:b=m.type==="line"?y.lineLabel:m.type==="area"?y.areaLabel:y.lineDataLabel;break;case vt.rect:case vt.rect3d:case vt.interval:b=y.rectLabel;break;case vt.symbol:case vt.circle:case vt.cell:b=y.symbolLabel;break;case vt.arc:case vt.arc3d:b=y.arcLabel;break;case vt.polygon:case vt.path:default:b=y.pointLabel}const f=(u=m.data)!==null&&u!==void 0?u:[],x=(p=(g=b==null?void 0:b.data)===null||g===void 0?void 0:g[0])!==null&&p!==void 0?p:{};f&&f.length>0?f.forEach((k,B)=>{if(h.elements[B]){const P=Ce(e,k,h.elements[B],v);S(k,x,P)}}):h.elements.forEach(k=>{if(k.getGraphicItem().releaseStatus!=="willRelease")if(h.isCollectionMark())k.getDatum().forEach(B=>{const P=Ce(e,B,k,v);f.push(S({},x,P))});else{const B=Ce(e,k.getDatum(),k,v),P=S({},x,B);f.push(P)}});const M=(_=h.graphicItem)===null||_===void 0?void 0:_.name;return S({},b,{data:f,baseMarkGroupName:M,getBaseMarks:()=>h.elements.map(k=>k.getGraphicItem())},m??{})}).filter(h=>!C(h));return S({},o,{size:t,dataLabels:l})};let Ka=class extends ga{constructor(t,e){super(t,mt.label,e),this.spec.componentType=mt.label}parseAddition(t){return super.parseAddition(t),this.labelStyle(t.labelStyle),this.size(t.size),this.target(t.target),this}labelStyle(t){return this.setFunctionSpec(t,"labelStyle")}size(t){return this.setFunctionSpec(t,"size")}target(t){if(this.spec.target){const e=T(this.spec.target).map(i=>H(i)?this.view.getMarkById(i):i);this.detach(e)}if(this.spec.target=t,t){const e=T(t).map(i=>H(i)?this.view.getMarkById(i):i);this.attach(e)}return this.commit(),this}_updateComponentEncoders(){const t=Object.assign({update:{}},this.spec.encode),e=Object.keys(t).reduce((i,s)=>{const a=t[s];return a&&(i[s]={callback:(n,o,l)=>{var h,d,c,u;const g=T(this.spec.target).map(m=>H(m)?this.view.getMarkById(m):m),p=(d=(h=this.group)===null||h===void 0?void 0:h.getGroupGraphicItem)===null||d===void 0?void 0:d.call(h);let _=Yt(this.spec.size,l);_||(_=p?{width:(c=p.attribute.width)!==null&&c!==void 0?c:p.AABBBounds.width(),height:(u=p.attribute.height)!==null&&u!==void 0?u:p.AABBBounds.height()}:{width:1/0,height:1/0});const v=this.spec.skipTheme?null:this.view.getCurrentTheme();return vl(g,_,a,this.spec.labelStyle,l,v)}}),i},{});this._encoders=e}};Ka.componentType=mt.label;const bl=()=>{Ct.registerGraphicComponent(mt.label,r=>new yi(r)),Ct.registerComponent(mt.label,Ka)},yl=(r,t,e,i)=>{var s,a,n,o;const l=(a=(s=t==null?void 0:t.components)===null||s===void 0?void 0:s.grid)!==null&&a!==void 0?a:{};if(!r)return S({},l,e??{});const h=((o=(n=r.tickData)===null||n===void 0?void 0:n.call(r,i))!==null&&o!==void 0?o:[]).map(d=>({id:d.index,label:d.tick,value:d.value,rawValue:d.tick}));return S({},l,{items:h},e??{})},fl=(r,t,e,i)=>{var s,a,n,o;const l=(a=(s=t==null?void 0:t.components)===null||s===void 0?void 0:s.circleGrid)!==null&&a!==void 0?a:{};if(!r)return S({},l,e??{});const h=((o=(n=r.tickData)===null||n===void 0?void 0:n.call(r,i))!==null&&o!==void 0?o:[]).map(d=>({id:d.index,label:d.tick,value:d.value,rawValue:d.tick}));return S({},l,{items:h},e??{})};class qa extends $a{constructor(t,e,i){super(t,mt.grid,e),this.spec.componentType=mt.grid,this.mode=i}parseAddition(t){return super.parseAddition(t),this.target(t.target),this.gridType(t.gridType),this.gridShape(t.gridShape),this}scale(t){return super.scale(t),this._gridComponentType=null,this}gridType(t){return this.spec.gridType=t,this._gridComponentType=null,this._prepareRejoin(),this.commit(),this}gridShape(t){return this.spec.gridShape=t,this.commit(),this}target(t){if(this.spec.target){const i=H(this.spec.target)?this.view.getMarkById(this.spec.target):this.spec.target;this.detach(i)}this.spec.target=t;const e=H(t)?this.view.getMarkById(t):t;return this.attach(e),this._targetAxis=e,this._gridComponentType=null,this._updateComponentEncoders(),this.commit(),this}tickCount(t){const e=H(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return e&&e.tickCount(t),this.setFunctionSpec(t,"tickCount")}inside(t){return this.setFunctionSpec(t,"inside")}baseValue(t){return this.setFunctionSpec(t,"baseValue")}addGraphicItem(t,e){const i=S({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},t),s=Ct.createGraphicComponent(this._getGridComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,e,s)}_updateComponentEncoders(){const t=Object.assign({update:{}},this.spec.encode),e=Object.keys(t).reduce((i,s)=>{const a=t[s];return a&&(i[s]={callback:(n,o,l)=>{var h,d,c,u;const g=this.spec.skipTheme?null:this.view.getCurrentTheme();let p,_=Ce(a,n,o,l);const v=Yt(this.spec.baseValue,l,n,o);if(this._targetAxis){const b=(h=this._targetAxis.getSpec())===null||h===void 0?void 0:h.scale;p=H(b)?this.view.getScaleById(b):b;const f=this._targetAxis.elements[0];if(f)switch(this._getGridComponentType()){case st.lineAxisGrid:_=Object.assign({x:f.getGraphicAttribute("x"),y:f.getGraphicAttribute("y"),start:f.getGraphicAttribute("start"),end:f.getGraphicAttribute("end"),verticalFactor:(d=f.getGraphicAttribute("verticalFactor"))!==null&&d!==void 0?d:1},_);break;case st.circleAxisGrid:_=Object.assign({x:f.getGraphicAttribute("x"),y:f.getGraphicAttribute("y"),center:f.getGraphicAttribute("center"),radius:f.getGraphicAttribute("radius"),innerRadius:f.getGraphicAttribute("innerRadius"),inside:f.getGraphicAttribute("inside"),startAngle:f.getGraphicAttribute("startAngle"),endAngle:f.getGraphicAttribute("endAngle")},_)}}else{p=H(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;const b=Yt(this.spec.inside,l,n,o),f=(c=p==null?void 0:p.getCoordinate)===null||c===void 0?void 0:c.call(p);f&&(_=Object.assign(Na(p,f,b,v,this.spec.layout,!0),_))}this._getGridComponentType()===st.lineAxisGrid&&(_=this.spec.gridShape!=="line"&&this.spec.gridShape?Object.assign({center:_.start,closed:!0},_,{type:this.spec.gridShape}):Object.assign({},_,{type:"line"}));const m=(u=p==null?void 0:p.getScale)===null||u===void 0?void 0:u.call(p),y=Yt(this.spec.tickCount,l,n,o);switch(this._getGridComponentType()){case st.lineAxisGrid:return yl(m,g,_,y);case st.circleAxisGrid:return fl(m,g,_,y)}return _}}),i},{});this._encoders=e}_getGridComponentType(){var t;if(this._gridComponentType)return this._gridComponentType;if(this.spec.gridType)this.spec.gridType==="circle"?this._gridComponentType=st.circleAxisGrid:this._gridComponentType=st.lineAxisGrid;else if(this._targetAxis)switch(this._targetAxis.getAxisComponentType()){case $t.circleAxis:this._gridComponentType=st.circleAxisGrid;break;case $t.lineAxis:default:this._gridComponentType=st.lineAxisGrid}else if(this.spec.scale){const e=H(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this._gridComponentType=!((t=e==null?void 0:e.getCoordinate)===null||t===void 0)&&t.call(e)?e.getCoordinateAxisPoints()?st.lineAxisGrid:st.circleAxisGrid:st.lineAxisGrid}else this._gridComponentType=st.lineAxisGrid;return this._gridComponentType}}qa.componentType=mt.grid;const Ai=()=>{Ct.registerGraphicComponent(st.lineAxisGrid,(r,t)=>new Va(r,t)),Ct.registerComponent(mt.grid,qa)};function Ja(r){return r.reduce((t,e)=>t+e,0)}function xl(r){return r.length===0?0:Ja(r)/r.length}const Sl={min:Dt,max:Mt,average:xl,sum:Ja};function Al(r,t,e,i){const s=Math.floor(t.length/r),a=[],n=t.length;let o,l,h,d=0,c=0;a[c++]=d;for(let u=1;u<n-1;u+=s){const g=Math.min(u+s,n-1),p=Math.min(u+2*s,n),_=(p+g)/2;let v=0;for(let x=g;x<p;x++){const M=t[x][i];Number.isNaN(M)||(v+=M)}v/=p-g;const m=u,y=Math.min(u+s,n),b=u-1,f=t[d][i];o=-1,h=m;for(let x=m;x<y;x++){const M=t[x][i];Number.isNaN(i)||(l=Math.abs((b-_)*(M-f)-(b-x)*(v-f)),l>o&&(o=l,h=x))}a[c++]=h,d=h}return a[c-1]!==n-1&&(a[c++]=n-1),a.map(u=>e?t[u].i:u)}function ki(r,t,e,i,s){let a=Math.floor(t.length/r);const n=[],o=t.length;let l=0,h=[];n.push(l),t[l][s]=t[l][s];for(let d=1;d<o-1;d+=a){a>o-d&&(a=o-d,h.length=a),h=[];for(let u=0;u<a;u++)h.push(t[d+u][s]);const c=Sl[i](h);l=Math.min(Math.round(d+h.length/2)||0,o-1),t[l][s]=c,n.push(l)}return n.map(d=>e?t[d].i:d)}function kl(r,t,e,i){return ki(r,t,e,"min",i)}function Ml(r,t,e,i){return ki(r,t,e,"max",i)}function Cl(r,t,e,i){return ki(r,t,e,"average",i)}function Tl(r,t,e,i){return ki(r,t,e,"sum",i)}const Ll=(r,t)=>{let e=r.size;const i=r.factor||1;if(Array.isArray(e)&&(e=Math.floor(e[1]-e[0])),e*=i,e<=0)return[];if(t.length<=e)return t;if(r.skipfirst)return t.slice(0,1);const{mode:s,yfield:a,groupBy:n}=r,o=a??"y";let l=Al;if(s==="min"?l=kl:s==="max"?l=Ml:s==="average"?l=Cl:s==="sum"&&(l=Tl),t.length){const h={};if(n){for(let c=0,u=t.length;c<u;c++){const g=t[c],p=g[n];h[p]?h[p].push({[o]:g[o],i:c}):(h[p]=[],h[p].push({[o]:g[o],i:c}))}let d=[];return Object.keys(h).forEach(c=>{const u=h[c];if(u.length<=e){const g=u.map(p=>p.i);d=d.concat(g)}else{const g=l(e,u,!0,o);d=d.concat(g),u.forEach(p=>t[p.i][o]=p[o])}}),d.sort((c,u)=>c-u),d.map(c=>t[c])}return l(e,t,!1,o).map(d=>t[d])}return[]};function Bl(r){return r.forEach(t=>{t.getGraphicAttribute(De)&&(t.setGraphicAttribute("visible",!0),t.setGraphicAttribute(De,!1))}),r}function Pl(r,t,e,i){if(i){let s=-1/0,a=0;const n=C(t);let o=t;r.forEach(l=>{if(l.getGraphicAttribute("visible")===!1)return;const h=l.getGraphicAttribute("size")/2,d=l.getGraphicAttribute("x");n&&(o=(h+a)*e),Math.abs(d-s)<o+a+h?l.getGraphicAttribute("forceShow")||(l.setGraphicAttribute(De,!0),l.setGraphicAttribute("visible",!1)):s=d,a=h})}}function Ol(r,t,e,i){if(i){let s=-1/0,a=0;const n=C(t);let o=t;r.forEach(l=>{if(l.getGraphicAttribute("visible")===!1)return;const h=l.getGraphicAttribute("size")/2,d=l.getGraphicAttribute("y");n&&(o=(h+a)*e),Math.abs(d-s)<o+a+h?l.getGraphicAttribute("forceShow")||(l.setGraphicAttribute(De,!0),l.setGraphicAttribute("visible",!1)):s=d,a=h})}}function Dl(r,t,e,i){if(i){let a=-1/0,n=0,o=0;const l=C(t);let h=t;r.forEach(d=>{if(d.getGraphicAttribute("visible")===!1)return;const c=d.getGraphicAttribute("size")/2,u=d.getGraphicAttribute("x"),g=d.getGraphicAttribute("y");l&&(h=(c+n)*e),o=(-1/0-u)**2+(a-g)**2,o<(h+n+c)**2?d.getGraphicAttribute("forceShow")||(d.setGraphicAttribute(De,!0),d.setGraphicAttribute("visible",!1)):a=g,n=c})}}const El=(r,t)=>{if(!t||t.length===0)return;let{radius:e}=r;C(e)&&t[0].mark.markType==="symbol"&&(e=!0);const{direction:i,delta:s,deltaMul:a=1,groupBy:n}=r,o=l=>{Bl(l);const h=r.sort?l.slice().sort((d,c)=>d.getGraphicAttribute("x")-c.getGraphicAttribute("x")):l;i===0?Dl(h,s,a,e):i===1?Pl(h,s,a,e):Ol(h,s,a,e)};if(n){const l=t.reduce((h,d)=>{const c=d.getDatum()[n];return h[c]?h[c].push(d):h[c]=[d],h},{});Object.keys(l).forEach(h=>{o(l[h])})}else o(t);return t},Il=()=>{Ct.registerTransform("sampling",{transform:Ll,markPhase:"afterEncode"},!0)},wl=()=>{Ct.registerTransform("markoverlap",{transform:El,markPhase:"afterEncode"},!0)},Rl="monotone",zl="linear",Fl="bevel",he={point:{name:"point",type:"symbol"},line:{name:"line",type:"line"}};class Hl{addSamplingCompile(){if(this._spec.sampling){const{width:t,height:e}=this._region.getLayoutRect(),i=[],s=this._fieldY,a=this._fieldX;i.push({type:"sampling",size:this._direction==="horizontal"?e:t,factor:this._spec.samplingFactor,yfield:this._direction==="horizontal"?a[0]:s[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(i)}}addOverlapCompile(){var t;if(this._spec.markOverlap){const e=[];e.push({type:"markoverlap",direction:this._direction==="horizontal"&&this.coordinate==="cartesian"?2:1,delta:this._spec.pointDis,deltaMul:this._spec.pointDisMul,groupBy:this._seriesField}),(t=this._symbolMark)===null||t===void 0||t.getProduct().transform(e)}}reCompileSampling(){this._spec.sampling&&this.compile()}initLineMark(t,e){var i,s;return this._lineMark=this._createMark(he.line,{defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:e==null||e,progressive:t,customShape:(i=this._spec.line)===null||i===void 0?void 0:i.customShape,stateSort:(s=this._spec.line)===null||s===void 0?void 0:s.stateSort}),this._lineMark}initLineMarkStyle(t,e){var i,s;const a=this._lineMark;if(a){if(this.setMarkStyle(a,{stroke:this.getColorAttribute()},"normal",at.Series),this._invalidType!=="zero"&&this.setMarkStyle(a,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",at.Series),this.event.on(R.viewDataStatisticsUpdate,{filter:n=>n.model===this},()=>{this.encodeDefined(a,"defined")}),this.coordinate==="polar")this.setMarkStyle(a,{lineJoin:Fl,curveType:zl,closePath:!0},"normal",at.Series);else{const n=e??((s=(i=this.getSpec().line)===null||i===void 0?void 0:i.style)===null||s===void 0?void 0:s.curveType),o=n===Rl?t==="horizontal"?"monotoneY":"monotoneX":n;this.setMarkStyle(a,{curveType:o},"normal",at.Built_In)}this.setMarkStyle(a,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",at.Series)}return a}_getEventElement(t,e=!1){let i=[];return t.dimensionInfo.some(s=>(s.data.some(a=>a.series===this&&(i=a.datum,!0)),!i.length)),i}_dimensionTrigger(t){const e=this._getEventElement(t);switch(t.action){case"enter":this._symbolActiveMark.getDataView().parse(e),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}}initSymbolMark(t,e){const i=this._spec.point||{};if(i.visible!==!1&&(this._symbolMark=this._createMark(he.point,{morph:Kn(this._spec,he.point.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,progressive:t,isSeriesMark:!!e,customShape:i.customShape,stateSort:i.stateSort})),this._spec.activePoint===!0){const s=new wt(this._option.dataSet,{name:`${qn}_series_${this.id}_active_point`});s.parse([]),this._symbolActiveMark=this._createMark({name:`active_point_${this.id}`,type:"symbol"},{morph:!1,groupKey:this._seriesField,isSeriesMark:!1,dataView:s,parent:this._region.getInteractionMark(),customShape:i.customShape,stateSort:i.stateSort}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark}initSymbolMarkStyle(){const t=this._symbolMark;if(!t)return this._initSymbolActiveMarkAlone(),t;if(this._initSymbolMark(t),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){this._symbolActiveMark.setVisible(!0),this.event.on(us.dimensionHover,this._dimensionTrigger.bind(this));for(const e in this._symbolMark.stateStyle){this._symbolActiveMark.stateStyle[e]={};for(const i in this._symbolMark.stateStyle[e])this._symbolActiveMark.stateStyle[e][i]={style:null,level:at.Series,referer:t}}this._symbolActiveMark.state.changeStateInfo({stateValue:gs.STATE_DIMENSION_HOVER,filter:()=>!0})}return t}_initSymbolMark(t){t&&(this.setMarkStyle(t,{fill:this.getColorAttribute()},"normal",at.Series),this._invalidType!=="zero"&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},"normal",at.Series),this.event.on(R.viewDataStatisticsUpdate,{filter:e=>e.model===this},()=>{this.encodeDefined(t,"visible")}),this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",at.Series))}_initSymbolActiveMarkAlone(){var t,e;const i=this._symbolActiveMark;i&&(this._initSymbolMark(i),i&&(!((e=(t=this._spec[he.point.name])===null||t===void 0?void 0:t.state)===null||e===void 0)&&e.dimension_hover)&&(i.setVisible(!0),this.event.on(us.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(i,ct({},this._spec[he.point.name],{visible:!0})),this._symbolActiveMark.state.changeStateInfo({stateValue:gs.STATE_DIMENSION_HOVER,filter:()=>!0})))}initLabelMarkStyle(t){var e;t&&(((e=t.getTarget())===null||e===void 0?void 0:e.type)!=="symbol"&&t.setRule("line-data"),this.setMarkStyle(t,{fill:this.getColorAttribute(),text:i=>i[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._invalidType!=="zero"&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},"normal",at.Series),this.event.on(R.viewDataStatisticsUpdate,{filter:i=>i.model===this},()=>{this.encodeDefined(t,"visible")}))}initLineLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this.getSeriesField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}encodeDefined(t,e){var i,s,a,n;if(!t)return;const o=this._isFieldAllValid();if(this._invalidType==="zero"||o){if(((s=(i=t.stateStyle.normal)===null||i===void 0?void 0:i[e])===null||s===void 0?void 0:s.style)===!0)return;this.setMarkStyle(t,{[e]:!0},"normal",at.Series)}else{if(((n=(a=t.stateStyle.normal)===null||a===void 0?void 0:a[e])===null||n===void 0?void 0:n.style)!==!0)return;this.setMarkStyle(t,{[e]:this._getInvalidDefined.bind(this)},"normal",at.Series)}t.getProduct()&&t.compileEncode()}_isFieldAllValid(){const t=this.getViewDataStatistics(),e=this.getStackValueField();return!!(t&&t.latestData&&e)&&t.latestData[e]&&t.latestData[e].allValid}}const Vl=Object.assign(Object.assign({},Jn),he);class Qa extends Qn{_transformLabelSpec(t){var e,i,s;((e=t.point)===null||e===void 0?void 0:e.visible)!==!1&&((s=(i=t.point)===null||i===void 0?void 0:i.style)===null||s===void 0?void 0:s.visible)!==!1?this._addMarkLabelSpec(t,"point"):this._addMarkLabelSpec(t,"line"),this._addMarkLabelSpec(t,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)}}function js(r){return r.length===2&&I(r[0])&&I(r[1])&&r[1]>=r[0]}function Ys(r,t){const e=t[1]-t[0],i=t[1]*t[0]<0;let s=t[0]<=0?0-t[0]:0,a=t[1]>0?t[1]-0:0;e===0?t[0]<0?(s=1,a=0):t[0]>0&&(s=0,a=1):(s/=e,a/=e);const n=r.getDomainSpec();return{total:e,negative:s,positive:a,includeZero:i,domain:t,extendable_min:!I(n.min),extendable_max:!I(n.max)}}function Xs(r,t){const{positive:e,negative:i,extendable_min:s,extendable_max:a,domain:n}=r,{positive:o,negative:l,extendable_min:h,extendable_max:d,domain:c}=t;if(o>0){if(!h)return!1;let u=i/e;a&&(u=i/Math.max(e,o),n[1]=-n[0]/u),c[0]=-c[1]*u}else if(l>0){if(!d)return!1;let u=e/i;s&&(u=e/Math.max(i,i),n[0]=-n[1]/u),c[1]=-c[0]*u}return!0}function Gs(r,t){const{extendable_min:e,extendable_max:i,domain:s}=r,{positive:a,negative:n,domain:o}=t;return(a!==0||n!==0)&&!(a>0&&!i)&&!(n>0&&!e)&&(s[0]=o[0],s[1]=o[1],!0)}function Zs(r,t){const{positive:e,negative:i,extendable_max:s,domain:a}=r,{positive:n,negative:o,extendable_min:l,domain:h}=t;if(s&&l){const d=Math.max(i,o)/Math.max(e,n);a[1]=-a[0]/d,h[0]=-h[1]*d}else if(l){const d=i/e;h[0]=-h[1]*d}else{if(!s)return!1;{const d=o/n;a[1]=-a[0]/d}}return!0}function Us(r,t){const{extendable_min:e,domain:i}=r,{extendable_max:s,domain:a}=t;return!(!e||!s)&&(i[0]=-i[1],a[1]=-a[0],!0)}const jl=(r,t)=>{var e,i,s,a,n,o;const l=r.getScale(),h=t.getScale();if(!l||!h)return;const d=(s=(i=(e=r).getDomainAfterSpec)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[0,1],c=(o=(n=(a=t).getDomainAfterSpec)===null||n===void 0?void 0:n.call(a))!==null&&o!==void 0?o:[0,1];if(!(d&&c&&js(d)&&js(c)))return;const u=Ys(r,d),g=Ys(t,c),{positive:p,negative:_,extendable_min:v,extendable_max:m,includeZero:y}=u,{positive:b,negative:f,extendable_min:x,extendable_max:M,includeZero:k}=g;if(p===0&&_===0){if(!Gs(u,g))return}else if(b===0&&f===0){if(!Gs(g,u))return}else if(y||k)if(y&&!k){if(!Xs(u,g))return}else if(k&&!y){if(!Xs(g,u))return}else{if(_===f)return;if(_>f){if(!Zs(u,g))return}else if(!Zs(g,u))return}else{if(_===0&&b===0){if(!Us(u,g))return}else if(f===0&&p===0&&!Us(g,u))return;if(_===0&&f===0)if(d[0]===0&&c[0]>0){if(!x)return;c[0]=0}else{if(!(c[0]===0&&d[0]>0)||!v)return;d[0]=0}if(p===0&&b===0)if(d[1]===0&&c[1]>0){if(!M)return;c[1]=0}else{if(!(c[1]===0&&d[1]>0)||!m)return;d[1]=0}}l.domain(d),h.domain(c)},Yl=(r,t)=>{var e,i,s,a,n;if(!r)return r;const o=(e=t==null?void 0:t.targetAxis)===null||e===void 0?void 0:e.call(t);if(!o)return r;const l=(i=t==null?void 0:t.currentAxis)===null||i===void 0?void 0:i.call(t);if(!l)return r;const h=(s=l.getTickData())===null||s===void 0?void 0:s.getDataView();if(!h||!h.transformsArr.find(y=>y.type.includes("ticks")))return r;const d=l.getScale();if(!d)return r;const c=(n=(a=o.getTickData())===null||a===void 0?void 0:a.getDataView())===null||n===void 0?void 0:n.latestData;if(!(c!=null&&c.length))return r;const u=o.getScale();if(!u)return r;const g=u.domain(),p=g[1]-g[0];if(p===0)return r;const _=d.domain(),v=_[1]-_[0];if(p===0)return r;const m=c.map(y=>{const b=(y.value-g[0])/p;return v*b+_[0]});return Nt(m)};class Re extends tr{constructor(){super(Re.type),this.type="AxisSyncPlugin"}_checkEnableSync(t){if(!nt(t.getScale().type))return!1;const e=t.getSpec().sync;return!!(e!=null&&e.axisId)&&e}_getTargetAxis(t,e){const i=t.getOption().getChart().getComponentByUserId(e.axisId);return i!=null&&i.type.startsWith("cartesianAxis")?i:null}onInit(t,e){const i=this._checkEnableSync(e);if(!i||!i.zeroAlign)return;const s=this._getTargetAxis(e,i);s&&e.event.on(R.scaleDomainUpdate,{filter:({model:a})=>a.id===e.id||a.id===s.id},()=>{jl(s,e)})}onDidCompile(t,e){const i=this._checkEnableSync(e);if(!i)return;const s=this._getTargetAxis(e,i);if(s&&i.tickAlign){ut(e.getOption().dataSet,"tickAlign",Yl);const a={targetAxis:()=>s,currentAxis:()=>e};e.addTransformToTickData({type:"tickAlign",options:a,level:Number.MAX_SAFE_INTEGER},!1)}}}Re.pluginType="component",Re.type="AxisSyncPlugin";const Xl=r=>r;var Gl=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(i=Object.getOwnPropertySymbols(r);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(e[i[s]]=r[i[s]])}return e};class tn extends ye{getOrient(){return this._orient}getScale(){return this._scale}getScales(){return this._scales}getTickData(t=0){return this._tickData[t]}get visible(){return this._visible}getInverse(){return this._inverse}getCoordinateType(){return this._coordinateType}constructor(t,e){var i;super(t,e),this.specKey="axes",this._scales=[],this._tickData=[],this._visible=!0,this._tick=void 0,this._visible=(i=t.visible)===null||i===void 0||i,this._coordinateType="none"}_getNeedClearVRenderComponents(){return[]}getVRenderComponents(){var t,e,i,s;return[(e=(t=this._axisMark)===null||t===void 0?void 0:t.getProduct())===null||e===void 0?void 0:e.getGroupGraphicItem(),(s=(i=this._gridMark)===null||i===void 0?void 0:i.getProduct())===null||s===void 0?void 0:s.getGroupGraphicItem()].filter(A)}created(){var t,e,i,s,a,n,o,l,h,d,c,u,g,p,_,v,m;if(super.created(),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this._shouldComputeTickData()&&this._initData(),this._visible){const y=this._createMark({type:"component",name:`axis-${this.getOrient()}`},{componentType:this.getOrient()==="angle"?"circleAxis":"axis",mode:this._spec.mode,noSeparateStyle:!0,skipTheme:!0});if(this._axisMark=y,y.setZIndex(this.layoutZIndex),A(this._spec.id)&&y.setUserId(this._spec.id),this._marks.addMark(y),(t=this._spec.grid)===null||t===void 0?void 0:t.visible){const b=this._createMark({type:"component",name:`axis-${this.getOrient()}-grid`},{componentType:this.getOrient()==="angle"?st.circleAxisGrid:st.lineAxisGrid,mode:this._spec.mode,noSeparateStyle:!0,skipTheme:!0});b.setZIndex((n=(s=(i=(e=this._spec.grid)===null||e===void 0?void 0:e.style)===null||i===void 0?void 0:i.zIndex)!==null&&s!==void 0?s:(a=this._spec.grid)===null||a===void 0?void 0:a.zIndex)!==null&&n!==void 0?n:bt.Axis_Grid),b.setInteractive(!1),this._marks.addMark(b),this._gridMark=b}if(ze(this._spec.interactive)&&this._marks.forEach(b=>b.setInteractive(this._spec.interactive)),this._option.animation!==!1&&$(this._option.getChart().getSpec(),"animation")!==!1&&this._spec.animation===!0){const b=Bi((o=W.getAnimationInKey("axis"))===null||o===void 0?void 0:o(),{appear:(h=(l=this._spec.animationAppear)!==null&&l!==void 0?l:$(this._option.getChart().getSpec(),"animationAppear.axis"))!==null&&h!==void 0?h:$(this._option.getChart().getSpec(),"animationAppear"),disappear:(c=(d=this._spec.animationDisappear)!==null&&d!==void 0?d:$(this._option.getChart().getSpec(),"animationDisappear.axis"))!==null&&c!==void 0?c:$(this._option.getChart().getSpec(),"animationDisappear"),enter:(g=(u=this._spec.animationEnter)!==null&&u!==void 0?u:$(this._option.getChart().getSpec(),"animationEnter.axis"))!==null&&g!==void 0?g:$(this._option.getChart().getSpec(),"animationEnter"),exit:(_=(p=this._spec.animationExit)!==null&&p!==void 0?p:$(this._option.getChart().getSpec(),"animationExit.axis"))!==null&&_!==void 0?_:$(this._option.getChart().getSpec(),"animationExit"),update:(m=(v=this._spec.animationUpdate)!==null&&v!==void 0?v:$(this._option.getChart().getSpec(),"animationUpdate.axis"))!==null&&m!==void 0?m:$(this._option.getChart().getSpec(),"animationUpdate")});b.enter&&(b.update[0].customParameters={enter:b.enter[0]}),this._marks.forEach(f=>f.setAnimationConfig(b))}}}_shouldComputeTickData(){return this.getVisible()||this._spec.forceInitTick}_initData(){const t=this._initTickDataSet(this._tickTransformOption());t.target.addListener("change",this._forceLayout.bind(this)),this._tickData=[new Ee(this._option,t)]}collectData(t,e){const i=[];return _t(this._regions,s=>{var a;let n=this.collectSeriesField(t,s);if(n=G(n)?nt(this._scale.type)?n:[n[0]]:[n],t||(this._dataFieldText=s.getFieldAlias(n[0])),n){const o=s.getViewData();if(e)n.forEach(l=>{i.push(s.getRawDataStatisticsByField(l,!1))});else if(o&&o.latestData&&o.latestData.length){const l=(a=s.getViewDataStatistics)===null||a===void 0?void 0:a.call(s);n.forEach(h=>{var d;!((d=l==null?void 0:l.latestData)===null||d===void 0)&&d[h]&&i.push(l.latestData[h])})}}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),i}isSeriesDataEnable(){let t=!0;return _t(this._regions,e=>{var i;G((i=e.getViewDataStatistics())===null||i===void 0?void 0:i.latestData)&&(t=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}setSeriesAndRegionsFromSpec(){const{seriesId:t,seriesIndex:e,regionId:i,regionIndex:s}=this._spec;A(t)&&(this._seriesUserId=T(t)),A(i)&&(this._regionUserId=T(i)),A(e)&&(this._seriesIndex=T(e)),A(s)&&(this._regionIndex=T(s)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map(a=>a.id)}getBindSeriesFilter(){return{userId:this._seriesUserId,specIndex:this._seriesIndex}}initEvent(){this.event.on(R.scaleUpdate,{filter:({model:e})=>(e==null?void 0:e.id)===this.id},this.effect.scaleUpdate.bind(this));const t=er(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}).map(e=>e.getViewDataStatistics()).filter(e=>!!e);t.length>1?this._option.dataSet.multipleDataViewAddListener(t,"change",()=>{this.updateScaleDomain()}):t.length===1&&t[0].target.addListener("change",()=>{this.updateScaleDomain()}),_t(this._regions,e=>{e.event.on(R.rawDataUpdate,{filter:({model:i})=>(i==null?void 0:i.id)===e.id},()=>{this._clearRawDomain()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}updateScaleDomain(){}_clearRawDomain(){}onLayoutEnd(t){this.updateScaleRange(),this.event.emit(R.scaleUpdate,{model:this,value:"range"}),super.onLayoutEnd(t)}computeData(t){!this._tickData||!this._tickData.length||t!=="force"&&te(this._scale.range(),[0,1])||this._tickData.forEach(e=>{e.getDataView().reRunAllTransform(),e.updateData()})}initScales(){this._scales=[this._scale];const t=[];if(_t(this._regions,e=>{const i=e.getGroups();i&&t.push(i)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t.length!==0){const e=Mt(t.map(i=>i.fields.length));for(let i=1;i<e;i++){const s=this._scale.clone();this._scales.push(s)}}}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reMake?i:(i.reRender=!0,(e==null?void 0:e.type)!==(t==null?void 0:t.type)?(i.reMake=!0,i):(i.reMake=["grid","subGrid","tick","subTick","label","domainLine","title"].some(s=>{var a,n;return((a=e==null?void 0:e[s])===null||a===void 0?void 0:a.visible)!==((n=t==null?void 0:t[s])===null||n===void 0?void 0:n.visible)}),i))}_delegateAxisContainerEvent(t){t.listenerCount("*")===0&&t.addEventListener("*",(e,i)=>this._delegateEvent(t,e,i))}_getAxisAttributes(){const t=this._spec,e={orient:this.getOrient(),select:this._option.disableTriggerEvent!==!0&&t.select,hover:this._option.disableTriggerEvent!==!0&&t.hover};if(t.domainLine&&t.domainLine.visible?e.line=ir(t.domainLine):e.line={visible:!1},t.label&&t.label.visible){const i=_a(t.label,["style","formatMethod","state"]);e.label=i,t.label.style&&(e.label.style=O(t.label.style)?(s,a,n,o)=>{var l;const h=t.label.style(s.rawValue,a,s,n,o);return E(ct({},(l=this._theme.label)===null||l===void 0?void 0:l.style,h))}:E(t.label.style)),(t.label.formatMethod||t.label.formatter)&&(e.label.formatMethod=this._getLabelFormatMethod()),t.label.state&&(e.label.state=sr(t.label.state))}else e.label={visible:!1};if(t.tick&&t.tick.visible?(e.tick={visible:t.tick.visible,length:t.tick.tickSize,inside:t.tick.inside,alignWithLabel:t.tick.alignWithLabel,dataFilter:t.tick.dataFilter},t.tick.style&&(e.tick.style=O(t.tick.style)?(i,s,a,n)=>{var o;const l=t.tick.style(i,s,a,n);return E(ct({},(o=this._theme.tick)===null||o===void 0?void 0:o.style,l))}:E(t.tick.style)),t.tick.state&&(e.tick.state=ne(t.tick.state))):e.tick={visible:!1},t.subTick&&t.subTick.visible?(e.subTick={visible:t.subTick.visible,length:t.subTick.tickSize,inside:t.subTick.inside,count:t.subTick.tickCount},t.subTick.style&&(e.subTick.style=O(t.subTick.style)?(i,s,a,n)=>{var o;const l=t.subTick.style(i,s,a,n);return E(ct({},(o=this._theme.subTick)===null||o===void 0?void 0:o.style,l))}:E(t.subTick.style)),t.subTick.state&&(e.subTick.state=ne(t.subTick.state))):e.subTick={visible:!1},t.title&&t.title.visible){const i=t.title,{autoRotate:s,angle:a,style:n={},background:o,state:l,shape:h}=i,d=Gl(i,["autoRotate","angle","style","background","state","shape"]);let c,u=a;t.orient!=="left"&&t.orient!=="right"||s&&C(u)&&(u=t.orient==="left"?-90:90,c=ar[t.orient]),e.title=Object.assign(Object.assign({},d),{autoRotate:!1,angle:u?Vi(u):null,textStyle:ct({},c,E(n)),pickable:n.pickable!==!1,childrenPickable:n.pickable!==!1,state:{}}),h&&h.visible?(e.title.shape=Object.assign(Object.assign({},h),{style:E(h.style)}),h.state&&(e.title.state.shape=ne(h.state))):e.title.shape={visible:!1},o&&o.visible?(e.title.background=Object.assign(Object.assign({},o),{style:E(o.style)}),o.state&&(e.title.state.background=ne(o.state))):e.title.background={visible:!1},l&&(e.title.state.text=ne(l))}else e.title={visible:!1};return t.background&&t.background.visible?(e.panel={visible:!0},t.background.style&&(e.panel.style=E(t.background.style)),t.background.state&&(e.panel.state=ne(t.background.state))):e.panel={visible:!1},e}_getGridAttributes(){const t=this._spec;return{alternateColor:t.grid.alternateColor,alignWithLabel:t.grid.alignWithLabel,style:O(t.grid.style)?()=>(e,i)=>{var s,a;const n=t.grid.style((s=e.datum)===null||s===void 0?void 0:s.rawValue,i,e.datum);return E(ct({},(a=this._theme.grid)===null||a===void 0?void 0:a.style,n))}:E(t.grid.style),subGrid:t.subGrid.visible===!1?{visible:!1}:{type:"line",visible:t.subGrid.visible,alternateColor:t.subGrid.alternateColor,style:E(t.subGrid.style)}}}_getLabelFormatMethod(){const{formatMethod:t,formatter:e}=this._spec.label,{formatFunc:i}=Xi(t,e);return i?(s,a,n)=>i(a.rawValue,a,e):null}_initTickDataSet(t,e=0){ma(this._option.dataSet,"scale",Xl);const i=this.registerTicksTransform();return new wt(this._option.dataSet,{name:`${this.type}_${this.id}_ticks_${e}`}).parse(this._scales[e],{type:"scale"}).transform({type:i,options:t},!1)}_tickTransformOption(){const t=this._tick||{},e=this._spec.label||{},{tickCount:i,forceTickCount:s,tickStep:a,tickMode:n}=t,{style:o,formatMethod:l,minGap:h}=e;return{sampling:this._spec.sampling!==!1,tickCount:i,forceTickCount:s,tickStep:a,tickMode:n,axisOrientType:this._orient,coordinateType:this._coordinateType,labelStyle:o,labelFormatter:l,labelGap:h}}addTransformToTickData(t,e){this._tickData.forEach(i=>{var s;(s=i==null?void 0:i.getDataView())===null||s===void 0||s.transform(t,e)})}dataToPosition(t){return this._scale.scale(t)}}tn.specKey="axes";const Mi=()=>{pa(),W.registerAnimation("axis",()=>({appear:{custom:so},update:{custom:Io},exit:{custom:ao}}))};var $s=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(i=Object.getOwnPropertySymbols(r);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(e[i[s]]=r[i[s]])}return e};const Zl=[Re];class ei extends tn{getOrient(){return this._orient}set autoIndentOnce(t){this._autoIndentOnce=t}getScales(){return this._scales}constructor(t,e){super(t,e),this.type=L.cartesianAxis,this.name=L.cartesianAxis,this._defaultBandPosition=.5,this._defaultBandInnerPadding=.1,this._defaultBandOuterPadding=.3,this.layoutType="region-relative",this.layoutZIndex=bt.Axis,this.layoutLevel=Gi.Axis,this._orient="left",this._autoIndentOnce=!1,this._hasAutoIndent=!1,this._scales=[],this._tick=void 0,this._layoutCache={width:0,height:0,_lastComputeOutBounds:{x1:0,x2:0,y1:0,y2:0}},this._innerOffset={top:0,bottom:0,left:0,right:0},this.effect={scaleUpdate:i=>{this.computeData(i==null?void 0:i.value),_t(this._regions,s=>{const a=this.getOrient();et(a)?s.setXAxisHelper(this.axisHelper()):le(a)?s.setYAxisHelper(this.axisHelper()):zt(a)&&s.setZAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=i=>{let{x:s,y:a}=i;return I(s)&&(s+=+(this._orient==="left")*this.getLayoutRect().width),I(a)&&(a+=+(this._orient==="top")*this.getLayoutRect().height),{x:s,y:a}},this._transformLayoutRect=i=>{if(!this._visible)return i;const s=this._latestBounds.clone().translate(-this.getLayoutStartPoint().x,-this.getLayoutStartPoint().y);switch(this._layout.layoutOrient){case"left":this._layout.layoutRectLevelMap.width===Xe&&(i.width=s.x1<0?-s.x1:0);break;case"right":this._layout.layoutRectLevelMap.width===Xe&&(i.width=s.x2>0?s.x2:0);break;case"top":this._layout.layoutRectLevelMap.height===Xe&&(i.height=s.y1<0?-s.y1:0);break;case"bottom":this._layout.layoutRectLevelMap.height===Xe&&(i.height=s.y2>0?s.y2:0)}return i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),this._layout.setRectInSpec(this._layoutCacheProcessing(i))},this._updateAxisLayout=()=>{const i=this.getLayoutStartPoint(),s=this._getUpdateAttribute(!1),{grid:a}=s,n=$s(s,["grid"]),o=this._axisMark.getProduct(),l=ct({x:i.x,y:i.y},this._axisStyle,n);o.encode(l),this._gridMark&&this._gridMark.getProduct().encode(ct({x:i.x,y:i.y},this._getGridAttributes(),a))},this._fixAxisOnZero=()=>{const{onZero:i,visible:s}=this._spec.domainLine;if(this.visible&&i&&s!==!1){const{onZeroAxisId:a,onZeroAxisIndex:n}=this._spec.domainLine,o=this._option.getComponentsByKey("axes"),l=et(this.getOrient()),h=c=>{var u;return(l?!et(c.getOrient()):et(c.getOrient()))&&nt(c.getScale().type)&&(c.getTickData()?(u=c.getTickData().getLatestData())===null||u===void 0?void 0:u.find(g=>g.value===0):c.getScale().domain()[0]<=0&&c.getScale().domain()[1]>=0)},d=o.filter(c=>h(c));if(d.length){let c;if(A(a))c=d.find(u=>u.id===a);else if(A(n)){const u=o[n];h(u)&&(c=u)}else c=d[0];if(c){const u=this._axisMark.getProduct(),g=c.valueToPosition(0);l?u.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dy:this._orient==="bottom"?-(c.getScale().range()[0]-g):g})}):u.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dx:this._orient==="left"?g:-(c.getScale().range()[1]-g)})})}}}},this._orient=va(t,["z"]),zt(this._orient)&&(this.layoutType="absolute"),this._dataSet=e.dataSet,this._coordinateType="cartesian"}static getSpecInfo(t){const e=t[this.specKey];if(!e)return null;const i=t.direction==="horizontal";if(!G(e)){if(!ps(e))return null;const{axisType:o,componentName:l}=_s(e,i);return e.type=o,[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:l}]}let s=!0;if(e.filter(o=>o.orient==="z")[0]){const o=e.filter(h=>h.orient==="bottom")[0],l=e.filter(h=>le(h.orient))[0];s=e.length===3&&o&&l}let a=e.map((o,l)=>({spec:o,index:l}));s||(a=a.filter(({spec:o})=>o.orient!=="z"));const n=[];return a.forEach(({spec:o,index:l})=>{if(!ps(o))return;const{axisType:h,componentName:d}=_s(o,i);o.type=h,n.push({spec:o,specPath:[this.specKey,l],specInfoPath:["component",this.specKey,l],type:d})}),n}static createComponent(t,e){const{spec:i}=t,s=$s(t,["spec"]),a=W.getComponentInKey(s.type);return a?new a(i,Object.assign(Object.assign({},e),s)):(e.onError(`Component ${s.type} not found`),null)}initLayout(){super.initLayout(),this._layout.autoIndent=this._spec.autoIndent!==!1,this._layout.layoutOrient=this._orient}setLayout3dBox(t){this.layout3dBox=t}updateScaleRange(){let t=!1;const{width:e,height:i}=this.getLayoutRect(),{left:s,right:a,top:n,bottom:o}=this._innerOffset;let l=[];et(this.getOrient())?I(e)&&(l=this._inverse?[e-a,s]:[s,e-a]):zt(this.getOrient())?I(e)&&(l=this._inverse?[e-a,s]:[s,e-a],this._scale.range(l)):I(i)&&(l=this._inverse?[n,i-o]:[i-o,n]);const[h,d]=this._scale.range();return l[0]===h&&l[1]===d||(t=!0,this._scale.range(l)),t}init(t){var e;super.init(t),(e=this.pluginService)===null||e===void 0||e.load(Zl.map(i=>new i)),this.callPlugin(i=>{this.pluginService&&i.onInit&&i.onInit(this.pluginService,this)})}setAttrFromSpec(){var t;if(super.setAttrFromSpec(),this.visible){et(this.getOrient())?ms(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):ms(this._spec.maxWidth)&&(this._spec.maxWidth="30%");const i=this._getAxisAttributes();i.label.formatMethod=this._getLabelFormatMethod(),i.verticalFactor=this.getOrient()==="top"||this.getOrient()==="right"?-1:1,this._axisStyle=i}this._tick=this._spec.tick;const e=(t=this._option.getChart())===null||t===void 0?void 0:t.getSpec();this._inverse=nr(this._spec,(e==null?void 0:e.direction)==="horizontal")}onLayoutStart(t,e,i){if(super.onLayoutStart(t,e,i),!zt(this.getOrient())&&this._spec.innerOffset){const s=this._spec;le(this.getOrient())?["top","bottom"].forEach(a=>{this._innerOffset[a]=qe(s.innerOffset[a],e.height,e)}):["left","right"].forEach(a=>{this._innerOffset[a]=qe(s.innerOffset[a],e.width,e)})}}getSeriesStatisticsField(t){let e;return e=et(this.getOrient())?t.fieldX:zt(this.getOrient())?t.fieldZ:t.fieldY,nt(this._scale.type)?e:[e[0]]}_tickTransformOption(){var t,e,i;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimals:(t=this._tick)===null||t===void 0?void 0:t.noDecimals,labelLastVisible:(e=this._spec.label)===null||e===void 0?void 0:e.lastVisible,labelFlush:(i=this._spec.label)===null||i===void 0?void 0:i.flush})}axisHelper(){return{isContinuous:nt(this._scale.type),dataToPosition:this.dataToPosition.bind(this),getScale:(t=0)=>this._scales[t],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse===!0,getSpec:()=>this._spec}}afterCompile(){var t;const e=(t=this._axisMark)===null||t===void 0?void 0:t.getProduct();e&&e.addEventListener(Ze.AFTER_ELEMENT_ENCODE,()=>{if(this._isLayout===!1&&(et(this.getOrient())?this.callPlugin(i=>{this.pluginService&&i.onDidLayoutHorizontal&&i.onDidLayoutHorizontal(this.pluginService,this)}):this.callPlugin(i=>{this.pluginService&&i.onDidLayoutVertical&&i.onDidLayoutVertical(this.pluginService,this)}),this._delegateAxisContainerEvent(e.getGroupGraphicItem()),this._unitText)){const{x:i,y:s}=this.getLayoutStartPoint(),a=et(this._orient)?{x:Mt(this._scale.range())+i,y:s}:{x:i,y:Dt(this._scale.range())+s};this._unitText.setAttributes(a)}}),this.callPlugin(i=>{this.pluginService&&i.onDidCompile&&i.onDidCompile(this.pluginService,this)})}onRender(t){}changeRegions(t){}update(t){}resize(t){}collectScale(){const t=[];return _t(this._regions,e=>{t.push(this.getOrient()==="left"||this.getOrient()==="right"?e.scaleY:e.scaleX)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}collectSeriesField(t,e){var i,s;let a;return a=t>0?(s=(i=e.getGroups())===null||i===void 0?void 0:i.fields)===null||s===void 0?void 0:s[t]:et(this.getOrient())?e.getSpec().x2Field?[...e.fieldX,e.fieldX2]:e.fieldX:zt(this.getOrient())?e.fieldZ:e.getSpec().y2Field?[...e.fieldY,e.fieldY2]:e.fieldY,a}updateSeriesScale(){const t=this.getOrient();_t(this._regions,e=>{et(t)?(e.setScaleX(this._scale),e.setXAxisHelper(this.axisHelper())):le(t)?(e.setScaleY(this._scale),e.setYAxisHelper(this.axisHelper())):zt(t)&&(e.setScaleZ(this._scale),e.setZAxisHelper(this.axisHelper()))},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getBoundsInRect(t){var e;let i={x1:0,y1:0,x2:0,y2:0};if(!this._visible)return i;this._verticalLimitSize=et(this.getOrient())?t.height:t.width,this.setLayoutRect(t),!this.updateScaleRange()&&G((e=this.getTickData())===null||e===void 0?void 0:e.getLatestData())||this.computeData("range");const s={skipLayout:!1},a=et(this.getOrient());this.pluginService&&(a?this.callPlugin(l=>{l.onWillLayoutHorizontal&&l.onWillLayoutHorizontal(this.pluginService,s,this)}):this.callPlugin(l=>{l.onWillLayoutVertical&&l.onWillLayoutVertical(this.pluginService,s,this)}));const n=this._axisMark.getProduct();let o=!1;if(!s.skipLayout){const l=this._getUpdateAttribute(!0),h=n.getGroupGraphicItem(),d=ct(Object.assign({},this.getLayoutStartPoint()),this._axisStyle,l,{line:{visible:!1}}),c=h.getBoundsWithoutRender(d);o=!0,this._latestBounds=c,isFinite(c.width())&&(i=this._appendAxisUnit(c,a))}return o||(this._latestBounds=n.getBounds()),i}_getTitleLimit(t){var e,i,s,a,n;if(this._spec.title.visible&&C((e=this._spec.title.style)===null||e===void 0?void 0:e.maxLineWidth)){const o=(n=(s=(i=this._axisStyle.title)===null||i===void 0?void 0:i.angle)!==null&&s!==void 0?s:(a=this._spec.title.style)===null||a===void 0?void 0:a.angle)!==null&&n!==void 0?n:0;if(t){const d=this.getLayoutRect().width,c=Math.abs(Math.cos(o));return c<1e-6?1/0:d/c}const l=this.getLayoutRect().height,h=Math.abs(Math.sin(o));return h<1e-6?1/0:l/h}return null}_getUpdateAttribute(t){var e;let i=0,s=0;if(!t){const m=this.getRegions();let{x:y,y:b}=m[0].getLayoutStartPoint(),f=y+m[0].getLayoutRect().width,x=b+m[0].getLayoutRect().height;for(let M=1;M<m.length;M++){const k=m[M],{x:B,y:P}=k.getLayoutStartPoint(),{width:w,height:V}=k.getLayoutRect();y=Math.min(y,B),f=Math.max(f,w+B),b=Math.min(b,P),x=Math.max(x,V+P)}i=Math.abs(x-b),s=Math.abs(f-y)}const{width:a,height:n}=this.getLayoutRect(),o=et(this._orient),l=le(this._orient),h=zt(this._orient);let d={x:0,y:0},c=0,u=0;const g=this.layout3dBox?this.layout3dBox.length:0;if(o?(d={x:a,y:0},c=i,u=a):l&&(d={x:0,y:n},c=s,u=n),h){const m=(e=this.directionStr)!==null&&e!==void 0?e:"r2l",y=this.layout3dBox?this.layout3dBox.width:0;let b=[0,0],f=-Math.PI/2,x=0;m==="l2r"&&(x=this.layout3dBox.length,b=[0,0,0],f=Math.PI/2);const M=this.getLabelItems(a),k={start:{x:0,y:0},end:{x:g,y:0},z:x,alpha:f,anchor3d:b,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(o)},items:M};return t||(k.grid={type:"line",start:{x:0,y:0},end:{x:g,y:0},items:M[0],verticalFactor:this._axisStyle.verticalFactor,depth:y,length:i,z:x,alpha:f,anchor3d:b}),k}let p=o?this.layout.minHeight:this.layout.minWidth;(o&&this._layout.layoutRectLevelMap.height===vs||l&&this._layout.layoutRectLevelMap.width===vs)&&(p=this._verticalLimitSize);const _=this.getLabelItems(u),v={start:{x:0,y:0},end:d,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(o)},items:_,verticalLimitSize:this._verticalLimitSize,verticalMinSize:p};return t||(v.grid={type:"line",start:{x:0,y:0},end:d,items:_[0],verticalFactor:this._axisStyle.verticalFactor,depth:g,length:c}),v}getLabelItems(t){var e;const i=(e=this.getTickData())===null||e===void 0?void 0:e.getLatestData();return i&&i.length?[i.map(s=>{const a=this._getNormalizedValue([s.value],t);return Ie(s.value,a)}).filter(s=>s.value>=0&&s.value<=1)]:[]}initEvent(){super.initEvent(),this.visible&&(this.event.on(R.layoutEnd,this._updateAxisLayout),this.event.on(R.layoutEnd,this._fixAxisOnZero),this.event.on(R.layoutRectUpdate,()=>{this._clearLayoutCache()}))}_getNormalizedValue(t,e){return e===0?0:this.dataToPosition(t)/e}_layoutCacheProcessing(t){return["width","height"].forEach(e=>{t[e]<this._layoutCache[e]?t[e]=this._layoutCache[e]:this._layoutCache[e]=t[e]}),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]}):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]<this._layoutCache._lastComputeOutBounds[e]?this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]:this._layoutCache._lastComputeOutBounds[e]=this.layout.getLastComputeOutBounds()[e]})),t}_clearLayoutCache(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0}}onDataUpdate(){this._clearLayoutCache()}_appendAxisUnit(t,e){var i;if(this._spec.unit&&this._spec.unit.visible){const{text:s,style:a}=this._spec.unit;let n,o;const{x:l,y:h}=this.getLayoutStartPoint();e?(n={x:Mt(this._scale.range())+l,y:h},o={textAlign:"left",textBaseline:"middle"}):(n={x:l,y:Dt(this._scale.range())+h},o={textAlign:this._orient==="left"?"left":"right",textBaseline:"bottom"}),o=Object.assign(Object.assign(Object.assign({},o),a),{x:n.x,y:n.y,text:s}),this._unitText?this._unitText.setAttributes(o):(this._unitText=ba(o),this._unitText.name="axis-unit",(i=this.getContainer())===null||i===void 0||i.add(this._unitText));const d=this._unitText.AABBBounds;e?(t.x2+=d.x2>t.x2?d.x2-t.x2:0,t.y2+=d.y2>t.y2?d.y2-t.y2:0):(t.x1+=d.x1<t.x1?d.x1-t.x1:0,t.y1+=d.y1<t.y1?d.y1-t.y1:0)}return t}_getNeedClearVRenderComponents(){return this._unitText?[this._unitText]:[]}}ei.type=L.cartesianAxis,ei.specKey="axes";const Ul=Math.sqrt(50),$l=Math.sqrt(10),Nl=Math.sqrt(2);class en{constructor(){this._extend={},this.niceLabelFormatter=null}setExtraAttrFromSpec(){A(this._spec.nice)&&(this._nice=this._spec.nice),A(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=bs(this._spec)}transformScaleDomain(){this.setScaleNice()}setLinearScaleNice(){var t;if(!this._nice)return!1;let e=5;const i=this._spec.tick||{};if(I(i.forceTickCount))e=i.forceTickCount;else if(O(i.tickCount)){const n=this._scale.range();let o=Math.abs(n[n.length-1]-n[0]);o===1&&this._option&&(o=et(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),e=i.tickCount({axisLength:o,labelStyle:this._spec.label&&this._spec.label.style})}else e=I(i.tickCount)?i.tickCount:5;this._spec.niceType==="accurateFirst"&&(e=Math.max(5,e));const{min:s,max:a}=(t=this._domain)!==null&&t!==void 0?t:{};return C(s)&&C(a)&&C(this._softMaxValue)&&C(this._softMinValue)?this._scale.nice(e):(A(s)||A(this._softMinValue))&&C(a)&&C(this._softMaxValue)?this._scale.niceMax(e):!(!C(s)||!C(this._softMinValue)||!A(a)&&!A(this._softMaxValue))&&this._scale.niceMin(e)}setLogScaleNice(){var t;if(!this._nice)return!1;const{min:e,max:i}=(t=this._domain)!==null&&t!==void 0?t:{};return C(e)&&C(i)&&C(this._softMaxValue)&&C(this._softMinValue)?this._scale.nice():(A(e)||A(this._softMinValue))&&C(i)&&C(this._softMaxValue)?this._scale.niceMax():!(!C(e)||!C(this._softMinValue)||!A(i)&&!A(this._softMaxValue))&&this._scale.niceMin()}setScaleNice(){return this._spec.type==="log"?this.setLogScaleNice():this.setLinearScaleNice()}dataToPosition(t,e){return this.valueToPosition(t[0])}valueToPosition(t){return this._scale.scale(t)}computeLinearDomain(t){const e=[];return t.length?t.forEach(i=>{const{min:s,max:a}=i;e[0]=e[0]===void 0?s:Math.min(e[0],s),e[1]=e[1]===void 0?a:Math.max(e[1],a)}):(e[0]=0,e[1]=0),this.setSoftDomainMinMax(e),this.expandDomain(e),this.includeZero(e),this.setDomainMinMax(e),e}expandDomain(t){if(!this._expand)return;let e=t[0],i=t[t.length-1];e===i&&(i===0?i=1:i>0?e=0:i<0&&(i=0)),A(this._expand.min)&&(t[0]=e-(i-e)*this._expand.min),A(this._expand.max)&&(t[t.length-1]=i+(i-e)*this._expand.max)}niceDomain(t){const{min:e,max:i}=bs(this._spec);if(A(e)||A(i)||this._spec.type!=="linear")return t;if(Math.abs(Dt(t)-Mt(t))<=1e-12){let s=t[0];const a=s>=0?1:-1;if(s=Math.abs(s),s<1)t[0]=0,t[1]=1;else{let n=s/5;const o=Math.floor(Math.log(n)/Math.LN10),l=n/Math.pow(10,o);n=(l>=Ul?10:l>=$l?5:l>=Nl?2:1)*Math.pow(10,o),t[0]=0,t[1]=10*n}a<0&&(t.reverse(),t[0]*=-1,t[1]*=-1)}return t}includeZero(t){this._zero&&(t[0]=Math.min(t[0],0),t[t.length-1]=Math.max(t[t.length-1],0))}setExtendDomain(t,e){if(e===void 0)return void delete this._extend[t];this._extend[t]=e;const i=this._scale.domain();this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this.event.emit(R.scaleUpdate,{model:this,value:"domain"})}extendDomain(t){let e;const i=t.length-1,s=t[0]-t[i]>0,a=s?i:0,n=s?0:i;for(const o in this._extend)e=this._extend[o],e>t[n]&&(t[n]=e),e<t[a]&&(t[a]=e)}getDomainSpec(){return this._domain}setDomainMinMax(t){if(!this._domain)return;const{min:e,max:i}=this._domain;A(e)&&(t[0]=e),A(i)&&(t[1]=i)}setSoftDomainMinMax(t){const{softMin:e,softMax:i}=this._spec;if(A(e)){let s=O(e)?e(t):e;C(s)&&(s=t[0]),s<=t[0]&&(t[0]=s,this._softMinValue=s)}if(A(i)){let s=O(i)?i(t):i;C(s)&&(s=t[1]),s>=t[1]&&(t[1]=s),this._softMaxValue=s}}setZero(t){this._zero!==t&&(this._zero=t,this.updateScaleDomain())}updateScaleDomain(){if(!this.isSeriesDataEnable())return;const t=this.collectData(),e=this.computeLinearDomain(t);this.updateScaleDomainByModel(e)}updateScaleDomainByModel(t){t=t??this._scale.domain(),this.extendDomain(t),this.includeZero(t),this.setDomainMinMax(t),this.niceDomain(t),this._scale.domain(t,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this._updateNiceLabelFormatter(t),this._domainAfterSpec=this._scale.domain(),this.event.emit(R.scaleDomainUpdate,{model:this}),this.event.emit(R.scaleUpdate,{model:this,value:"domain"})}getDomainAfterSpec(){return this._domainAfterSpec}_updateNiceLabelFormatter(t){const e=Math.abs(t[1]-t[0]),i=Math.max(-Math.floor(Math.log10(e)),0)+2,s=Math.pow(10,i);this.niceLabelFormatter=a=>I(+a)?Math.round(+a*s)/s:a}}class Jt extends ei{constructor(){super(...arguments),this.type=L.cartesianLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new ya}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){var t,e;super.initScales();const i=[0,1];A((t=this._domain)===null||t===void 0?void 0:t.min)&&(i[0]=this._domain.min),A((e=this._domain)===null||e===void 0?void 0:e.max)&&(i[1]=this._domain.max),this._scale.domain(i)}computeDomain(t){return this.computeLinearDomain(t)}axisHelper(){const t=super.axisHelper();return t.setExtendDomain=this.setExtendDomain.bind(this),t.valueToPosition=this.valueToPosition.bind(this),t}registerTicksTransform(){const t=`${this.type}-ticks`;return ut(this._option.dataSet,t,$i),t}}Jt.type=L.cartesianLinearAxis,Jt.specKey="axes",It(Jt,en);const sn=()=>{Si(),Ai(),Mi(),W.registerComponent(Jt.type,Jt)};class Wl{constructor(){this._rawDomainIndex=[]}_initData(){var t;if(this._spec.showAllGroupLayers&&this._scales.length>1)for(let e=0;e<this._scales.length;e++){const i=((t=this._spec.layers)!==null&&t!==void 0?t:[])[this._scales.length-1-e]||{};if(i.visible!==!1&&i.tickCount!==0&&i.forceTickCount!==0){const s=this._initTickDataSet(Object.assign(Object.assign({},this._tickTransformOption()),i),e);s.target.addListener("change",this._forceLayout.bind(this));const a=new Ee(this._option,s);this._tickData.push(a),this._tickDataMap||(this._tickDataMap={}),this._tickDataMap[e]=a}}else{const e=this._initTickDataSet(this._tickTransformOption());e.target.addListener("change",this._forceLayout.bind(this));const i=new Ee(this._option,e);this._tickData=[i],this._tickDataMap={0:i}}}dataToPosition(t,e={}){var i,s;if(t.length===0||this._scales.length===0)return 0;const{position:a,bandScale:n}=this.getPosition(t);return a+n.bandwidth()*((s=(i=e.bandPosition)!==null&&i!==void 0?i:this._spec.bandPosition)!==null&&s!==void 0?s:this._defaultBandPosition)}valueToPosition(t){return this._scale.scale(t)}updateGroupScaleRange(){let t=this._scale;this._scales.forEach((e,i)=>{i>0&&(e.range([0,t.bandwidth()]),t=e)})}getPosition(t){let e=0,i=this._scale;if(this._scales.length===1||t.length===1)e=this.valueToPosition(t[0]);else{const s=Math.min(t.length,this._scales.length);for(let a=0;a<s;a++)e+=this._scales[a].scale(t[a]);i=this._scales[s-1]}return{position:e,bandScale:i}}calcScales(t,e){var i,s;const{bandPadding:a,paddingInner:n,paddingOuter:o}=this._spec,l=G(a),h=G(n),d=G(o);for(let c=0;c<this._scales.length;c++){const u=l?a[c]:a,g=h?n[c]:n,p=d?o[c]:o;this._scales[c].paddingInner((i=g??u)!==null&&i!==void 0?i:t,!0).paddingOuter((s=p??u)!==null&&s!==void 0?s:e,!0)}}computeBandDomain(t){if(!t.length)return[];if(t.length===1)return t[0].values;const e=new Set;for(let i=0;i<t.length;i++)for(let s=0;s<t[i].values.length;s++)e.add(t[i].values[s]);return Array.from(e)}updateScaleDomain(){var t;if(!this.isSeriesDataEnable())return;!(!((t=this._rawDomainIndex)===null||t===void 0)&&t.length)&&this._scales.length&&this._updateRawDomain();const e=this._spec.domain;for(let i=0;i<this._scales.length;i++)if(e&&e.length&&i===0)this._scales[i].domain(e);else{const s=this.collectData(i),a=this.computeBandDomain(s);this._scales[i].domain(a.sort((n,o)=>this._rawDomainIndex[i][n]-this._rawDomainIndex[i][o]))}this.transformScaleDomain(),this.event.emit(R.scaleDomainUpdate,{model:this}),this.event.emit(R.scaleUpdate,{model:this,value:"domain"})}getLabelItems(t){const e=[];let i=[];return this._scales.forEach((s,a)=>{var n;const o=this._tickDataMap[a],l=(n=o==null?void 0:o.getLatestData())===null||n===void 0?void 0:n.length,h=l?o.getLatestData().map(d=>d.value):s.domain();if(h&&h.length)if(i&&i.length){const d=[],c=[];i.forEach(u=>{h.forEach(g=>{const p=T(u).concat(g);if(c.push(p),l){const _=Ie(g,this._getNormalizedValue(p,t));d.push(_)}})}),l&&e.push(d.filter(u=>u.value>=0&&u.value<=1)),i=c}else h.forEach(d=>{i.push(d)}),l&&e.push(o.getLatestData().map(d=>Ie(d.value,this._getNormalizedValue([d.value],t))).filter(d=>d.value>=0&&d.value<=1))}),e.reverse()}_updateRawDomain(){this._rawDomainIndex=[];const t=this._spec.domain;for(let e=0;e<this._scales.length;e++)if(t&&t.length&&e===0)this._scales[e].domain(t);else{const i=this.collectData(e,!0),s=this.computeBandDomain(i);this._rawDomainIndex[e]={},s.forEach((a,n)=>this._rawDomainIndex[e][a]=n)}}_clearRawDomain(){this._rawDomainIndex=[]}}class Te extends ei{constructor(){super(...arguments),this.type=L.cartesianBandAxis,this._scale=new fa}computeDomain(t){return this.computeBandDomain(t)}updateScaleRange(){const t=super.updateScaleRange();return this.updateGroupScaleRange(),t}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}axisHelper(){const t=(e=0)=>this._scales[e];return{isContinuous:!1,dataToPosition:this.dataToPosition.bind(this),getScale:t,getBandwidth:(e=0)=>t(e).bandwidth(),getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse,getSpec:()=>this._spec}}registerTicksTransform(){const t=`${this.type}-ticks`;return ut(this._option.dataSet,t,Vo),t}transformScaleDomain(){this.updateFixedWholeLength()}updateFixedWholeLength(){if(this._scale){const{bandSize:t,maxBandSize:e,minBandSize:i}=this._getOuterBandSizeFromSpec();if(t&&this._scale.bandwidth(t),e&&this._scale.maxBandwidth(e),i&&this._scale.minBandwidth(i),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(t||e)){const s=ys(this._scale.domain().length,t??e,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach(a=>a.setMaxWidth(s)):["left","right"].includes(this._orient)&&this._regions.forEach(a=>a.setMaxHeight(s))}}}_getOuterBandSizeFromSpec(){var t;let{bandSize:e,maxBandSize:i,minBandSize:s,bandSizeLevel:a=0}=this._spec;const{gap:n,extend:o=0}=(t=this._spec.bandSizeExtend)!==null&&t!==void 0?t:{};a=Math.min(a,this._scales.length-1);for(let l=a;l>0;l--){const h=this._scales[l],d=h.domain(),c=h.paddingInner(),u=h.paddingOuter(),g=p=>{const _=l===a?o:0;return C(n)||l<a?ys(d.length,p,c,u)+_:(p+(H(n)?p*(Number(n.substring(0,n.length-1))/100):n))*d.length/(this._scales[l-1].paddingInner()+1)+_};A(e)&&(e=g(e)),A(i)&&(i=g(i)),A(s)&&(s=g(s))}return{bandSize:e,maxBandSize:i,minBandSize:s}}}Te.type=L.cartesianBandAxis,Te.specKey="axes",It(Te,Wl);const an=()=>{Si(),Ai(),Mi(),W.registerComponent(Te.type,Te)};class ii extends Jt{constructor(){super(...arguments),this.type=L.cartesianTimeAxis,this._zero=!1,this.effect={scaleUpdate:t=>{this.computeData(t==null?void 0:t.value),_t(this._regions,e=>{et(this.getOrient())?e.setXAxisHelper(this.axisHelper()):e.setYAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._tick=ct({},this._spec.tick,(t=this._spec.layers)===null||t===void 0?void 0:t[0])}_initData(){var t;if(super._initData(),(t=this._spec.layers)===null||t===void 0?void 0:t[1]){const e=new wt(this._option.dataSet,{name:`${this.type}_${this.id}_layer_1_ticks`}).parse(this._scale,{type:"scale"}).transform({type:`${this.type}-ticks`,options:Object.assign(Object.assign({},this._tickTransformOption()),{tickCount:this._spec.layers[1].tickCount,forceTickCount:this._spec.layers[1].forceTickCount,tickStep:this._spec.layers[1].tickStep})},!1);this._layerTickData=new Ee(this._option,e)}}computeData(t){super.computeData(t),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())}_getLabelFormatMethod(){var t,e,i,s,a,n,o,l;const h=rr.getInstance(),d=((e=(t=this._spec.layers)===null||t===void 0?void 0:t[1])===null||e===void 0?void 0:e.timeFormat)||"%Y%m%d",c=(((s=(i=this._spec.layers)===null||i===void 0?void 0:i[1])===null||s===void 0?void 0:s.timeFormatMode)||"local")==="local"?h.timeFormat:h.timeUTCFormat,u=((n=(a=this._spec.layers)===null||a===void 0?void 0:a[0])===null||n===void 0?void 0:n.timeFormat)||"%Y%m%d",g=(((l=(o=this._spec.layers)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.timeFormatMode)||"local")==="local"?h.timeFormat:h.timeUTCFormat;return(p,_,v,m,y)=>{var b;let f;return f=y===0?g(u,p):c(d,p),!((b=this._spec.label)===null||b===void 0)&&b.formatMethod?this._spec.label.formatMethod(f,_):f}}getLabelItems(t){var e,i;const s=[],a=(e=this.getTickData())===null||e===void 0?void 0:e.getLatestData();a&&a.length&&s.push(a.map(o=>Ie(o.value,this._getNormalizedValue([o.value],t))));const n=(i=this._layerTickData)===null||i===void 0?void 0:i.getLatestData();return n&&n.length&&s.push(n.map(o=>Ie(o.value,this._getNormalizedValue([o.value],t)))),s}registerTicksTransform(){const t=`${this.type}-ticks`;return ut(this._option.dataSet,t,$i),t}transformScaleDomain(){}}ii.type=L.cartesianTimeAxis,ii.specKey="axes";const Kl=()=>{Si(),Ai(),Mi(),W.registerComponent(ii.type,ii)};class Le extends Jt{constructor(){super(...arguments),this.type=L.cartesianLogAxis,this._zero=!1,this._scale=new xi}initScales(){var t;super.initScales(),this._scale.base((t=this._spec.base)!==null&&t!==void 0?t:10),this._scale.clamp(!0,null,!1)}registerTicksTransform(){const t=`${this.type}-ticks`;return ut(this._option.dataSet,t,$i),t}transformScaleDomain(){}}Le.type=L.cartesianLogAxis,Le.specKey="axes",It(Le,en);const ql=()=>{Si(),Ai(),Mi(),W.registerComponent(Le.type,Le)};class ue extends cr{constructor(){super(...arguments),this.type=fe.line,this.transformerConstructor=Qa,this._sortDataByAxis=!1}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}initMark(){var t;const e={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},i=(t=this._spec.seriesMark)!==null&&t!==void 0?t:"line";this.initLineMark(e,i==="line"),this.initSymbolMark(e,i==="point")}initTooltip(){super.initTooltip();const{dimension:t,group:e,mark:i}=this._tooltipHelper.activeTriggerSet;this._lineMark&&(t.add(this._lineMark),e.add(this._lineMark)),this._symbolMark&&(i.add(this._symbolMark),e.add(this._symbolMark))}initMarkStyle(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()}initAnimation(){var t,e,i,s;const a={direction:this.direction},n=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;if(this._lineMark.setAnimationConfig(Bi((i=W.getAnimationInKey("line"))===null||i===void 0?void 0:i(a,n),fs("line",this._spec,this._markAttributeContext))),this._symbolMark){const o=ur(this);this._symbolMark.setAnimationConfig(Bi((s=W.getAnimationInKey("scaleInOut"))===null||s===void 0?void 0:s(),fs("point",this._spec,this._markAttributeContext),o))}}onLayoutEnd(t){super.onLayoutEnd(t),this.reCompileSampling()}getSeriesStyle(t){var e;const i=((e=this._spec)===null||e===void 0?void 0:e.seriesMark)!=="point";return s=>{var a,n;return i&&s==="fill"&&(s="stroke"),(n=(a=this._seriesMark)===null||a===void 0?void 0:a.getAttribute(s,t))!==null&&n!==void 0?n:void 0}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._lineMark,this._symbolMark]}}ue.type=fe.line,ue.mark=Vl,ue.transformerConstructor=Qa,It(ue,Hl);const Jl=()=>{Il(),wl(),or(),lr(),hr(),dr(),an(),sn(),W.registerSeries(ue.type,ue)};class Ql extends gr{needAxes(){return!0}_isValidSeries(t){return!this.seriesType||t===this.seriesType}_getDefaultSeriesSpec(t){const e=Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{xField:t.xField,yField:t.yField,zField:t.zField,seriesField:t.seriesField,seriesStyle:t.seriesStyle,direction:t.direction,stack:t.stack,percent:t.percent,stackOffsetSilhouette:t.stackOffsetSilhouette,totalLabel:t.totalLabel,sortDataByAxis:t.sortDataByAxis}),i=this.seriesType;return i&&(e.type=i,e[i]=t[i]),e}transformSpec(t){super.transformSpec(t);const e=this._getDefaultSeriesSpec(t);t.series&&t.series.length!==0?t.series.forEach(i=>{this._isValidSeries(i.type)&&Object.keys(e).forEach(s=>{s in i||(i[s]=e[s])})}):t.series=[e],this._transformAxisSpec(t)}_setDefaultXAxisSpec(t){return{orient:"bottom"}}_setDefaultYAxisSpec(t){return{orient:"left"}}_setDefaultZAxisSpec(t){return{orient:"z"}}_transformAxisSpec(t){if(this.needAxes()){t.axes||(t.axes=[]);const e={x:!1,y:!1,z:!1};t.axes.forEach(i=>{const{orient:s}=i;let a=null;s!=="top"&&s!=="bottom"||(e.x=!0,a=this._setDefaultXAxisSpec(t)),s!=="left"&&s!=="right"||(e.y=!0,a=this._setDefaultYAxisSpec(t)),s==="z"&&(e.z=!0,a=this._setDefaultZAxisSpec(t)),a&&Object.keys(a).forEach(n=>{C(i[n])&&(i[n]=a[n])}),$(i,"trimPadding")&&ct(i,pr(this.type,t))}),e.x||t.axes.push(this._setDefaultXAxisSpec(t)),e.y||t.axes.push(this._setDefaultYAxisSpec(t)),t.zField&&!e.z&&t.axes.push(this._setDefaultZAxisSpec(t))}}}class nn extends Ql{_getDefaultSeriesSpec(t){var e;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(t)),{point:t.point,line:t.line,seriesMark:(e=t.seriesMark)!==null&&e!==void 0?e:"line",activePoint:t.activePoint,sampling:t.sampling,samplingFactor:t.samplingFactor,pointDis:t.pointDis,pointDisMul:t.pointDisMul,markOverlap:t.markOverlap,lineLabel:t.lineLabel})}transformSpec(t){super.transformSpec(t),_r(t)}}const th=(r,t)=>{const e={nodes:{}},{fields:i}=t;if(!(i!=null&&i.length))return e;const s=i.length-1;let a,n,o=e;return r.forEach(l=>{l.latestData.forEach(h=>{o=e;for(let d=0;d<i.length;d++){const c=i[d],u=h[c];if(C(u))break;o.groupField=c,o.nodes[u]||(d===s?o.nodes[u]={values:[]}:(a={nodes:{}},o.nodes[u]=a)),d===s?(n=o.nodes[u],n.values.push(h)):o=o.nodes[u]}})}),e};class eh{constructor(t,e){this.stackRegion=({model:i})=>{var s;const a=i.getSeries();if(!a.some(d=>d.getStack()))return;const n=a.some(d=>{var c,u;return(u=(c=d.getSpec())===null||c===void 0?void 0:c.totalLabel)===null||u===void 0?void 0:u.visible}),o=n||a.some(d=>d.getPercent()),l=a.some(d=>d.getStackOffsetSilhouette()),h=mr(i,!0);for(const d in h)for(const c in h[d].nodes)vr(h[d].nodes[c],i.getStackInverse(),o,n);if(l)for(const d in h)for(const c in h[d].nodes)br(h[d].nodes[c]);n&&i.getSeries().forEach(d=>{const c=d.getStackData(),u=d.getStackValue(),g=d.getStackValueField();c&&g&&yr(h[u],g)}),!((s=this._options)===null||s===void 0)&&s.afterStackRegion&&this._options.afterStackRegion(i,h)},this._chart=t,this._options=e}init(){this._chart.getAllRegions().forEach(t=>{t.event.on(R.regionSeriesDataFilterOver,{filter:({model:e})=>(e==null?void 0:e.id)===t.id},this.stackRegion)})}stackAll(){this._chart.getAllRegions().forEach(t=>{this.stackRegion({model:t})})}}class ih{_beforeInit(){this._dataSet&&ut(this._dataSet,"stackSplit",th)}_initStack(){this._stack=new eh(this),this._stack.init()}}let ge=class extends fr{constructor(){super(...arguments),this.transformerConstructor=nn,this.type="line",this.seriesType=fe.line}};ge.type="line",ge.seriesType=fe.line,ge.transformerConstructor=nn,It(ge,ih);const sh=()=>{Jl(),W.registerChart(ge.type,ge)},oe={debounce:ji,throttle:mi};class ah{constructor(){this._isGestureListener=!1}initZoomable(t,e=Je["desktop-browser"]){this._eventObj=t,this._renderMode=e,this._gestureController=this._option.getChart().getVGrammarView().renderer._gestureController,this._isGestureListener=xa(this._renderMode)||Sa(this._renderMode),Ft(this._renderMode)&&(this._clickEnable=!0,this._zoomableTrigger=new(this._getZoomTriggerEvent("trigger")))}_getZoomTriggerEvent(t){return Ft(this._renderMode)[t]}_zoomEventDispatch(t,e,i){if(!this._isGestureListener&&!t.event)return;const s=this._isGestureListener?t:t.event.clone();this._zoomableTrigger.parserZoomEvent(s);const{zoomDelta:a,zoomX:n,zoomY:o}=s;if(C(a)||!Ti({x:n,y:o},this._getRegionOrSeriesLayout(e)))return;let l={};i&&(l=i({zoomDelta:a,zoomX:n,zoomY:o},s)),this._eventObj.emit("zoom",Object.assign(Object.assign({scale:s.zoomDelta,scaleCenter:{x:s.zoomX,y:s.zoomY}},l),{model:this}))}_getRegionOrSeriesLayout(t){t.type!=="region"&&(t=t.getRegion());const{x:e,y:i,width:s,height:a}=t.layout.getLayout();return{x1:e,y1:i,x2:e+s,y2:i+a}}_bindZoomEventAsRegion(t,e,i,s){var a,n;const o=(a=s==null?void 0:s.delayType)!==null&&a!==void 0?a:"throttle",l=(n=s==null?void 0:s.delayTime)!==null&&n!==void 0?n:0,h=this._isGestureListener?this._gestureController:t,d=this._isGestureListener?[this._getZoomTriggerEvent("zoom")]:[this._getZoomTriggerEvent("zoom"),{level:pt.chart,consume:!0}],c=this._isGestureListener?[this._getZoomTriggerEvent("zoomEnd")]:[this._getZoomTriggerEvent("zoomEnd"),{level:pt.chart,consume:!1}];h.on(...c,oe[o](u=>{this._zoomableTrigger.clearZoom()},l)),h.on(...d,oe[o](u=>{this._zoomEventDispatch(u,e,i)},l))}initZoomEventOfSeries(t,e,i){this._option.disableTriggerEvent||Ft(this._renderMode)&&this._bindZoomEventAsRegion(t.event,t,e,i)}initZoomEventOfRegions(t,e,i,s){this._option.disableTriggerEvent||Ft(this._renderMode)&&t.forEach(a=>{e?a.getSeries().forEach(n=>{e(n)&&this._bindZoomEventAsRegion(n.event,n,i,s)}):this._bindZoomEventAsRegion(this._eventObj,a,i,s)})}_scrollEventDispatch(t,e,i){let s=!1;if(!this._isGestureListener&&(!t.event||this._option.disableTriggerEvent))return s;const a=this._isGestureListener?t:t.event;this._zoomableTrigger.parserScrollEvent(a);const{scrollX:n,scrollY:o,canvasX:l,canvasY:h}=a;return C(n)&&C(o)||Ti({x:l,y:h},this._getRegionOrSeriesLayout(e))&&(i&&(s=i({scrollX:n,scrollY:o},a)),this._eventObj.emit("scroll",{scrollX:n,scrollY:o,model:this})),s}_bindScrollEventAsRegion(t,e,i,s){var a,n;const o=(a=s==null?void 0:s.delayType)!==null&&a!==void 0?a:"throttle",l=(n=s==null?void 0:s.delayTime)!==null&&n!==void 0?n:0,h=this._isGestureListener?this._gestureController:t,d=this._isGestureListener?[this._getZoomTriggerEvent("scroll")]:[this._getZoomTriggerEvent("scroll"),{level:pt.chart,consume:!0}],c=this._isGestureListener?[this._getZoomTriggerEvent("scrollEnd")]:[this._getZoomTriggerEvent("scrollEnd"),{level:pt.chart,consume:!1}];h.on(...c,oe[o](u=>{this._zoomableTrigger.clearScroll()},l)),h.on(...d,oe[o](u=>this._scrollEventDispatch(u,e,i),l))}initScrollEventOfSeries(t,e,i){Ft(this._renderMode)&&this._bindScrollEventAsRegion(t.event,t,e,i)}initScrollEventOfRegions(t,e,i,s){this._option.disableTriggerEvent||Ft(this._renderMode)&&t.forEach(a=>{e?a.getSeries().forEach(n=>{e(n)&&this._bindScrollEventAsRegion(n.event,n,i,s)}):this._bindScrollEventAsRegion(this._eventObj,a,i,s)})}_bindDragEventAsRegion(t,e,i,s){t.on(this._getZoomTriggerEvent("start"),{level:pt.chart},a=>{if(!a.event)return;const{event:n}=a;Ti({x:n.canvasX,y:n.canvasY},this._getRegionOrSeriesLayout(e))&&this._handleDrag(a,i,s)}),t.on("click",{level:pt.chart},()=>!this._clickEnable)}initDragEventOfSeries(t,e,i){this._option.disableTriggerEvent||Ft(this._renderMode)&&t.event.on(this._getZoomTriggerEvent("start"),{level:pt.model,filter:({model:s})=>(s==null?void 0:s.id)===t.id},s=>{this._handleDrag(s,e,i)})}initDragEventOfRegions(t,e,i,s){this._option.disableTriggerEvent||Ft(this._renderMode)&&t.forEach(a=>{e?a.getSeries().forEach(n=>{e(n)&&(n.event.on(this._getZoomTriggerEvent("start"),{level:pt.model,filter:({model:o})=>(o==null?void 0:o.id)===n.id},o=>{this._handleDrag(o,i)}),n.event.on("click",{level:pt.model,filter:({model:o})=>(o==null?void 0:o.id)===n.id},()=>!this._clickEnable))}):this._bindDragEventAsRegion(this._eventObj,a,i,s)})}_handleDrag(t,e,i){var s,a,n;if(this._option.disableTriggerEvent||(this._clickEnable=!1,!this._zoomableTrigger.parserDragEvent(t.event)))return;const o=(s=i==null?void 0:i.delayType)!==null&&s!==void 0?s:"throttle",l=(a=i==null?void 0:i.delayTime)!==null&&a!==void 0?a:0,h=(n=i==null?void 0:i.realTime)===null||n===void 0||n,d=this._getZoomTriggerEvent("move"),c=this._getZoomTriggerEvent("end"),u=t.event;let g=u.canvasX,p=u.canvasY,_=u.canvasX,v=u.canvasY;const m=oe[o](b=>{this._clickEnable=!0;const f=b.event,x=[f.canvasX-_,f.canvasY-v];_=f.canvasX,v=f.canvasY,!h&&e&&e(x,b.event),this._eventObj.emit("panend",{delta:x,model:this}),this._zoomableTrigger.pointerId=null,this._eventObj.off(d,{level:pt.chart,source:Vt.chart},y),this._eventObj.off(c,{level:pt.chart,source:Vt.window},m),this._eventObj.allow(c)},l),y=oe[o](b=>{if(!this._zoomableTrigger.parserDragEvent(b.event))return;this._clickEnable=!1,this._eventObj.prevent(c,m);const f=b.event,x=[f.canvasX-g,f.canvasY-p];g=f.canvasX,p=f.canvasY,h&&e&&e(x,b.event),this._eventObj.emit("panmove",{delta:x,model:this})},l);this._eventObj.on(d,{level:pt.chart,source:Vt.chart},y),this._eventObj.on(c,{level:pt.chart,source:Vt.chart},m)}}const Ns={rect:Ws,symbol:on,arc:Ks,point:hh,"line-data":rh,stackLabel:uh,line:qs,area:qs,rect3d:Ws,arc3d:Ks,treemap:gh,venn:ph};function nh(r,t){var e;const{labelSpec:i}=t;i.overlap&&!Yi(i.overlap)&&(i.overlap={});const s=(e=Ns[r])!==null&&e!==void 0?e:Ns.point;return t.series.type===fe.sankey?_h(t):s(t)}function rn(r,t,e,i){var s;const{labelMark:a,series:n}=r,o={text:t[n.getMeasureField()[0]],data:t,textType:(s=r.labelSpec.textType)!==null&&s!==void 0?s:"text"},l=Object.keys(a.stateStyle.normal);for(const h of l){const d=a.getAttribute(h,t);o[h]=d}if(n.type!==fe.sankey){const{formatFunc:h,args:d}=Xi(e,i,o.text,t);h&&(o.text=h(...d,{series:n}))}return o}function Ci(r){return O(r)?t=>r(t.data):r}function on(r){var t,e,i;const{series:s,labelSpec:a}=r,n=s.direction==="horizontal"?"right":"top",o=(t=Ci(a.position))!==null&&t!==void 0?t:n;let l;return l=a.overlap!==!1&&{strategy:(i=(e=a.overlap)===null||e===void 0?void 0:e.strategy)!==null&&i!==void 0?i:oh(),avoidBaseMark:o!=="center"},{position:o,overlap:l}}function rh(r){const t=on(r);return ze(t.overlap)||(t.overlap.avoidBaseMark=!1),t}function oh(){return[{type:"position",position:["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}]}function Ws(r){var t,e,i,s,a,n;const{series:o,labelSpec:l={}}=r,h=(t=Ci(l.position))!==null&&t!==void 0?t:"outside",d=(e=o.direction)!==null&&e!==void 0?e:"vertical",c=o.direction==="horizontal"?(i=o.getXAxisHelper())===null||i===void 0?void 0:i.isInverse():(s=o.getYAxisHelper())===null||s===void 0?void 0:s.isInverse();let u,g=h;H(h)&&h==="outside"&&(g=_=>{const{data:v}=_,m=o.getMeasureField()[0],y=(v==null?void 0:v[m])>=0&&c||(v==null?void 0:v[m])<0&&!c?1:0;return{vertical:["top","bottom"],horizontal:["right","left"]}[d][y]}),u=l.overlap!==!1&&{strategy:(n=(a=l.overlap)===null||a===void 0?void 0:a.strategy)!==null&&n!==void 0?n:lh(o)};let p=!1;return H(h)&&h.includes("inside")&&(p=!0),{position:g,overlap:u,smartInvert:p}}function lh(r){return[{type:"position",position:t=>{var e,i;const{data:s}=t,a=r.getMeasureField()[0];return(r.direction==="horizontal"?!((e=r.getXAxisHelper())===null||e===void 0)&&e.isInverse():!((i=r.getYAxisHelper())===null||i===void 0)&&i.isInverse())?(s==null?void 0:s[a])>=0?r.direction==="horizontal"?["left","inside-left"]:["bottom","inside-bottom"]:r.direction==="horizontal"?["right","inside-right"]:["top","inside-top"]:(s==null?void 0:s[a])>=0?r.direction==="horizontal"?["right","inside-right"]:["top","inside-top"]:r.direction==="horizontal"?["left","inside-left"]:["bottom","inside-bottom"]}}]}function hh(r){const{labelSpec:t}=r;let e;return e=t.overlap!==!1&&{avoidBaseMark:!1},{position:"center",overlap:e}}function Ks(r){var t;const{labelSpec:e}=r,i=(t=Ci(e.position))!==null&&t!==void 0?t:"outside",s=i;let a;return a=e.smartInvert?e.smartInvert:H(i)&&i.includes("inside"),{position:s,smartInvert:a}}function dh(r,t,e,i){return t.direction==="horizontal"?e==="middle"?.5*(t.totalPositionX(r,"end")+t.totalPositionY(r,"start")):e==="max"?t.totalPositionX(r,r.end>=r.start?"end":"start")+i:e==="min"?t.totalPositionX(r,r.end>=r.start?"start":"end")-i:t.totalPositionX(r,"end")+(r.end>=r.start?i:-i):t.totalPositionX(r,"index",.5)}function ch(r,t,e,i){return t.direction==="horizontal"?t.totalPositionY(r,"index",.5):e==="middle"?.5*(t.totalPositionY(r,"end")+t.totalPositionY(r,"start")):e==="max"?t.totalPositionY(r,r.end>=r.start?"end":"start")-i:e==="min"?t.totalPositionY(r,r.end>=r.start?"start":"end")+i:t.totalPositionY(r,"end")+(r.end>=r.start?-i:i)}function uh(r,t,e){const i=r.series,s=r.labelSpec||{},a=i.getTotalData();return{customLayoutFunc:n=>n.map(o=>{const l=s.position||"withChange",h=s.offset||0,d=t?t(o.data):o.data,c=rn(r,d,s.formatMethod);return c.x=dh(d,i,l,h),c.y=ch(d,i,l,h),i.direction==="horizontal"?c.textAlign=l==="middle"?"center":l==="withChange"&&d.end-d.start>=0||l==="max"?"left":"right":c.textBaseline=l==="middle"?l:l==="withChange"&&d.end-d.start>=0||l==="max"?"bottom":"top",e==null||e(o,d,c),ba(Object.assign(Object.assign({},c),{id:o.id}))}),dataFilter:n=>{const o=[];return a.forEach(l=>{const h=n.find(d=>{var c;return l.index===((c=d.data)===null||c===void 0?void 0:c[i.getDimensionField()[0]])});h&&(h.data=l,o.push(h))}),o},overlap:{strategy:[]}}}function gh(r){return{customLayoutFunc:(t,e)=>e,overlap:!1}}function ph(r){return{customLayoutFunc:(t,e)=>e,smartInvert:!0}}function qs(r){var t,e,i,s;const{labelSpec:a,series:n}=r,o=(i=(e=(t=n.getViewDataStatistics)===null||t===void 0?void 0:t.call(n).latestData)===null||e===void 0?void 0:e[n.getSeriesField()])===null||i===void 0?void 0:i.values,l=o?o.map((h,d)=>({[n.getSeriesField()]:h,index:d})):[];return{position:(s=a.position)!==null&&s!==void 0?s:"end",data:l}}function _h(r){var t,e,i;const{series:s,labelSpec:a={}}=r,n=(t=Ci(a.position))!==null&&t!==void 0?t:"outside",o=s.direction;let l,h=n;return H(n)&&(o==="vertical"?h=n==="inside-start"?d=>"inside-left":n==="inside-middle"?d=>"center":n==="inside-end"?d=>"inside-right":d=>"bottom":n==="inside-start"?h=d=>"inside-left":n==="inside-middle"?h=d=>"center":n==="inside-end"?h=d=>"inside-right":n==="outside"&&(h=d=>"right")),l=a.overlap!==!1&&(!H(n)||!n.includes("inside"))&&{strategy:(i=(e=a.overlap)===null||e===void 0?void 0:e.strategy)!==null&&i!==void 0?i:mh(s)},{position:h,overlap:l,smartInvert:!1,offset:0,syncState:!0}}function mh(r){return[{type:"position",position:t=>r.direction==="horizontal"?["right","left"]:["bottom","top"]}]}const Js=12;function vh(r){return r===Je["desktop-browser"]||r===Je["desktop-miniApp"]?{click:"pointertap",hover:"pointermove",hoverOut:"pointerleave",clickOut:"pointerleave"}:xa(r)||Sa(r)?{click:"tap",hover:["pointerdown","pointermove"],hoverOut:"pointerleave",clickOut:"pointerleave"}:null}var Qs;(function(r){r[r.ALL=3]="ALL",r[r.HORIZONTAL=2]="HORIZONTAL",r[r.VERTICAL=1]="VERTICAL"})(Qs||(Qs={}));var ta=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(i=Object.getOwnPropertySymbols(r);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(e[i[s]]=r[i[s]])}return e};const bh={x:["top","bottom"],y:["left","right"],category:["angle"],value:["radius"]};class ln extends ye{get enableRemain(){return this.triggerOff==="none"}constructor(t,e){super(t,e),this.specKey="crosshair",this.layoutType="none",this.gridZIndex=bt.CrossHair_Grid,this.labelZIndex=bt.CrossHair,this.trigger="hover",this._handleIn=i=>{if(!this._option)return;const{x:s,y:a}=this.calculateTriggerPoint(i);this.showDefault=!1,this._layoutCrosshair(s,a);const n=this._getNeedClearVRenderComponents();this._hasActive=n.some(o=>o&&o.attribute.visible!==!1)},this._handleClickInEvent=i=>{if(!this._hasActive||!this._spec.lockAfterClick||this._clickLock)return this._clickLock?(this._clickLock=!1,void this._handleOutEvent()):void(this._onlyLockClick||(this._handleIn(i),ft(this.triggerOff)&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(()=>{this._handleOutEvent()},this.triggerOff))));this._clickLock=!0},this._handleHoverInEvent=mi(i=>{this._clickLock||this._handleIn(i)},10),this._handleOutEvent=()=>{this.enableRemain||this._clickLock||!this._hasActive||(this.clearOutEvent(),this.hide())},this._handleTooltipShow=i=>{const s=i.tooltipData;if(i.isEmptyTooltip||!s||!s.length)return void this._handleTooltipHideOrRelease();if(Yi(this._spec.followTooltip)&&this._spec.followTooltip[i.activeType]===!1)return void this._handleTooltipHideOrRelease();const{x:a,y:n}=this.calculateTriggerPoint(i);this.showDefault=!1,this._layoutCrosshair(a,n,s,i.activeType);const o=this._getNeedClearVRenderComponents();this._hasActive=o.some(l=>l&&l.attribute.visible!==!1)},this._handleTooltipHideOrRelease=()=>{this.clearOutEvent(),this.hide()},this.enable=!0,this.showDefault=!0}_getLimitBounds(){var t,e;if(!this._limitBounds){const{width:i,height:s}=(e=(t=this._option.globalInstance.getChart())===null||t===void 0?void 0:t.getViewRect())!==null&&e!==void 0?e:{width:0,height:0};this._limitBounds={x1:0,y1:0,x2:i,y2:s}}return this._limitBounds}_showDefaultCrosshair(){this.showDefault&&this._showDefaultCrosshairBySpec()}setAttrFromSpec(){super.setAttrFromSpec(),this._parseCrosshairSpec()}created(){super.created(),this._initEvent()}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reMake||te(e,t)||(i.reRender=!0,i.reMake=!0),i}_initEvent(){if(!this._option.disableTriggerEvent)if(this._spec.followTooltip)this._registerTooltipEvent();else{const t=this._getTriggerEvent();t&&t.forEach(e=>{this._registerEvent(e.in,!1,e.click),e.out&&this._registerEvent(e.out,!0)})}}_registerEvent(t,e,i){const s=e?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent,a=e?{level:pt.chart}:{source:Vt.chart};G(t)?t.forEach(n=>{this.event.on(n,a,s)}):this.event.on(t,a,s)}_eventOff(t,e,i){const s=e?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent;G(t)?t.forEach(a=>{this.event.off(a,s)}):this.event.off(t,s)}updateLayoutAttribute(){this._limitBounds=null,this._showDefaultCrosshair()}calculateTriggerPoint(t){const{event:e}=t,i=this._option.getCompiler().getStage().getLayer(void 0),s={x:e.viewX,y:e.viewY};return i.globalTransMatrix.transformPoint({x:e.viewX,y:e.viewY},s),{x:s.x-this.getLayoutStartPoint().x,y:s.y-this.getLayoutStartPoint().y}}_getTriggerEvent(){const{mode:t=Je["desktop-browser"]}=this._option,e=vh(t);if(e){const i=T(this.trigger||"hover"),s=n=>n==="click"?this.triggerOff==="none"?null:e.clickOut:e.hoverOut;this._spec.lockAfterClick&&!i.includes("click")?(i.push("click"),this._onlyLockClick=!0):this._onlyLockClick=!1;const a=[];return i.forEach(n=>{a.push({click:n==="click",in:e[n],out:s(n)})}),a}return null}_registerTooltipEvent(){this.event.on(R.tooltipHide,{source:Vt.chart},this._handleTooltipHideOrRelease),this.event.on(R.tooltipShow,{source:Vt.chart},this._handleTooltipShow),this.event.on(R.tooltipRelease,{source:Vt.chart},this._handleTooltipHideOrRelease)}_getAxisInfoByField(t){var e,i;const s=(i=(e=this._option).getComponentsByKey)===null||i===void 0?void 0:i.call(e,"axes");if(!(s!=null&&s.length))return null;let a=$(this._spec,`${t}Field.bindingAxesIndex`);if(a||(a=[],s.forEach((g,p)=>{bh[t].includes(g.getOrient())&&a.push(p)})),!a.length)return null;const n=new Map;let o=1/0,l=1/0,h=-1/0,d=-1/0;const{x:c,y:u}=this.getLayoutStartPoint();return a.forEach(g=>{o=1/0,l=1/0,h=-1/0,d=-1/0;const p=s.find(_=>_.getSpecIndex()===g);p&&(p.getRegions().forEach(_=>{const{x:v,y:m}=_.getLayoutStartPoint();o=Math.min(o,v-c),l=Math.min(l,m-u),h=Math.max(h,v+_.getLayoutRect().width-c),d=Math.max(d,m+_.getLayoutRect().height-u)}),n.set(g,{x1:o,y1:l,x2:h,y2:d,axis:p}))}),n}changeRegions(t){}onLayoutEnd(t){const e=this._regions[0];this.setLayoutRect(e.getLayoutRect()),this.setLayoutStartPosition(e.getLayoutStartPoint()),super.onLayoutEnd(t)}onRender(t){}_releaseEvent(){this.clearOutEvent();const t=this._getTriggerEvent();t&&t.forEach(e=>{this._eventOff(e.in,!1,e.click),e.out&&this._eventOff(e.out,!0)})}_parseCrosshairSpec(){this._parseFieldInfo();const{trigger:t,triggerOff:e,labelZIndex:i,gridZIndex:s}=this._spec;t&&(this.trigger=t),(e==="none"||ft(e)&&e>0)&&(this.triggerOff=e),i!==void 0&&(this.labelZIndex=i),s!==void 0&&(this.gridZIndex=s)}_parseField(t,e){var i,s,a;const n={},{line:o={},label:l={},visible:h}=t;if(n.visible=h,n.type=o.type||"line",o.visible===!1)n.style={visible:!1};else{const d=o.style||{},{stroke:c,fill:u,lineWidth:g}=d,p=d,{strokeOpacity:_,fillOpacity:v,opacity:m}=p,y=ta(p,["strokeOpacity","fillOpacity","opacity"]),b=n.type==="line";let f=b?_:v;if(ft(m)&&(f=(f??1)*m),n.style=Object.assign({opacity:f,pickable:!1,visible:!0},y),b)n.style.stroke=c||u,n.style.lineWidth=$(o,"width",g||2);else{n.style.fill=u||c,!((a=(s=(i=this._spec[e])===null||i===void 0?void 0:i.line)===null||s===void 0?void 0:s.style)===null||a===void 0)&&a.stroke&&(n.style.stroke=this._spec[e].line.style.stroke);const x=$(o,"width");if(typeof x=="string"){const M=parseInt(x.substring(0,x.length-1),10)/100;n.style.sizePercent=M}else typeof x!="number"&&typeof x!="function"||(n.style.size=x)}}if(l.visible){const d=l.labelBackground||{},c=l.style||{},u=d.style||{},{fill:g="rgba(47, 59, 82, 0.9)",stroke:p,outerBorder:_}=u,v=ta(u,["fill","stroke","outerBorder"]);n.label={visible:!0,formatMethod:l.formatMethod,formatter:l.formatter,minWidth:d.minWidth,maxWidth:d.maxWidth,padding:d.padding,textStyle:Object.assign(Object.assign({fontSize:14,pickable:!1},c),{fill:c.fill||"#fff",stroke:$(c,"stroke")}),panel:(ze(d.visible)?d.visible:d)?Object.assign({visible:!0,pickable:!1,fill:g,stroke:p,outerBorder:Object.assign({stroke:g,distance:0,lineWidth:3},_)},v):{visible:!1},zIndex:this.labelZIndex,childrenPickable:!1,pickable:!1}}else n.label={visible:!1};return n}_filterAxisByPoint(t,e,i){return t&&t.forEach(s=>{const a=s.axis;if(xr(s,e,i)&&t.delete(a.getSpecIndex()),a.type.startsWith("polarAxis")){const n=a.getCenter(),o=a.getInnerRadius(),l=a.getOuterRadius(),h=Oe.distancePP({x:e,y:i},n);(h>l||h<o)&&t.delete(a.getSpecIndex())}}),t}clearOutEvent(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._clickLock&&(this._clickLock=null),this._hasActive&&(this._hasActive=null)}}ln.specKey="crosshair";class si extends ln{static getSpecInfo(t){const e=t[this.specKey];if(C(e))return;if(!G(e))return e.xField&&e.xField.visible!==!1||e.yField&&e.yField.visible!==!1?[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:L.cartesianCrosshair}]:void 0;const i=[];return e.forEach((s,a)=>{(s.xField&&s.xField.visible!==!1||s.yField&&s.yField.visible!==!1)&&i.push({spec:s,specPath:[this.specKey,a],specInfoPath:["component",this.specKey,a],type:L.cartesianCrosshair})}),i}constructor(t,e){super(t,e),this.type=L.cartesianCrosshair,this.name=L.cartesianCrosshair,this._currValueX=new Map,this._currValueY=new Map}_showDefaultCrosshairBySpec(){const{xField:t,yField:e}=this._spec;if(t!=null&&t.visible&&t.defaultSelect){const{axisIndex:i,datum:s}=t.defaultSelect;this._defaultCrosshair(i,s,1)}if(e!=null&&e.visible&&e.defaultSelect){const{axisIndex:i,datum:s}=e.defaultSelect;this._defaultCrosshair(i,s,2)}}_defaultCrosshair(t,e,i){const s=this._option.getComponentsByKey("axes").find(a=>a.getSpecIndex()===t);s&&(i===1?(this._currValueX.clear(),this._currValueX.set(t,{axis:s,value:e})):(this._currValueY.clear(),this._currValueY.set(t,{axis:s,value:e})),this.layoutByValue(i))}_findAllAxisContains(t,e){const i=this._getAxisInfoByField("x"),s=this._getAxisInfoByField("y");return{xAxisMap:this._filterAxisByPoint(i,t,e),yAxisMap:this._filterAxisByPoint(s,t,e)}}_getValueAt(t,e){return t.getScale().invert(e)}clearAxisValue(){this._currValueX.clear(),this._currValueY.clear()}setAxisValue(t,e){et(e.getOrient())?this._currValueX.set(e.getSpecIndex(),{value:t,axis:e}):this._currValueY.set(e.getSpecIndex(),{value:t,axis:e})}_getAllAxisValues(t,e,i,s){let a=!1;return t.forEach(n=>{Qe(n.axis.getScale().type)&&(a?this.enable=!1:a=!0)}),!!this.enable&&(t.forEach((n,o)=>{const l=n.axis;i.set(o,{value:this._getValueAt(l,e-(s?l.getLayoutStartPoint().x-this.getLayoutStartPoint().x:l.getLayoutStartPoint().y-this.getLayoutStartPoint().y)),axis:l})}),!0)}_layoutCrosshair(t,e,i,s){var a;let n=t,o=e;if(i&&i.length){if(s==="dimension"){const d=i[0],c=d.data.findIndex(g=>g.datum.length>0);let u;if(c>-1){const g=d.data[c];u=g.series.dataToPosition(g.datum[0])}(A(d.dimType)?d.dimType==="y":le((a=d==null?void 0:d.axis)===null||a===void 0?void 0:a.getOrient()))?o=u==null?void 0:u.y:n=u==null?void 0:u.x}else if(s==="mark"){const d=i[0],c=d.series.dataToPosition(d.datum[0]);n=c==null?void 0:c.x,o=c==null?void 0:c.y}}const{xAxisMap:l,yAxisMap:h}=this._findAllAxisContains(n,o);if(l&&l.size===0||h&&h.size===0){if(this.enableRemain)return;this.hide()}else this._currValueX.clear(),this._currValueY.clear(),l&&l.size&&this._getAllAxisValues(l,n,this._currValueX,!0),h&&h.size&&this._getAllAxisValues(h,o,this._currValueY,!1),this.layoutByValue(3)}hide(){this._xCrosshair&&this._xCrosshair.hideAll(),this._xTopLabel&&this._xTopLabel.hideAll(),this._xBottomLabel&&this._xBottomLabel.hideAll(),this._yCrosshair&&this._yCrosshair.hideAll(),this._yLeftLabel&&this._yLeftLabel.hideAll(),this._yRightLabel&&this._yRightLabel.hideAll()}layoutByValue(t=3){if(!this.enable)return;const e=Aa(this._regions,"cartesian");if(!e)return;const{x:i,y:s,offsetWidth:a,offsetHeight:n,bandWidth:o,bandHeight:l}=Sr(t,e,this.getLayoutStartPoint(),this._currValueX,this._currValueY,this._xHair,this._yHair,this.enableRemain,this._cacheXCrossHairInfo,this._cacheYCrossHairInfo);this.enableRemain&&(i&&(this._cacheXCrossHairInfo=Object.assign(Object.assign({},i),{_isCache:!0})),s&&(this._cacheYCrossHairInfo=Object.assign(Object.assign({},s),{_isCache:!0}))),i&&this._layoutVertical(i,o,a),s&&this._layoutHorizontal(s,l,n)}_layoutVertical(t,e,i){var s,a;if(t._isCache&&this.enableRemain||!this._xHair)return;const{x:n,topPos:o,height:l,top:h,bottom:d,visible:c}=t;if(c){const u=this._xHair.type,g=Ar(this._xHair,t,e,i);if(this._updateCrosshair("x",u,g),h.visible){const p=Object.assign(Object.assign(Object.assign({x:n+e/2,y:o},h),this._xHair.label),{textStyle:Object.assign(Object.assign({},(s=this._xHair.label)===null||s===void 0?void 0:s.textStyle),{textAlign:"center",textBaseline:"bottom"}),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(this._xTopLabel,p,_=>{_.name="crosshair-x-top-label",this._xTopLabel=_})}else this._xTopLabel&&this._xTopLabel.hideAll();if(d.visible){const p=Object.assign(Object.assign(Object.assign({x:n+e/2,y:o+l},d),this._xHair.label),{textStyle:Object.assign(Object.assign({},(a=this._xHair.label)===null||a===void 0?void 0:a.textStyle),{textAlign:"center",textBaseline:"top"}),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(this._xBottomLabel,p,_=>{_.name="crosshair-x-bottom-label",this._xBottomLabel=_})}else this._xBottomLabel&&this._xBottomLabel.hideAll()}}_layoutHorizontal(t,e,i){var s,a;if(t._isCache&&this.enableRemain||!this._yHair)return;const{leftPos:n,width:o,y:l,left:h,right:d,visible:c}=t;if(c){const u=this._yHair.type,g=kr(this._yHair,t,e,i);if(this._updateCrosshair("y",u,g),h.visible){const p=Object.assign(Object.assign(Object.assign({x:n,y:l+e/2},h),this._yHair.label),{textStyle:Object.assign(Object.assign({},(s=this._yHair.label)===null||s===void 0?void 0:s.textStyle),{textAlign:"right",textBaseline:"middle"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._yLeftLabel,p,_=>{_.name="crosshair-y-left-label",this._yLeftLabel=_})}else this._yLeftLabel&&this._yLeftLabel.hideAll();if(d.visible){const p=Object.assign(Object.assign(Object.assign({x:n+o,y:l+e},d),this._yHair.label),{textStyle:Object.assign(Object.assign({},(a=this._yHair.label)===null||a===void 0?void 0:a.textStyle),{textAlign:"left",textBaseline:"middle"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._yRightLabel,p,_=>{_.name="crosshair-y-right-label",this._yRightLabel=_})}else this._yRightLabel&&this._yRightLabel.hideAll()}}_parseFieldInfo(){const{xField:t,yField:e}=this._spec;t&&t.visible&&(this._xHair=this._parseField(t,"xField")),e&&e.visible&&(this._yHair=this._parseField(e,"yField"))}_updateCrosshair(t,e,i){const s=this.getContainer();let a;if(a=t==="x"?this._xCrosshair:this._yCrosshair,a)a.setAttributes(i);else{const n=t==="x"?this._xHair.style:this._yHair.style;e==="line"?a=new vi(Object.assign(Object.assign({},i),{lineStyle:n,zIndex:this.gridZIndex+1,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1})):e==="rect"&&(a=new bi(Object.assign(Object.assign({},i),{rectStyle:n,zIndex:this.gridZIndex,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1}))),s==null||s.add(a),t==="x"?this._xCrosshair=a:this._yCrosshair=a}}_updateCrosshairLabel(t,e,i){const s=this.getContainer();t?t.setAttributes(e):(i(t=new be(e)),s==null||s.add(t)),Mr(t,this._getLimitBounds())}_getNeedClearVRenderComponents(){return[this._xCrosshair,this._xTopLabel,this._xBottomLabel,this._yCrosshair,this._yLeftLabel,this._yRightLabel]}}si.specKey="crosshair",si.type=L.cartesianCrosshair;const yh=()=>{W.registerComponent(si.type,si)},fh=(r,t)=>{const{getNewDomain:e,isContinuous:i,field:s}=t,a=s(),n=e();if(C(n)||C(a))return r;if(n.length===0)return[];const o={};n.forEach(h=>{o[h]||(o[h]=1)});let l=null;return l=i()?h=>h[a]>=n[0]&&h[a]<=n[1]:h=>o[h[a]+""]||o[h[a]],r.filter(l)},xh=(r,t)=>{const{stateFields:e,valueFields:i,dataCollection:s}=t.input,{stateField:a,valueField:n}=t.output,o={},l=[];return s.forEach((h,d)=>{var c;if(C(e[d]))return;const u=(c=h.getFields())===null||c===void 0?void 0:c[e[d]];u&&u.lockStatisticsByDomain&&u.domain.forEach(g=>{o[g]=0}),h.latestData.forEach(g=>{T(e[d]).forEach(p=>{C(g[p])||(C(o[g[p]])&&(o[g[p]]=0),C(i[d])||(o[g[p]]+=isNaN(parseFloat(g[i[d]]))?1:parseFloat(g[i[d]])))})})}),Object.keys(o).forEach((h,d)=>{const c={[a]:h};n&&(c[n]=o[h]),l.push(c)}),l};class Qi extends ye{get relatedAxisComponent(){return this._relatedAxisComponent}setStartAndEnd(t,e,i=["percent","percent"]){const[s="percent",a="percent"]=i,n=s==="percent"?t:this.dataToStatePoint(t),o=a==="percent"?e:this.dataToStatePoint(e);this._handleChange(n,o,!0)}enableInteraction(){this._activeRoam=!0}disableInteraction(){this._activeRoam=!1}zoomIn(t){this._handleChartZoom({zoomDelta:1.2,zoomX:t==null?void 0:t.x,zoomY:t==null?void 0:t.y})}zoomOut(t){this._handleChartZoom({zoomDelta:.8,zoomX:t==null?void 0:t.x,zoomY:t==null?void 0:t.y})}_handleChange(t,e,i){var s,a;(a=(s=this._spec)===null||s===void 0?void 0:s.zoomLock)!==null&&a!==void 0&&a||e-t!==this._spanCache&&(e-t<this._minSpan||e-t>this._maxSpan)?this._shouldChange=!1:(this._shouldChange=!0,this._spanCache=e-t)}_isReverse(){const t=this._relatedAxisComponent;if(!t)return!1;const e=t.getScale();return e.range()[0]>e.range()[1]&&(!t.getInverse()||this._isHorizontal)}_updateRangeFactor(t){const e=this._relatedAxisComponent.getScale(),i=this._isReverse(),s=i?[1-this._end,1-this._start]:[this._start,this._end];if(i)switch(t){case"startHandler":e.rangeFactorEnd(s[1]);break;case"endHandler":e.rangeFactorStart(s[0]);break;default:e.rangeFactorStart(s[0],!0),e.rangeFactorEnd(s[1])}else switch(t){case"startHandler":e.rangeFactorStart(s[0]);break;case"endHandler":e.rangeFactorEnd(s[1]);break;default:e.rangeFactorEnd(s[1],!0),e.rangeFactorStart(s[0])}const a=e.rangeFactor();a?(this._start=i?1-a[1]:a[0],this._end=i?1-a[0]:a[1]):(this._start=0,this._end=1)}get visible(){return this._visible}constructor(t,e){super(t,e),this.layoutType="none",this._orient="left",this._cacheVisibility=void 0,this._dataUpdating=!1,this._shouldChange=!0,this._stateField="x",this._activeRoam=!0,this._zoomAttr={enable:!0,rate:1,focus:!0},this._dragAttr={enable:!0,rate:1,reverse:!0},this._scrollAttr={enable:!0,rate:1,reverse:!0},this.effect={onZoomChange:i=>{var s,a;const n=this._relatedAxisComponent;if(n&&this._filterMode==="axis"){const o=n.getScale(),l=n.getSpec();this._auto&&this._getAxisBandSize(l)&&this._spec.ignoreBandSize&&(o.bandwidth("auto"),o.maxBandwidth("auto"),o.minBandwidth("auto")),this._updateRangeFactor(i),this._auto&&((a=(s=this._component)===null||s===void 0?void 0:s.setStartAndEnd)===null||a===void 0||a.call(s,this._start,this._end)),n.effect.scaleUpdate()}else _t(this._regions,o=>{var l;(l=o.getViewData())===null||l===void 0||l.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),_t(this._regions,o=>{o.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._visible=!0,this._handleStateChange=(i,s,a)=>{var n,o;return this._startValue=i,this._endValue=s,this._newDomain=this._parseDomainFromState(this._startValue,this._endValue),(o=(n=this.effect).onZoomChange)===null||o===void 0||o.call(n,a),!0},this._handleChartZoom=i=>{var s,a;if(!this._activeRoam)return;const{zoomDelta:n,zoomX:o,zoomY:l}=i,{x:h,y:d}=this._regions[0].getLayoutStartPoint(),{width:c,height:u}=this._regions[0].getLayoutRect(),g=Math.abs(this._start-this._end),p=(a=(s=this._spec.roamZoom)===null||s===void 0?void 0:s.rate)!==null&&a!==void 0?a:1;if(g>=1&&n<1||g<=.01&&n>1)return;const _=this._isHorizontal?o:l,v=g*(n-1)*p;let m=v/2,y=v/2;if(_){const x=this._isHorizontal?h:d,M=this._isHorizontal?c:u;m=Math.abs(x-_)/Math.abs(M-x)*v,y=Math.abs(M-_)/Math.abs(M-x)*v}const b=We(this._start+m,0,1),f=We(this._end-y,0,1);this._handleChange(Math.min(b,f),Math.max(b,f),!0)},this._handleChartScroll=(i,s)=>{var a;if(!this._activeRoam)return!1;const{scrollX:n,scrollY:o}=i;let l=this._isHorizontal?n:o;const h=this._isHorizontal?_e(n/o)>=.5:_e(o/n)>=.5;this._scrollAttr.reverse||(l=-l),h&&this._handleChartMove(l,(a=this._scrollAttr.rate)!==null&&a!==void 0?a:1);const d=this._start!==0&&this._end!==1;return h&&d},this._handleChartDrag=(i,s)=>{var a;if(!this._activeRoam)return;const[n,o]=i;let l=this._isHorizontal?n:o;this._dragAttr.reverse&&(l=-l),this._handleChartMove(l,(a=this._dragAttr.rate)!==null&&a!==void 0?a:1)},this._handleChartMove=(i,s)=>{const a=this._isHorizontal?this.getLayoutRect().width:this.getLayoutRect().height;if(Math.abs(i)>=1e-6){if(i>0&&this._end<1){const n=Math.min(1-this._end,i/a)*s;this._handleChange(this._start+n,this._end+n,!0)}else if(i<0&&this._start>0){const n=Math.max(-this._start,i/a)*s;this._handleChange(this._start+n,this._end+n,!0)}}return!1},this._orient=va(t),this._isHorizontal=Cr(this._orient)==="horizontal"}created(){super.created(),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}_setAxisFromSpec(){if(A(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):A(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),C(this._spec.field)&&!this._relatedAxisComponent){const t=this._option.getComponentsByKey("axes"),e=t.find(i=>i._orient===this._orient);if(e)this._relatedAxisComponent=e;else{const i=t.find(s=>!nt(s.getScale().type));this._relatedAxisComponent=i}}this._relatedAxisComponent&&this._filterMode==="axis"&&(this._relatedAxisComponent.autoIndentOnce=!0)}_setRegionsFromSpec(){var t,e;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();const i=this._relatedAxisComponent?(e=(t=this._relatedAxisComponent).getBindSeriesFilter)===null||e===void 0?void 0:e.call(t):null;if(A(i)&&(A(i.userId)&&(this._seriesUserId=T(i.userId)),A(i.specIndex)&&(this._seriesIndex=T(i.specIndex))),A(this._spec.seriesId)){const s=T(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter(a=>s.includes(a)):this._seriesUserId=s}if(A(this._spec.seriesIndex)){const s=T(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter(a=>s.includes(a)):this._seriesIndex=s}if(A(this._spec.regionIndex)){const s=this._option.getRegionsInIndex(T(this._spec.regionIndex));this._regions=this._regions.filter(a=>s.includes(a))}else if(A(this._spec.regionId)){const s=T(this._spec.regionId);this._regions=s.length?this._regions.filter(a=>s.includes(a.id)):[]}}onDataUpdate(){var t;const e=this._computeDomainOfStateScale(nt(this._stateScale.type));this._stateScale.domain(e,!1),this._handleChange(this._start,this._end,!0),this._spec.auto&&(this._dataUpdating=!0,(t=this.getChart())===null||t===void 0||t.setLayoutTag(!0,null,!1))}_computeDomainOfStateScale(t){if(this._spec.customDomain)return this._spec.customDomain;const e=this._data.getLatestData().map(i=>i[this._stateField]);if(t){const i=e.map(s=>1*s);return e.length?[Dt(i),Mt(i)]:[-1/0,1/0]}return e}_initEvent(){this._initCommonEvent()}_initData(){const t=[],e=[],i=[];if(this._relatedAxisComponent){const n={};_t(this._regions,o=>{var l,h;const d=o.coordinate==="cartesian"?o.getXAxisHelper():o.coordinate==="polar"?o.angleAxisHelper:null,c=o.coordinate==="cartesian"?o.getYAxisHelper():o.coordinate==="polar"?o.radiusAxisHelper:null;if(!d||!c)return;const u=d.getAxisId()===this._relatedAxisComponent.id?d:c.getAxisId()===this._relatedAxisComponent.id?c:this._isHorizontal?d:c,g=u===d?c:d,p=nt(g.getScale(0).type);t.push(o.getRawData());const _=o.getSpec(),v=T(_.xField),m=T(_.yField),y=o.coordinate==="cartesian"?v[0]:(l=_.angleField)!==null&&l!==void 0?l:_.categoryField,b=o.coordinate==="cartesian"?m[0]:(h=_.radiusField)!==null&&h!==void 0?h:_.valueField;if(n[o.id]=o.type==="link"?"from_xField":u===d?y:b,e.push(n[o.id]),this._valueField){const f=o.type==="link"?"from_yField":g===d?y:b;i.push(p?f:null)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._originalStateFields=n}else _t(this._regions,n=>{t.push(n.getRawData()),e.push(this._field),this._valueField&&i.push(this._spec.valueField)},{userId:this._seriesUserId,specIndex:this._seriesIndex});const{dataSet:s}=this._option;ma(s,"dataview",Tr),ut(s,"dataFilterComputeDomain",xh);const a=new wt(s,{name:`${this.type}_${this.id}_data`});a.transform({type:"dataFilterComputeDomain",options:{input:{dataCollection:t,stateFields:e,valueFields:i},output:{stateField:this._stateField,valueField:this._valueField}}},!1),this._data=new Ee(this._option,a),a.reRunAllTransform(),s.multipleDataViewAddListener(t,"change",this._handleDataCollectionChange.bind(this))}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._spec.roamZoom===!0||this._spec.roamZoom?this._zoomAttr=S({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,this._spec.roamDrag===!0||this._spec.roamDrag?this._dragAttr=S({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,this._spec.roamScroll===!0||this._spec.roamScroll?this._scrollAttr=S({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=(t=this._spec.visible)===null||t===void 0||t}_statePointToData(t){const e=this._stateScale,i=e.domain();if(nt(e.type))return this._isReverse()?i[0]+(i[1]-i[0])*(1-t):i[0]+(i[1]-i[0])*t;let s=e.range();this._isReverse()&&(s=s.slice().reverse());const a=s[0]+(s[1]-s[0])*t;return e.invert(a)}dataToStatePoint(t){const e=this._stateScale,i=e.scale(t);let s=e.range();return!this._isHorizontal&&nt(e.type)&&(s=s.slice().reverse()),(i-s[0])/(s[1]-s[0])}_modeCheck(t,e){return t==="start"?e==="percent"&&this._spec.start||e==="value"&&this._spec.startValue:e==="percent"&&this._spec.end||e==="value"&&this._spec.endValue}_setStateFromSpec(){var t,e;let i,s;if(this._auto=!!this._spec.auto,this._spec.rangeMode){const[a,n]=this._spec.rangeMode;this._modeCheck("start",a)&&this._modeCheck("end",n)&&(i=a==="percent"?this._spec.start:this.dataToStatePoint(this._spec.startValue),s=n==="percent"?this._spec.end:this.dataToStatePoint(this._spec.endValue))}else i=this._spec.start?this._spec.start:this._spec.startValue?this.dataToStatePoint(this._spec.startValue):0,s=this._spec.end?this._spec.end:this._spec.endValue?this.dataToStatePoint(this._spec.endValue):1;this._startValue=this._statePointToData(i),this._endValue=this._statePointToData(s),this._start=i,this._end=s,this._minSpan=(t=this._spec.minSpan)!==null&&t!==void 0?t:0,this._maxSpan=(e=this._spec.maxSpan)!==null&&e!==void 0?e:1,nt(this._stateScale.type)&&this._stateScale.domain()[0]!==this._stateScale.domain()[1]&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/(this._stateScale.domain()[1]-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/(this._stateScale.domain()[1]-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),this._relatedAxisComponent&&this._filterMode==="axis"||this._start===0&&this._end===1||(this._newDomain=this._parseDomainFromState(this._startValue,this._endValue))}_parseFieldOfSeries(t){var e;return(e=this._originalStateFields)===null||e===void 0?void 0:e[t.id]}_initStateScale(){const t=[0,1];if(this._relatedAxisComponent){const e=this._relatedAxisComponent.getScale(),i=nt(e.type),s=this._computeDomainOfStateScale(i);if(this._stateScale=e.clone(),i){const a=s.map(n=>1*n);this._stateScale.domain(s.length?[Dt(a),Mt(a)]:[0,1],!0).range(t)}else this._stateScale.domain(s,!0).range(t)}else this._stateScale=new fa,this._stateScale.domain(this._computeDomainOfStateScale(),!0).range(t)}init(t){super.init(t),this._addTransformToSeries(),this._start===0&&this._end===1||this.effect.onZoomChange()}_addTransformToSeries(){this._relatedAxisComponent&&this._filterMode==="axis"||(ut(this._option.dataSet,"dataFilterWithNewDomain",fh),_t(this._regions,t=>{t.addViewDataFilter({type:"dataFilterWithNewDomain",options:{getNewDomain:()=>this._newDomain,field:()=>{var e;return(e=this._field)!==null&&e!==void 0?e:this._parseFieldOfSeries(t)},isContinuous:()=>nt(this._stateScale.type)},level:Lr.dataZoomFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex}))}onRender(t){}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reMake||te(e,t)||(i.reRender=!0,i.reMake=!0),i}reInit(t){super.reInit(t),this._marks.forEach(e=>{e.getMarks().forEach(i=>{this.initMarkStyleWithSpec(i,this._spec[i.name])})})}changeRegions(){}update(t){}resize(t){}_parseDomainFromState(t,e){if(nt(this._stateScale.type))return[Math.min(e,t),Math.max(e,t)];const i=this._stateScale.domain(),s=i.indexOf(t),a=i.indexOf(e);return i.slice(Math.min(s,a),Math.max(s,a)+1)}_initCommonEvent(){var t,e,i,s,a,n,o;const l={delayType:(e=(t=this._spec)===null||t===void 0?void 0:t.delayType)!==null&&e!==void 0?e:"throttle",delayTime:A((i=this._spec)===null||i===void 0?void 0:i.delayType)?(a=(s=this._spec)===null||s===void 0?void 0:s.delayTime)!==null&&a!==void 0?a:30:0,realTime:(o=(n=this._spec)===null||n===void 0?void 0:n.realTime)===null||o===void 0||o};this._zoomAttr.enable&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom,l),this._scrollAttr.enable&&this.initScrollEventOfRegions(this._regions,null,this._handleChartScroll,l),this._dragAttr.enable&&this.initDragEventOfRegions(this._regions,null,this._handleChartDrag,l)}updateLayoutAttribute(){this._visible&&this._createOrUpdateComponent(),super.updateLayoutAttribute()}onLayoutStart(t,e,i){super.onLayoutStart(t,e,i);const s=this._autoUpdate(t),a=this._isHorizontal?"height":"width";this.layout.setLayoutRect({[a]:s?this[`_${a}`]:0},{[a]:at.Built_In}),this._dataUpdating=!1}getBoundsInRect(t){const e={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0};return this._isHorizontal?(e.y2=e.y1+this._height,e.x2=e.x1+t.width):(e.x2=e.x1+this._width,e.y2=e.y1+t.height),e}hide(){var t;(t=this._component)===null||t===void 0||t.hideAll()}show(){var t;(t=this._component)===null||t===void 0||t.showAll()}_getAxisBandSize(t){const e=t==null?void 0:t.bandSize,i=t==null?void 0:t.maxBandSize,s=t==null?void 0:t.minBandSize;if(e||s||i)return{bandSize:e,maxBandSize:i,minBandSize:s}}_autoUpdate(t){var e,i,s,a,n,o;if(!this._auto)return this._cacheVisibility=void 0,!0;const l=this._relatedAxisComponent,h=l==null?void 0:l.getSpec(),d=l==null?void 0:l.getScale(),c=this._getAxisBandSize(h);if(!this._dataUpdating&&Qe(d.type)&&(t==null?void 0:t.height)===((e=this._cacheRect)===null||e===void 0?void 0:e.height)&&(t==null?void 0:t.width)===((i=this._cacheRect)===null||i===void 0?void 0:i.width)&&this._fixedBandSize===(c==null?void 0:c.bandSize))return this._cacheVisibility;let u=!0;if(this._isHorizontal&&(t==null?void 0:t.width)!==((s=this._cacheRect)===null||s===void 0?void 0:s.width)?d.range(l.getInverse()?[t.width,0]:[0,t.width]):(t==null?void 0:t.height)!==((a=this._cacheRect)===null||a===void 0?void 0:a.height)&&d.range(l.getInverse()?[0,t.height]:[t.height,0]),this._cacheRect={width:t==null?void 0:t.width,height:t==null?void 0:t.height},this._fixedBandSize=c==null?void 0:c.bandSize,Qe(d.type)){c&&(this._start||this._end)&&(this.type===L.scrollBar&&(this._start=0,this._end=1),this._updateRangeFactor());const[g,p]=(n=d.rangeFactor())!==null&&n!==void 0?n:[];u=(!C(g)||!C(p))&&!(g===0&&p===1)}else{const[g,p]=(o=d.rangeFactor())!==null&&o!==void 0?o:[this._start,this._end];u=!(g===0&&p===1)}return this.setStartAndEnd(this._start,this._end),u?this.show():this.hide(),this._cacheVisibility=u,u}_getNeedClearVRenderComponents(){return[this._component]}}It(Qi,ah);class hn extends ka{_mergeThemeToSpec(t,e){const i=this._theme;let s=t;if(this._shouldMergeThemeToSpec()){const a=o=>{const l=ct({selectedBackgroundChart:{line:{},area:{}}},this._theme,o),{selectedBackgroundChart:h={}}=o,{line:d,area:c}=h;return d&&d.visible!==!1&&(l.selectedBackgroundChart.line.style=Object.assign(Object.assign({},l.selectedBackgroundChart.line.style),{visible:!0})),c&&c.visible!==!1&&(l.selectedBackgroundChart.area.style=Object.assign(Object.assign({},l.selectedBackgroundChart.area.style),{visible:!0})),l},n=t;s=G(n)?n.map(o=>a(o)):a(n)}return this._adjustPadding(s),{spec:s,theme:i}}}class Be extends Qi{static getSpecInfo(t){const e=t[this.specKey];if(C(e))return;if(!G(e))return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:L.dataZoom}];const i=[];return e.forEach((s,a)=>{i.push({spec:s,specPath:[this.specKey,a],specInfoPath:["component",this.specKey,a],type:L.dataZoom})}),i}constructor(t,e){var i;super(t,e),this.type=L.dataZoom,this.name=L.dataZoom,this.transformerConstructor=hn,this.specKey="dataZoom",this.layoutZIndex=bt.DataZoom,this.layoutLevel=Gi.DataZoom,this.layoutType="region-relative",this._isReverseCache=!1,this._dataToPositionX=s=>{const a=this._orient==="left"?this._middleHandlerSize:0,n=this._isHorizontal?this._startHandlerSize/2:0,o=this._isHorizontal?this._stateScale:this._valueScale,l=this._isHorizontal?this._stateField:this._valueField;return o.scale(s[l])+this.getLayoutStartPoint().x+a+n},this._dataToPositionX2=s=>{const a=this._orient==="left"?this._middleHandlerSize:0,n=this._isHorizontal?this._startHandlerSize/2:0,o=this._isHorizontal?this._stateScale:this._valueScale,l=o.domain()[0];return o.scale(l)+this.getLayoutStartPoint().x+a+n},this._dataToPositionY=s=>{const a=this._isHorizontal?this._middleHandlerSize:0,n=this._isHorizontal?0:this._startHandlerSize/2,o=this._isHorizontal?this._valueScale:this._stateScale,l=this._isHorizontal?this._valueField:this._stateField;return o.scale(s[l])+this.getLayoutStartPoint().y+a+n},this._dataToPositionY2=s=>{const a=this._isHorizontal?this._middleHandlerSize:0,n=this._isHorizontal?0:this._startHandlerSize/2,o=this._isHorizontal?this._valueScale:this._stateScale,l=o.domain()[0];return o.scale(l)+this.getLayoutStartPoint().y+a+n},this._valueField="y",this._filterMode=(i=t.filterMode)!==null&&i!==void 0?i:"filter"}created(){super.created(),this._initValueScale()}setAttrFromSpec(){var t,e,i,s,a,n,o,l,h,d;super.setAttrFromSpec(),ze(this._spec.roam)&&(this._zoomAttr.enable=this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode),this._backgroundSize=(e=(t=this._spec.background)===null||t===void 0?void 0:t.size)!==null&&e!==void 0?e:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),this._width=this._computeWidth(),this._height=this._computeHeight(),C((a=(s=(i=this._spec)===null||i===void 0?void 0:i.startHandler)===null||s===void 0?void 0:s.style)===null||a===void 0?void 0:a.size)&&(this._spec.startHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize),C((l=(o=(n=this._spec)===null||n===void 0?void 0:n.endHandler)===null||o===void 0?void 0:o.style)===null||l===void 0?void 0:l.size)&&(this._spec.endHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize);const c=(h=this._spec.startHandler.style.visible)===null||h===void 0||h,u=(d=this._spec.endHandler.style.visible)===null||d===void 0||d;this._startHandlerSize=c?this._spec.startHandler.style.size:0,this._endHandlerSize=u?this._spec.endHandler.style.size:0}onLayoutEnd(t){this._updateScaleRange(),this._isReverse()&&!this._isReverseCache&&(this._isReverseCache=this._isReverse(),this.effect.onZoomChange()),this._cacheVisibility!==!1&&super.onLayoutEnd(t)}_initValueScale(){const t=this._computeDomainOfValueScale();if(t){const e=new ya;e.domain(t),this._valueScale=e}}_updateScaleRange(){var t,e;const i=this._startHandlerSize+this._endHandlerSize;if(!this._stateScale||!this._valueScale)return;let s;const a=this._isHorizontal?this.getLayoutRect().width-i:this.getLayoutRect().height-i,n=(e=(t=this._relatedAxisComponent)===null||t===void 0?void 0:t.getScale().range())!==null&&e!==void 0?e:[this._startHandlerSize/2,a+this._startHandlerSize/2];this._isHorizontal?(s=this._visible?[this._startHandlerSize/2,this._computeWidth()-i+this._startHandlerSize/2]:n,this._stateScale.range(s),this._valueScale.range([this._computeHeight()-this._middleHandlerSize,0])):this.layoutOrient==="left"?(s=this._visible?[this._startHandlerSize/2,this._computeHeight()-i+this._startHandlerSize/2]:n,this._stateScale.range(s),this._valueScale.range([this._computeWidth()-this._middleHandlerSize,0])):(s=this._visible?[this._startHandlerSize/2,this._computeHeight()-i+this._startHandlerSize/2]:n,this._stateScale.range(s),this._valueScale.range([0,this._computeWidth()-this._middleHandlerSize])),this._component&&this._cacheVisibility!==!1&&this._component.setAttributes({size:{width:this._computeWidth(),height:this._computeHeight()},position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y}})}_computeDomainOfValueScale(){const t=this._data.getLatestData().map(i=>i[this._valueField]),e=t.map(i=>1*i);return t.length?[Dt(e),Mt(e)]:null}_computeMiddleHandlerSize(){var t,e,i,s;let a=0;if(!((e=(t=this._spec)===null||t===void 0?void 0:t.middleHandler)===null||e===void 0)&&e.visible){const n=(i=this._spec.middleHandler.icon.style.size)!==null&&i!==void 0?i:8,o=(s=this._spec.middleHandler.background.size)!==null&&s!==void 0?s:40;a+=Math.max(n,o)}return a}_computeWidth(){return this._visible===!1?0:ft(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:this._backgroundSize+this._middleHandlerSize}_computeHeight(){return this._visible===!1?0:ft(this._spec.height)?this._spec.height:this._isHorizontal?this._backgroundSize+this._middleHandlerSize:this.getLayoutRect().height-(this._startHandlerSize+this._endHandlerSize)/2}_isScaleValid(t){if(!t||!t.domain())return!1;const e=t.domain();return(!nt(t.type)||e[0]!==e[1])&&(!Qe(t.type)||Br(e).length!==1)}_getAttrs(t){var e,i,s,a,n;const o=(e=this._spec)!==null&&e!==void 0?e:{};return Object.assign({zIndex:this.layoutZIndex,start:this._start,end:this._end,position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},orient:this._orient,size:{width:this.getLayoutRect().width,height:this.getLayoutRect().height},showDetail:o.showDetail,brushSelect:(i=o.brushSelect)!==null&&i!==void 0&&i,zoomLock:(s=o.zoomLock)!==null&&s!==void 0&&s,minSpan:this._minSpan,maxSpan:this._maxSpan,delayType:o.delayType,delayTime:A(o.delayType)?(a=o.delayTime)!==null&&a!==void 0?a:30:0,realTime:(n=o.realTime)===null||n===void 0||n,previewData:t&&this._data.getLatestData(),previewPointsX:t&&this._dataToPositionX,previewPointsY:t&&this._dataToPositionY,tolerance:this._spec.tolerance},this._getComponentAttrs(t))}_createOrUpdateComponent(){if(this._visible){const t=this._isHorizontal?this._stateScale:this._valueScale,e=this._isHorizontal?this._valueScale:this._stateScale,i=this._isScaleValid(t)&&this._isScaleValid(e)&&this._spec.showBackgroundChart!==!1,s=this._getAttrs(i);if(this._component)this._component.setAttributes(s);else{const a=this.getContainer();this._component=new ja(s),this._isHorizontal?i&&this._component.setPreviewPointsY1(this._dataToPositionY2):i&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(n=>this._statePointToData(n)),this._component.addEventListener("change",n=>{const{start:o,end:l,tag:h}=n.detail;this._handleChange(o,l,void 0,h)}),a.add(this._component),this._updateScaleRange()}}}_handleChange(t,e,i,s){if(super._handleChange(t,e,i),this._shouldChange){i&&this._component&&this._component.setStartAndEnd(t,e),this._start=t,this._end=e;const a=this._statePointToData(t),n=this._statePointToData(e);(O(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,a,n):this._handleStateChange(a,n,s))&&this.event.emit(R.dataZoomChange,{model:this,value:{filterData:this._filterMode!=="axis",start:t,end:e,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){var t;const e=this._data.getDataView();if(e.reRunAllTransform(),(t=this._component)===null||t===void 0||t.setPreviewData(e.latestData),this._valueScale){const i=this._computeDomainOfValueScale();i&&this._valueScale.domain(i)}}_getComponentAttrs(t){var e,i,s,a,n,o,l,h,d,c,u;const{middleHandler:g={},startText:p={},endText:_={},backgroundChart:v={},selectedBackgroundChart:m={}}=this._spec;return{backgroundStyle:E((e=this._spec.background)===null||e===void 0?void 0:e.style),startHandlerStyle:E((i=this._spec.startHandler)===null||i===void 0?void 0:i.style),middleHandlerStyle:g.visible?{visible:!0,icon:E((s=g.icon)===null||s===void 0?void 0:s.style),background:{size:(a=g.background)===null||a===void 0?void 0:a.size,style:E((n=g.background)===null||n===void 0?void 0:n.style)}}:{visible:!1},endHandlerStyle:E((o=this._spec.endHandler)===null||o===void 0?void 0:o.style),startTextStyle:{padding:p.padding,formatMethod:this._getHandlerTextFormatMethod(p),textStyle:E(p.style)},endTextStyle:{padding:_.padding,formatMethod:this._getHandlerTextFormatMethod(_),textStyle:E(_.style)},selectedBackgroundStyle:E(this._spec.selectedBackground.style),dragMaskStyle:E((l=this._spec.dragMask)===null||l===void 0?void 0:l.style),backgroundChartStyle:t?{line:ct(E((h=v.line)===null||h===void 0?void 0:h.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},E((d=v.area)===null||d===void 0?void 0:d.style))}:{line:{visible:!1},area:{visible:!1}},selectedBackgroundChartStyle:t?{line:ct(E((c=m.line)===null||c===void 0?void 0:c.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},E((u=m.area)===null||u===void 0?void 0:u.style))}:{line:{visible:!1},area:{visible:!1}},disableTriggerEvent:this._option.disableTriggerEvent}}_getHandlerTextFormatMethod(t){const{formatMethod:e,formatter:i}=t,{formatFunc:s}=Xi(e,i);return s?a=>s(a,{label:a},i):void 0}_getNeedClearVRenderComponents(){return[this._component]}clear(){if(this._component){const t=this.getContainer();this._component.removeAllChild(),t&&t.removeChild(this._component),this._component=null}super.clear()}}Be.type=L.dataZoom,Be.transformerConstructor=hn,Be.specKey="dataZoom";const Sh=()=>{W.registerComponent(Be.type,Be)};class ai extends Qi{static getSpecInfo(t){const e=t[this.specKey];if(C(e))return;if(!G(e))return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:L.scrollBar}];const i=[];return e.forEach((s,a)=>{i.push({spec:s,specPath:[this.specKey,a],specInfoPath:["component",this.specKey,a],type:L.scrollBar})}),i}constructor(t,e){var i;super(t,e),this.type=L.scrollBar,this.name=L.scrollBar,this.specKey="scrollBar",this.layoutZIndex=bt.DataZoom,this.layoutLevel=Gi.DataZoom,this.layoutType="region-relative",this._filterMode=(i=t.filterMode)!==null&&i!==void 0?i:"axis"}setAttrFromSpec(){super.setAttrFromSpec(),ze(this._spec.roam)&&(this._zoomAttr.enable=!1,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode)}onLayoutEnd(t){var e,i;this._updateScaleRange(),(i=(e=this.effect).onZoomChange)===null||i===void 0||i.call(e),super.onLayoutEnd(t)}_updateScaleRange(){this._component&&this._component.setAttributes({x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height})}_computeWidth(){return ft(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:Js}_computeHeight(){return ft(this._spec.height)?this._spec.height:this._isHorizontal?Js:this.getLayoutRect().height}_getAttrs(){var t,e,i,s,a,n;return Object.assign({zIndex:this.layoutZIndex,x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height,range:[this._start,this._end],direction:this._isHorizontal?"horizontal":"vertical",delayType:(t=this._spec)===null||t===void 0?void 0:t.delayType,delayTime:A((e=this._spec)===null||e===void 0?void 0:e.delayType)?(s=(i=this._spec)===null||i===void 0?void 0:i.delayTime)!==null&&s!==void 0?s:30:0,realTime:(n=(a=this._spec)===null||a===void 0?void 0:a.realTime)===null||n===void 0||n},this._getComponentAttrs())}_createOrUpdateComponent(){const t=this._getAttrs();if(this._component)this._component.setAttributes(t);else{const e=this.getContainer();this._component=new Pr(t),this._component.addEventListener("scrollDrag",i=>{const s=i.detail.value;this._handleChange(s[0],s[1])}),e.add(this._component)}}_handleChange(t,e,i){super._handleChange(t,e,i);const s=xs(this._start,t)&&xs(this._end,e);if(this._shouldChange&&!s){i&&this._component&&this._component.setAttribute("range",[t,e]),this._start=t,this._end=e;const a=this._statePointToData(t),n=this._statePointToData(e);(O(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,a,n):this._handleStateChange(this._statePointToData(t),this._statePointToData(e)))&&this.event.emit(R.scrollBarChange,{model:this,value:{filterData:this._filterMode!=="axis",start:this._start,end:this._end,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){}_initCommonEvent(){super._initCommonEvent(),this._component&&this._component.on("scrollDrag",t=>{const e=t.detail.value;this._handleChange(e[0],e[1])})}_getComponentAttrs(){const{rail:t,slider:e,innerPadding:i}=this._spec,s={};return C(i)||(s.padding=i),X(t==null?void 0:t.style)||(s.railStyle=E(t.style)),X(e==null?void 0:e.style)||(s.sliderStyle=E(e.style)),s.disableTriggerEvent=this._option.disableTriggerEvent,s}_getNeedClearVRenderComponents(){return[this._component]}}ai.type=L.scrollBar,ai.specKey="scrollBar";const Ah=()=>{W.registerComponent(ai.type,ai)},kh=["sum","average","min","max","variance","standardDeviation","median"];var Mh=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(i=Object.getOwnPropertySymbols(r);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(e[i[s]]=r[i[s]])}return e};function ni(r,t,e){if(!e)return!1;const i=r.map(n=>1*n),s=Dt(i),a=Mt(i);return t<s||t>a}function ea(r,t,e,i,s,a){var n,o;const{relativeSeries:l}=i;let h;return ft(r.x)&&ni(t,r.x,e)&&((o=l==null?void 0:(n=l.getXAxisHelper()).setExtendDomain)===null||o===void 0||o.call(n,"marker_xAxis_extend",r.x)),h=Qt(r.x)?ri(r.x,s)+a.x:l.getXAxisHelper().dataToPosition([r.x])+a.x,h}function ia(r,t,e,i,s,a){var n,o;const{relativeSeries:l}=i;let h;return ft(r.y)&&ni(t,r.y,e)&&((o=(n=l.getYAxisHelper())===null||n===void 0?void 0:n.setExtendDomain)===null||o===void 0||o.call(n,"marker_yAxis_extend",r.y)),h=Qt(r.y)?ri(r.y,s)+a.y:l.getYAxisHelper().dataToPosition([r.y])+a.y,h}function ri(r,t){return Number(r.substring(0,r.length-1))*t/100}function Ae(r){return kh.includes(r)}function oi(r,t,e,i,s){const a=t.getRegion(),n=a.getLayoutStartPoint(),o=e.getRegion(),l=o.getLayoutStartPoint(),h=Math.abs(Math.min(n.x,l.x)-Math.max(n.x+a.getLayoutRect().width,l.x+o.getLayoutRect().width)),d=Math.abs(Math.min(n.y,l.y)-Math.max(n.y+a.getLayoutRect().height,l.y+o.getLayoutRect().height)),c={relativeSeries:i,startRelativeSeries:t,endRelativeSeries:e},u=[],g=r.latestData[0]&&r.latestData[0].latestData?r.latestData[0].latestData:r.latestData,p=i.getXAxisHelper().getScale(0).domain(),_=i.getYAxisHelper().getScale(0).domain();return g.forEach(v=>{const m=A(v.x),y=A(v.y);if(m&&y){const b=ea(v,p,s,c,h,n),f=ia(v,_,s,c,d,n);u.push([{x:b,y:f}])}else if(m){const b=ea(v,p,s,c,h,n),f=Math.max(n.y+a.getLayoutRect().height,l.y+o.getLayoutRect().height),x=Math.min(n.y,l.y);u.push([{x:b,y:f},{x:b,y:x}])}else if(y){const b=Math.min(n.x,l.x),f=ia(v,_,s,c,d,n),x=Math.max(n.x+a.getLayoutRect().width,l.x+o.getLayoutRect().width);u.push([{x:b,y:f},{x,y:f}])}}),u}function ts(r,t,e,i){const s=[],a=r.latestData[0]&&r.latestData[0].latestData?r.latestData[0].latestData:r.latestData,n=G(i);return a.forEach((o,l)=>{var h,d,c,u;const g=o!=null&&o.getRefRelativeSeries?o.getRefRelativeSeries():t,p=g.getRegion(),_=p.getLayoutStartPoint(),{width:v,height:m}=p.getLayoutRect();let y=0,b=0;if(i){const B=n?i[l]:i,P=B.x,w=B.y;P&&(y=Qt(P)?Number(P.substring(0,P.length-1))*v/100:P),w&&(b=Qt(w)?Number(w.substring(0,w.length-1))*m/100:w)}const f=g.getXAxisHelper().getScale(0).domain(),x=g.getYAxisHelper().getScale(0).domain(),M=T(o.x),k=T(o.y);M.length===1&&ft(M[0])&&ni(f,M[0],e)&&((d=(h=g.getXAxisHelper())===null||h===void 0?void 0:h.setExtendDomain)===null||d===void 0||d.call(h,"marker_xAxis_extend",M[0])),k.length===1&&ft(k[0])&&ni(x,k[0],e)&&((u=(c=g.getYAxisHelper())===null||c===void 0?void 0:c.setExtendDomain)===null||u===void 0||u.call(c,"marker_yAxis_extend",k[0])),s.push({x:g.getXAxisHelper().dataToPosition(M)+_.x+y,y:g.getYAxisHelper().dataToPosition(k)+_.y+b})}),s}function sa(r,t,e){let{x:i,y:s}=r;return Qt(i)&&(i=ri(i,t)),Qt(s)&&(s=ri(s,e)),{x:i,y:s}}function es(r,t,e){let i;if(i=O(r)?T(r(t.getData().getLatestData(),t)):T(r),e){const n=t.getRegion(),{x:o,y:l}=n.getLayoutStartPoint(),{width:h,height:d}=n.getLayoutRect();return i.map(c=>{let{x:u,y:g}=sa(c,h,d);return u+=o,g+=l,{x:u,y:g}})}const{width:s,height:a}=t.getOption().getChart().getViewRect();return i.map(n=>sa(n,s,a))}function is(r){let t=1/0,e=-1/0,i=1/0,s=-1/0;return r.forEach(a=>{const n=a.getLayoutStartPoint(),o=a.getLayoutRect();n.x<t&&(t=n.x),n.x+o.width>e&&(e=n.x+o.width),n.y<i&&(i=n.y),n.y+o.height>s&&(s=n.y+o.height)}),{minX:t,maxX:e,minY:i,maxY:s}}function ss(r,t){const{labelBackground:e={},style:i,shape:s}=r,a=Mh(r,["labelBackground","style","shape"]);if(r.visible!==!1){const n=a;return s!=null&&s.visible?n.shape=Object.assign({visible:!0},E(s.style)):n.shape={visible:!1},e.visible!==!1?(n.panel=Object.assign({visible:!0,customShape:e.customShape},jt(E(e.style),t)),A(e.padding)&&(n.padding=da(e.padding))):(n.panel={visible:!1},n.padding=0),i&&(n.textStyle=jt(E(i),t)),n}return{visible:!1}}function Q(r,t){for(const e in r)O(r[e])&&(r[e]=r[e](t));return r}function jt(r,t){return O(r)?r(t):r}function aa(r,t){return O(r)?r(t):r}function na(r,t,e){return A(r)?t==="regionLeft"?e.getLayoutStartPoint().x-r.x:t==="regionRight"?e.getLayoutStartPoint().x+e.getLayoutRect().width-r.x:t==="regionTop"?e.getLayoutStartPoint().y-r.y:t==="regionBottom"?e.getLayoutStartPoint().y+e.getLayoutRect().height-r.y:t:t}function li(r){const t="x"in r,e="y"in r,i="x1"in r,s="y1"in r,a="angle"in r,n="radius"in r,o="angle1"in r,l="radius1"in r;return{doXProcess:t&&!e&&!s,doXYY1Process:t&&e&&s,doYProcess:e&&!t&&!i,doYXX1Process:e&&t&&i,doXYProcess:t&&e&&i&&s,doAngleProcess:a&&!o&&!n&&!l,doRadiusProcess:n&&!l&&!a&&!o,doAngRadRad1Process:a&&!o&&n&&l,doRadAngAng1Process:n&&a&&o&&!l,doRadAngProcess:a&&n&&o&&l,doCoordinatesProcess:"coordinates"in r&&(!("process"in r)||"process"in r&&"xy"in r.process)}}function hi(r){const t="x"in r,e="x1"in r,i="y"in r,s="y1"in r,a="angle"in r,n="radius"in r,o="angle1"in r,l="radius1"in r;return{doXProcess:t&&e&&!i&&!s,doYProcess:i&&s&&!t&&!e,doXYProcess:t&&e&&i&&s,doAngleProcess:a&&o&&!n&&!l,doRadiusProcess:n&&l&&!a&&!o,doRadAngProcess:a&&n&&o&&l,doCoordinatesProcess:"coordinates"in r}}function Ri(r){return{doXYProcess:A(r.x)&&A(r.y),doPolarProcess:A(r.angle)&&A(r.radius),doGeoProcess:A(r.areaName)}}function Ch(r,t,e,i=0){const s=[],a=r.y-t.y,n=r.x-t.x;switch(e){case"top":s.push(r),s.push({x:r.x,y:a>0?r.y-i-Math.abs(a):r.y-i}),s.push({x:t.x,y:a>0?t.y-i:t.y-i-Math.abs(a)}),s.push(t);break;case"bottom":s.push(r),s.push({x:r.x,y:a<0?r.y+i+Math.abs(a):r.y+i}),s.push({x:t.x,y:a<0?t.y+i:t.y+i+Math.abs(a)}),s.push(t);break;case"left":s.push(r),s.push({x:n>0?r.x-i-Math.abs(n):r.x-i,y:r.y}),s.push({x:n>0?t.x-i:t.x-i-Math.abs(n),y:t.y}),s.push(t);break;case"right":s.push(r),s.push({x:n>0?r.x+i:r.x+i+Math.abs(n),y:r.y}),s.push({x:n>0?t.x+i+Math.abs(n):t.x+i,y:t.y}),s.push(t)}return s}function Th(r,t,e,i=0){const s=r.y-t.y,a=r.x-t.x;return e==="bottom"?{dx:a>0?-a/2:Math.abs(a/2),dy:s>0?i:Math.abs(s)+i}:e==="top"?{dx:a>0?-Math.abs(a/2):+Math.abs(a/2),dy:s>0?-(Math.abs(s)+i):-i}:e==="left"?{dx:a>0?-a-i:-i,dy:s>0?-s/2:Math.abs(s/2)}:e==="right"?{dx:a>0?i:Math.abs(a)+i,dy:s>0?-s/2:Math.abs(s/2)}:{}}var Lh=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(i=Object.getOwnPropertySymbols(r);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(e[i[s]]=r[i[s]])}return e};const Bh=(r,t)=>{const e=r[0].latestData;return Dr(e,t.field)},Ph=(r,t)=>{const e=r[0].latestData;return Er(e,t.field)};function Oh(r,t){const e=r[0].latestData;return Ir(e,t.field)}function Dh(r,t){const e=r[0].latestData;return wr(e,t.field)}function Eh(r,t){const e=r[0].latestData;return Rr(e,t.field)}function Ih(r,t){const e=r[0].latestData;return zr(e,t.field)}function wh(r,t){const e=r[0].latestData;return Fr(e,t.field)}function as(r,t){let e;if(t.coordinates){const s=t,{coordinates:a,coordinateType:n,getSeriesByIdOrIndex:o}=s,l=Lh(s,["coordinates","coordinateType","getSeriesByIdOrIndex"]);let h,d;if(O(a)){const c=t.getRelativeSeries();h=a(c.getData().getLatestData(),c)}else h=a;h=T(h),e=h.map(c=>{const u=o(c.refRelativeSeriesId,c.refRelativeSeriesIndex);if(n==="cartesian"){const{xField:g,yField:p}=u.getSpec(),{xFieldDim:_,xFieldIndex:v,yFieldDim:m,yFieldIndex:y}=c;let b=g;A(v)&&(b=T(g)[v]),_&&T(g).includes(_)&&(b=_);let f=p;A(y)&&(f=T(p)[y]),m&&T(p).includes(m)&&(f=m),d=Object.assign({x:void 0,y:void 0},l),H(c[b])&&Ae(c[b])?d.x={field:b,aggrType:c[b]}:d.x=T(b).map(x=>c[x]),H(c[f])&&Ae(c[f])?d.y={field:f,aggrType:c[f]}:d.y=T(f).map(x=>c[x])}else if(n==="polar"){const{valueField:g,categoryField:p}=u.getSpec(),{angleFieldDim:_,angleFieldIndex:v}=c;let m=p;A(v)&&(m=T(p)[v]),_&&T(p).includes(_)&&(m=_);const y=g;d=Object.assign({angle:void 0,radius:void 0},l),H(c[m])&&Ae(c[m])?d.angle={field:m,aggrType:c[m]}:d.angle=T(m).map(b=>c[b]),H(c[y])&&Ae(c[y])?d.radius={field:y,aggrType:c[y]}:d.radius=T(y).map(b=>c[b])}return d.getRefRelativeSeries=()=>u,d})}else e=t;const i=[];return e.forEach(s=>{const a={x:null,y:null,angle:null,radius:null,areaName:null};if(A(s.x)){const n=s.x;G(n)?a.x=n.map(o=>Lt(o,r,s)):a.x=Lt(n,r,s)}if(A(s.y)){const n=s.y;G(n)?a.y=n.map(o=>Lt(o,r,s)):a.y=Lt(n,r,s)}if(A(s.angle)){const n=s.angle;G(n)?a.angle=n.map(o=>Lt(o,r,s)):a.angle=Lt(n,r,s)}if(A(s.radius)){const n=s.radius;G(n)?a.radius=n.map(o=>Lt(o,r,s)):a.radius=Lt(n,r,s)}if(A(s.areaName)){const n=s.areaName;a.areaName=Lt(n,r,s)}s.getRefRelativeSeries&&(a.getRefRelativeSeries=s.getRefRelativeSeries),i.push(a)}),i}const Rh={min:Bh,max:Ph,sum:Oh,average:Dh,variance:Eh,standardDeviation:Ih,median:wh};function Lt(r,t,e){const i=e.getRelativeSeries(),s=e.getStartRelativeSeries(),a=e.getEndRelativeSeries(),n=i.getData().getLatestData(),o=s.getData().getLatestData(),l=a.getData().getLatestData();if(O(r))return r(n,o,l,i,s,a);if(Or(r)){const{aggrType:h,field:d}=r;return Rh[h](t,{field:d})}return r}class ns extends ye{constructor(){super(...arguments),this.layoutType="none",this._layoutOffsetX=0,this._layoutOffsetY=0}getRelativeSeries(){return this._relativeSeries}getMarkerData(){return this._markerData}static _getMarkerCoordinateType(t){return"cartesian"}static getSpecInfo(t){const e=t[this.specKey];if(X(e))return;if(!G(e)&&e.visible!==!1&&this._getMarkerCoordinateType(e)===this.coordinateType)return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:this.type}];const i=[];return T(e).forEach((s,a)=>{s.visible!==!1&&this._getMarkerCoordinateType(s)===this.coordinateType&&i.push({spec:s,specPath:[this.specKey,a],specInfoPath:["component",this.specKey,a],type:this.type})}),i}created(){super.created(),this._bindSeries(),this._initDataView(),this.initEvent()}_getAllRelativeSeries(){return{getRelativeSeries:()=>this._relativeSeries,getStartRelativeSeries:()=>this._startRelativeSeries,getEndRelativeSeries:()=>this._endRelativeSeries}}_getFieldInfoFromSpec(t,e,i){const s={x:"xField",y:"yField",radius:"valueField",angle:"categoryField",areaName:"nameField"};return H(e)&&Ae(e)?{field:i.getSpec()[s[t]],aggrType:e}:e}_processSpecByDims(t){const e=this._relativeSeries,i={};return t.forEach(s=>i[s.dim]=this._getFieldInfoFromSpec(s.dim,s.specValue,e)),Object.assign(Object.assign({},i),this._getAllRelativeSeries())}_processSpecCoo(t){return Object.assign(Object.assign({coordinates:t.coordinates||t.coordinate},this._getAllRelativeSeries()),{getSeriesByIdOrIndex:(e,i)=>this._getSeriesByIdOrIndex(e,i),coordinateType:this.coordinateType})}_getRelativeDataView(){if(this._specifiedDataSeries){let t=[];T(this._specifiedDataSeries).forEach(i=>{t=t.concat(i.getViewData().latestData)});const e=new Hr;return e.registerParser("array",Vr),new wt(e).parse(t,{type:"array"})}return this._relativeSeries.getViewData()}updateLayoutAttribute(){var t,e,i;if((t=this._spec.visible)===null||t===void 0||t){if(!this._markerComponent){const s=this._createMarkerComponent();s.name=(e=this._spec.name)!==null&&e!==void 0?e:this.type,s.id=(i=this._spec.id)!==null&&i!==void 0?i:`${this.type}-${this.id}`,this._markerComponent=s,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",(a,n)=>{this._delegateEvent(this._markerComponent,a,n,null,this.getMarkerData.bind(this))})}this._markerLayout()}super.updateLayoutAttribute()}_getSeriesByIdOrIndex(t,e){var i,s;let a;return a=(i=this._option.getSeriesInUserIdOrIndex(A(t)?[t]:[],[e]))===null||i===void 0?void 0:i[0],a||(a=(s=this._relativeSeries)!==null&&s!==void 0?s:this._getFirstSeries()),a}_bindSeries(){const t=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(t.relativeSeriesId,t.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(t.startRelativeSeriesId,t.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(t.endRelativeSeriesId,t.endRelativeSeriesIndex),t.specifiedDataSeriesIndex&&t.specifiedDataSeriesIndex==="all"||t.specifiedDataSeriesId&&t.specifiedDataSeriesId==="all"?this._specifiedDataSeries=this._option.getAllSeries():(t.specifiedDataSeriesIndex||t.specifiedDataSeriesId)&&(this._specifiedDataSeries=this._getSeriesByIdOrIndex(t.specifiedDataSeriesId,t.specifiedDataSeriesIndex))}initEvent(){this._relativeSeries.coordinate!=="cartesian"&&(this._relativeSeries.event.on("zoom",this._markerLayout.bind(this)),this._relativeSeries.event.on("panmove",this._markerLayout.bind(this)),this._relativeSeries.event.on("scroll",this._markerLayout.bind(this)))}onRender(t){}changeRegions(t){}clear(){super.clear(),this._firstSeries=null}_getFirstSeries(){var t;if(this._firstSeries)return this._firstSeries;const e=Aa(this._regions);return e?(this._firstSeries=e,e):((t=this._option)===null||t===void 0||t.onError("need at least one series"),null)}_getNeedClearVRenderComponents(){return[this._markerComponent]}onLayoutStart(t,e,i){C(this._spec.offsetX)||(this._layoutOffsetX=qe(this._spec.offsetX,e.width,e)),C(this._spec.offsetY)||(this._layoutOffsetY=qe(this._spec.offsetY,e.height,e)),super.onLayoutStart(t,e,i)}_compareSpec(t,e){const i=super._compareSpec(t,e);return te(e,t)||(i.reRender=!0,i.reMake=!0,i.change=!0),i}}function zh(r,t){const e=r[0].latestData;return jr(e,t.fieldX,t.fieldY)}function rs(r,t){if(t&&t.getRelativeSeries){const e=t.getRelativeSeries();if(e){const i=e.getViewData();return i&&i.latestData&&i.latestData.length?r:[]}}return r}class dn extends ns{constructor(){super(...arguments),this.specKey="markLine",this.layoutZIndex=bt.MarkLine}static _getMarkerCoordinateType(t){const{doAngleProcess:e,doRadiusProcess:i,doAngRadRad1Process:s,doRadAngAng1Process:a,doRadAngProcess:n}=li(t);return t.coordinateType==="polar"||e||i||s||a||n?"polar":"cartesian"}_createMarkerComponent(){var t,e,i,s,a,n,o,l,h,d,c,u,g,p,_,v,m,y,b;const{label:f={},startSymbol:x={},endSymbol:M={}}=this._spec,k={zIndex:this.layoutZIndex,interactive:(t=this._spec.interactive)===null||t===void 0||t,hover:(e=this._spec.interactive)===null||e===void 0||e,select:(i=this._spec.interactive)===null||i===void 0||i,points:[{x:0,y:0},{x:0,y:0}],center:{x:0,y:0},radius:0,startAngle:0,endAngle:0,lineStyle:jt(E((s=this._spec.line)===null||s===void 0?void 0:s.style),this._markerData),clipInRange:(a=this._spec.clip)!==null&&a!==void 0&&a,label:ss(f,this._markerData),state:{line:Q((o=(n=this._spec.line)===null||n===void 0?void 0:n.state)!==null&&o!==void 0?o:{},this._markerData),lineStartSymbol:Q((h=(l=this._spec.startSymbol)===null||l===void 0?void 0:l.state)!==null&&h!==void 0?h:{},this._markerData),lineEndSymbol:Q((c=(d=this._spec.endSymbol)===null||d===void 0?void 0:d.state)!==null&&c!==void 0?c:{},this._markerData),label:Q((p=(g=(u=this._spec)===null||u===void 0?void 0:u.label)===null||g===void 0?void 0:g.state)!==null&&p!==void 0?p:{},this._markerData),labelBackground:Q((y=(m=(v=(_=this._spec)===null||_===void 0?void 0:_.label)===null||v===void 0?void 0:v.labelBackground)===null||m===void 0?void 0:m.state)!==null&&y!==void 0?y:{},this._markerData)},animation:(b=this._spec.animation)!==null&&b!==void 0&&b,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return x.visible?k.startSymbol=Object.assign(Object.assign({},x),{visible:!0,style:E(x.style)}):k.startSymbol={visible:!1},M.visible?k.endSymbol=Object.assign(Object.assign({},M),{visible:!0,style:E(M.style)}):k.endSymbol={visible:!1},this._newMarkLineComponent(k)}_getUpdateMarkerAttrs(){var t,e,i,s;const a=this._spec,n=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,h=this._relativeSeries,d=this._computePointsAttr(),c=h.getViewData().latestData,u=n.latestData[0]&&n.latestData[0].latestData?n.latestData[0].latestData:n.latestData;let g;if(a.clip||!((t=a.label)===null||t===void 0)&&t.confine){const{minX:v,maxX:m,minY:y,maxY:b}=is([o.getRegion(),l.getRegion(),h.getRegion()]);g={x:v,y,width:m-v,height:b-y}}const p=(i=(e=this._markerComponent)===null||e===void 0?void 0:e.attribute)!==null&&i!==void 0?i:{},_=Object.assign(Object.assign({},p.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(u,c):(s=p.label)===null||s===void 0?void 0:s.text});return Object.assign(Object.assign({},d),{label:_,limitRect:g,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_markerLayout(){var t;const e=this._getUpdateMarkerAttrs();(t=this._markerComponent)===null||t===void 0||t.setAttributes(e)}_initDataView(){const t=this._spec,e="coordinates"in t,{doXProcess:i,doYProcess:s,doXYY1Process:a,doYXX1Process:n,doXYProcess:o,doAngleProcess:l,doRadiusProcess:h,doAngRadRad1Process:d,doRadAngAng1Process:c,doRadAngProcess:u}=li(t);if(this._markerData=this._getRelativeDataView(),!(i||s||a||n||o||l||h||d||c||u||e))return;ut(this._option.dataSet,"markerAggregation",as),ut(this._option.dataSet,"markerRegression",zh),ut(this._option.dataSet,"markerFilter",rs);const{options:g,needAggr:p,needRegr:_,processData:v}=this._computeOptions(),m=new wt(this._option.dataSet);m.parse([v],{type:"dataview"}),p&&m.transform({type:"markerAggregation",options:g}),_&&m.transform({type:"markerRegression",options:g}),m.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),m.target.on("change",()=>{this._markerLayout()}),this._markerData=m}}dn.specKey="markLine";class di extends dn{constructor(){super(...arguments),this.type=L.markLine,this.name=L.markLine,this.coordinateType="cartesian"}_newMarkLineComponent(t){return new Wt(t)}_computePointsAttr(){var t;const e=this._spec,i=this._markerData,s=this._startRelativeSeries,a=this._endRelativeSeries,n=this._relativeSeries,o=A(e.coordinates),l=A(e.process),h=l&&A(e.process.x),d=l&&A(e.process.y),c=A(e.positions),u=(t=e.autoRange)!==null&&t!==void 0&&t,{doXProcess:g,doYProcess:p,doXYY1Process:_,doYXX1Process:v,doXYProcess:m,doCoordinatesProcess:y}=li(e);let b=[];if(g||_||p||v||m||o&&h||o&&d){const f=oi(i,s,a,n,u);b=f.length===1?f[0]:f.map(x=>x[0])}else y?b=ts(i,n,u,e.coordinatesOffset):c&&(b=es(e.positions,n,e.regionRelative));return{points:b}}_markerLayout(){var t,e,i,s,a,n,o,l;const h=this._getUpdateMarkerAttrs();if(this._spec.type==="type-step"){const d=this._startRelativeSeries,c=this._endRelativeSeries,{multiSegment:u,mainSegmentIndex:g}=this._spec.line||{},{connectDirection:p,expandDistance:_=0}=this._spec;let v;if(Qt(_)){const k=d.getRegion(),B=k.getLayoutStartPoint(),P=c.getRegion(),w=P.getLayoutStartPoint();if(p==="bottom"||p==="top"){const V=Math.abs(Math.min(B.y,w.y)-Math.max(B.y+k.getLayoutRect().height,w.y+P.getLayoutRect().height));v=Number(_.substring(0,_.length-1))*V/100}else{const V=Math.abs(Math.min(B.x,w.x)-Math.max(B.x+k.getLayoutRect().width,w.x+P.getLayoutRect().width));v=Number(_.substring(0,_.length-1))*V/100}}else v=_;const{points:m,label:y,limitRect:b}=h,f=Ch(m[0],m[1],p,v);let x;x=u&&A(g)?{position:"middle",autoRotate:!1,refX:0,refY:0}:Object.assign(Object.assign({position:"start",autoRotate:!1},Th(m[0],m[1],p,v)),{refX:0,refY:0}),I((t=this._spec.label)===null||t===void 0?void 0:t.refX)&&(x.refX+=this._spec.label.refX),I((e=this._spec.label)===null||e===void 0?void 0:e.refY)&&(x.refY+=this._spec.label.refY),I((i=this._spec.label)===null||i===void 0?void 0:i.dx)&&(x.dx=(x.dx||0)+this._spec.label.dx),I((s=this._spec.label)===null||s===void 0?void 0:s.dy)&&(x.dy=(x.dy||0)+this._spec.label.dy);const M=(n=(a=this._markerComponent)===null||a===void 0?void 0:a.attribute)!==null&&n!==void 0?n:{};(o=this._markerComponent)===null||o===void 0||o.setAttributes({points:u?[[f[0],f[1]],[f[1],f[2]],[f[2],f[3]]]:f,label:Object.assign(Object.assign(Object.assign({},y),x),{textStyle:Object.assign(Object.assign({},M.label.textStyle),{textAlign:"center",textBaseline:"middle"})}),limitRect:b,multiSegment:u,mainSegmentIndex:g,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}else(l=this._markerComponent)===null||l===void 0||l.setAttributes(h)}_computeOptions(){let t,e=this._getRelativeDataView(),i=!0,s=!1;const a=this._spec,n=this._relativeSeries,{doXProcess:o,doYProcess:l,doXYY1Process:h,doYXX1Process:d,doXYProcess:c,doCoordinatesProcess:u}=li(a);if(c)t=[this._processSpecByDims([{dim:"x",specValue:a.x},{dim:"y",specValue:a.y}]),this._processSpecByDims([{dim:"x",specValue:a.x1},{dim:"y",specValue:a.y1}])];else if(o)t=[this._processSpecByDims([{dim:"x",specValue:a.x}])];else if(l)t=[this._processSpecByDims([{dim:"y",specValue:a.y}])];else if(h)t=[this._processSpecByDims([{dim:"x",specValue:a.x},{dim:"y",specValue:a.y}]),this._processSpecByDims([{dim:"x",specValue:a.x},{dim:"y",specValue:a.y1}])];else if(d)t=[this._processSpecByDims([{dim:"x",specValue:a.x},{dim:"y",specValue:a.y}]),this._processSpecByDims([{dim:"x",specValue:a.x1},{dim:"y",specValue:a.y}])];else if(u){if(t=this._processSpecCoo(a),i=!1,e=new wt(this._option.dataSet,{name:`${this.type}_${this.id}_data`}).parse([n.getViewData()],{type:"dataview"}).transform({type:"markerAggregation",options:t}),a.process&&"x"in a.process&&(t=[this._processSpecByDims([{dim:"x",specValue:a.process.x}])],i=!0),a.process&&"y"in a.process&&(t=t=[this._processSpecByDims([{dim:"y",specValue:a.process.y}])],i=!0),a.process&&"xy"in a.process){const{xField:g,yField:p}=n.getSpec();t={fieldX:g,fieldY:p},s=!0}}else i=!1;return{options:t,needAggr:i,needRegr:s,processData:e}}}di.type=L.markLine,di.coordinateType="cartesian";const Fh=()=>{W.registerComponent(di.type,di),hl()};class cn extends ns{constructor(){super(...arguments),this.specKey="markArea",this.layoutZIndex=bt.MarkArea}static _getMarkerCoordinateType(t){const{doAngleProcess:e,doRadiusProcess:i,doRadAngProcess:s}=hi(t);return t.coordinateType==="polar"||e||i||s?"polar":"cartesian"}_createMarkerComponent(){var t,e,i,s,a,n,o,l,h,d,c,u;const g=(t=this._spec.label)!==null&&t!==void 0?t:{},p={zIndex:this.layoutZIndex,interactive:(e=this._spec.interactive)===null||e===void 0||e,hover:(i=this._spec.interactive)===null||i===void 0||i,select:(s=this._spec.interactive)===null||s===void 0||s,points:[{x:0,y:0}],center:{x:0,y:0},innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,areaStyle:jt(E((a=this._spec.area)===null||a===void 0?void 0:a.style),this._markerData),clipInRange:(n=this._spec.clip)!==null&&n!==void 0&&n,label:ss(g,this._markerData),state:{area:Q((o=this._spec.area)===null||o===void 0?void 0:o.state,this._markerData),label:Q((l=this._spec.label)===null||l===void 0?void 0:l.state,this._markerData),labelBackground:Q((c=(d=(h=this._spec)===null||h===void 0?void 0:h.label)===null||d===void 0?void 0:d.labelBackground)===null||c===void 0?void 0:c.state,this._markerData)},animation:(u=this._spec.animation)!==null&&u!==void 0&&u,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return this._newMarkAreaComponent(p)}_markerLayout(){var t,e,i,s;const a=this._spec,n=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,h=this._relativeSeries,d=this._computePointsAttr(),c=this._getRelativeDataView().latestData,u=n?n.latestData[0]&&n.latestData[0].latestData?n.latestData[0].latestData:n.latestData:c;let g;if(a.clip||!((t=a.label)===null||t===void 0)&&t.confine){const{minX:p,maxX:_,minY:v,maxY:m}=is([o.getRegion(),l.getRegion(),h.getRegion()]);g={x:p,y:v,width:_-p,height:m-v}}this._markerComponent&&this._markerComponent.setAttributes(Object.assign(Object.assign({},d),{label:Object.assign(Object.assign({},(e=this._markerComponent.attribute)===null||e===void 0?void 0:e.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(u,c):(s=(i=this._markerComponent.attribute)===null||i===void 0?void 0:i.label)===null||s===void 0?void 0:s.text}),limitRect:g,dx:this._layoutOffsetX,dy:this._layoutOffsetY}))}_initDataView(){const t=this._spec,{doXProcess:e,doYProcess:i,doXYProcess:s,doAngleProcess:a,doRadiusProcess:n,doRadAngProcess:o,doCoordinatesProcess:l}=hi(t);if(!(e||i||s||a||n||o||l))return null;const{options:h}=this._computeOptions(),d=this._getRelativeDataView();ut(this._option.dataSet,"markerAggregation",as),ut(this._option.dataSet,"markerFilter",rs);const c=new wt(this._option.dataSet,{name:`${this.type}_${this.id}_data`});c.parse([d],{type:"dataview"}),c.transform({type:"markerAggregation",options:h}),c.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),c.target.on("change",()=>{this._markerLayout()}),this._markerData=c}}cn.specKey="markArea";class ci extends cn{constructor(){super(...arguments),this.type=L.markArea,this.name=L.markArea,this.coordinateType="cartesian"}_newMarkAreaComponent(t){return new Kt(t)}_computePointsAttr(){var t;const e=this._spec,i=this._markerData,s=this._startRelativeSeries,a=this._endRelativeSeries,n=this._relativeSeries,{doXProcess:o,doYProcess:l,doXYProcess:h,doCoordinatesProcess:d}=hi(e),c=A(e.positions),u=(t=e.autoRange)!==null&&t!==void 0&&t;let g=[],p=[];if(h){p=oi(i,s,a,n,u);const[_,v]=p;_&&_.length&&v&&v.length&&(g=[{x:_[0].x,y:v[0].y},_[0],{x:v[0].x,y:_[0].y},v[0]])}else if(o||l){p=oi(i,s,a,n,u);const[_,v]=p;_&&_.length&&v&&v.length&&(g=[..._,v[1],v[0]])}else d?g=ts(i,n,u,e.coordinatesOffset):c&&(g=es(e.positions,n,e.regionRelative));return{points:g}}_computeOptions(){const t=this._spec,{doXProcess:e,doYProcess:i,doXYProcess:s,doCoordinatesProcess:a}=hi(t);let n;return s?n=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"x",specValue:t.x1},{dim:"y",specValue:t.y1}])]:e?n=[this._processSpecByDims([{dim:"x",specValue:t.x}]),this._processSpecByDims([{dim:"x",specValue:t.x1}])]:i?n=[this._processSpecByDims([{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"y",specValue:t.y1}])]:a&&(n=this._processSpecCoo(t)),{options:n}}}ci.type=L.markArea,ci.coordinateType="cartesian";const Hh=()=>{W.registerComponent(ci.type,ci),dl()};class un extends ye{constructor(t,e){super(t,e),this.type=L.label,this.name=L.label,this.layoutType="none",this.layoutZIndex=bt.Label,this._regions=e.getRegionsInIndex(e.regionIndexes)}_interactiveConfig(t){const{interactive:e}=t,i={hover:!1,select:!1,state:t.state};if(e!==!0)return i;const{hover:s,select:a}=this._option.getChart().getSpec();return s===!1&&s.enable===!1||(i.hover=!0),a===!1&&a.enable===!1||(i.select=!0),i}_compareSpec(t,e){const i=super._compareSpec(t,e);return i.reRender=!0,te(e,t)||(i.reMake=!0),i}onRender(t){}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}_delegateLabelEvent(t){t.listenerCount("*")===0&&t.addEventListener("*",(e,i)=>this._delegateEvent(t,e,i))}}un.type=L.label;class ui extends Xr{constructor(){super(...arguments),this.skipEncode=!1}getRule(){return this._rule}setRule(t){this._rule=t}getTarget(){return this._target}setTarget(t){this._target=t,this._rule||this.setRule(t.type)}getComponent(){return this._component}setComponent(t){this._component=t}}ui.type="text",ui.constructorType="label";const Vh=()=>{W.registerMark(ui.constructorType,ui),Yr()};class gn extends ka{_initTheme(t,e){return{spec:t,theme:this._theme}}}class Pe extends un{constructor(t,e){super(t,e),this.type=L.label,this.name=L.label,this.specKey="label",this.transformerConstructor=gn,this.layoutZIndex=bt.Label,this._layoutRule=t.labelLayout||"series"}static getSpecInfo(t,e){const i=[];return((e==null?void 0:e.region)||[]).forEach((a,n)=>{(a.seriesIndexes||[]).some(o=>{const l=e.series[o],{markLabelSpec:h={}}=l;return Object.values(h).some(d=>Array.isArray(d)&&(c=>c.some(u=>u.visible))(d))})&&i.push({spec:t,type:L.label,specInfoPath:["component",this.specKey,n],regionIndexes:[n]})}),i}init(t){super.init(t),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}reInit(t){super.reInit(t),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initTextMarkStyle()}initEvent(){this.event.on(R.dataZoomChange,()=>{this._labelComponentMap.forEach((e,i)=>{const s=i.getProduct().getGroupGraphicItem();s&&s.disableAnimation()}),this.event.on(Ze.AFTER_MARK_RENDER_END,t)});const t=()=>{this._labelComponentMap.forEach((e,i)=>{const s=i.getProduct().getGroupGraphicItem();s&&s.enableAnimation()}),this.event.off(Ze.AFTER_MARK_RENDER_END,t)}}afterCompile(){this._labelComponentMap.forEach((t,e)=>{const i=e.getProduct();i&&i.addEventListener(Ze.AFTER_ELEMENT_ENCODE,()=>{this._isLayout===!1&&this._delegateLabelEvent(i.getGroupGraphicItem())})})}_initTextMark(){this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),_t(this._regions,t=>{const{markLabelSpec:e={}}=t.getSpecInfo(),i=Object.keys(e),s=t.getRegion();this._labelInfoMap.get(s)||this._labelInfoMap.set(s,[]);for(let a=0;a<i.length;a++){const n=i[a],o=t.getMarkInName(n);o&&e[n].forEach((l,h)=>{if(l.visible){const d=this._labelInfoMap.get(s),c=this._createMark({type:"label",name:`${n}-label-${h}`},{noSeparateStyle:!0,attributeContext:t.getMarkAttributeContext()});c.setTarget(o),d.push({labelMark:c,baseMark:o,series:t,labelSpec:l})}})}})}_initLabelComponent(){this._labelInfoMap.forEach((t,e)=>{if(this._layoutRule==="region"){const i=this._createMark({type:"component",name:`${e.getGroupMark().name}-label-component`},{componentType:"label",noSeparateStyle:!0,support3d:this._spec.support3d});i&&(i.setSkipBeforeLayouted(!0),this._marks.addMark(i),this._labelComponentMap.set(i,()=>this._labelInfoMap.get(e)))}else t.forEach((i,s)=>{const a=this._createMark({type:"component",name:`${i.labelMark.name}-component`},{componentType:"label",noSeparateStyle:!0,support3d:i.baseMark.getSupport3d()});a&&(a.setSkipBeforeLayouted(!0),this._marks.addMark(a),this._labelComponentMap.set(a,()=>this._labelInfoMap.get(e)[s]),i.labelMark.setComponent(a))})})}_initTextMarkStyle(){this._labelInfoMap.forEach(t=>{t.forEach(e=>{var i,s;const{labelMark:a,labelSpec:n,series:o}=e;if(this.initMarkStyleWithSpec(a,n,void 0),O(n==null?void 0:n.getStyleHandler)){const l=n.getStyleHandler(o);l==null||l.call(o,a,n)}!((s=(i=a.stateStyle)===null||i===void 0?void 0:i.normal)===null||s===void 0)&&s.lineWidth&&a.setAttribute("stroke",o.getColorAttribute(),"normal",at.Base_Series)})})}updateLayoutAttribute(){super.updateLayoutAttribute(),this._labelComponentMap.forEach((t,e)=>{const i=t();G(i)?this._updateMultiLabelAttribute(i,e):this._updateSingleLabelAttribute(i,e)})}_updateMultiLabelAttribute(t,e){this._updateLabelComponentAttribute(e.getProduct(),t.map(({baseMark:i})=>i.getProduct()),t)}_updateSingleLabelAttribute(t,e){const{baseMark:i}=t;this._updateLabelComponentAttribute(e.getProduct(),i.getProduct(),[t])}_updateLabelComponentAttribute(t,e,i){const s=this._option.getComponentsByType("totalLabel");t.target(e).configure({interactive:!1}).depend(s.map(a=>a.getMarks()[0].getProduct())).labelStyle((a,n)=>{var o,l;const h=i[n.labelIndex];if(h){const{labelSpec:d,labelMark:c,series:u}=h,g=c.getRule(),p=this._interactiveConfig(d),_=(l=(o=this._spec)===null||o===void 0?void 0:o.centerOffset)!==null&&l!==void 0?l:0;let v=ct({textStyle:Object.assign({pickable:d.interactive===!0},d.style),overlap:{avoidMarks:s.map(m=>m.getMarks()[0].getProductId())}},nh(g,h),Object.assign(Object.assign(Object.assign({},_a(d,["position","style","state","type","stackDataFilterType","getStyleHandler"])),p),{centerOffset:_}),d.stackDataFilterType?{dataFilter:d.stackDataFilterType==="min"?m=>m.filter(y=>y.data[Gr]):m=>m.filter(y=>y.data[Zr])}:{});return u&&u.parseLabelStyle&&(v=u.parseLabelStyle(v,d,c)),g!=="line"&&g!=="area"||(v.type=g),v}}).encode((a,n,o)=>{if(i[o.labelIndex]){const{labelSpec:l,labelMark:h}=i[o.labelIndex];return h.skipEncode?{data:a}:rn(i[o.labelIndex],a,l.formatMethod,l.formatter)}}).size(()=>i[0].series.getRegion().getLayoutRect())}compileMarks(){this.getMarks().forEach(t=>{var e;const i=this._labelComponentMap.get(t)();let s;s=G(i)?i[0].series.getRegion().getGroupMark().getProduct():i.series.getRegion().getGroupMark().getProduct(),t.compile({group:s}),(e=t.getProduct())===null||e===void 0||e.configure({context:{model:this,labelInfo:i}})})}getVRenderComponents(){const t=[];return this._labelComponentMap.forEach((e,i)=>{const s=i.getProduct().getGroupGraphicItem();s&&t.push(s)}),t}}Pe.type=L.label,Pe.specKey="label",Pe.transformerConstructor=gn;const jh=()=>{bl(),Vh(),pa(),W.registerComponent(Pe.type,Pe,!0)};var ra=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(i=Object.getOwnPropertySymbols(r);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(e[i[s]]=r[i[s]])}return e};class pn extends ns{constructor(){super(...arguments),this.specKey="markPoint",this.layoutZIndex=bt.MarkPoint}static _getMarkerCoordinateType(t){const{doPolarProcess:e,doGeoProcess:i}=Ri(t);return t.coordinateType==="polar"||e?"polar":t.coordinateType==="geo"||i?"geo":"cartesian"}_createMarkerComponent(){var t,e,i,s,a,n,o,l,h,d,c,u,g,p,_,v,m,y,b,f,x,M,k,B,P,w,V,J;const{itemContent:j={},itemLine:ot={},targetSymbol:Y={}}=this._spec,{text:Z={},symbol:U,image:xt,richText:yt}=j,ee=ra(j,["text","symbol","image","richText"]),Tt={zIndex:this.layoutZIndex,interactive:(t=this._spec.interactive)===null||t===void 0||t,hover:(e=this._spec.interactive)===null||e===void 0||e,select:(i=this._spec.interactive)===null||i===void 0||i,position:{x:0,y:0},clipInRange:(s=this._spec.clip)!==null&&s!==void 0&&s,itemContent:Object.assign({offsetX:aa(j.offsetX,this._relativeSeries.getRegion()),offsetY:aa(j.offsetX,this._relativeSeries.getRegion())},ee),targetSymbol:{offset:(a=Y.offset)!==null&&a!==void 0?a:0,visible:(n=Y.visible)!==null&&n!==void 0&&n,size:(o=Y.size)!==null&&o!==void 0?o:20,style:jt(Y.style,this._markerData)},state:{line:Q((h=(l=this._spec.itemLine.line)===null||l===void 0?void 0:l.state)!==null&&h!==void 0?h:{},this._markerData),lineStartSymbol:Q((c=(d=this._spec.itemLine.startSymbol)===null||d===void 0?void 0:d.state)!==null&&c!==void 0?c:{},this._markerData),lineEndSymbol:Q((g=(u=this._spec.itemLine.endSymbol)===null||u===void 0?void 0:u.state)!==null&&g!==void 0?g:{},this._markerData),symbol:Q((_=(p=this._spec.itemContent.symbol)===null||p===void 0?void 0:p.state)!==null&&_!==void 0?_:{},this._markerData),image:Q((m=(v=this._spec.itemContent.image)===null||v===void 0?void 0:v.state)!==null&&m!==void 0?m:{},this._markerData),text:Q((b=(y=this._spec.itemContent.text)===null||y===void 0?void 0:y.state)!==null&&b!==void 0?b:{},this._markerData),textBackground:Q((x=(f=this._spec.itemContent.text)===null||f===void 0?void 0:f.labelBackground)===null||x===void 0?void 0:x.state,this._markerData),richText:Q((k=(M=this._spec.itemContent.richText)===null||M===void 0?void 0:M.state)!==null&&k!==void 0?k:{},this._markerData),customMark:Q((P=(B=this._spec.itemContent.customMark)===null||B===void 0?void 0:B.state)!==null&&P!==void 0?P:{},this._markerData),targetItem:Q((V=(w=this._spec.targetSymbol)===null||w===void 0?void 0:w.state)!==null&&V!==void 0?V:{},this._markerData)},animation:(J=this._spec.animation)!==null&&J!==void 0&&J,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};U!=null&&U.style&&(Tt.itemContent.symbolStyle=E(jt(U.style,this._markerData))),xt!=null&&xt.style&&(Tt.itemContent.imageStyle=jt(xt.style,this._markerData)),Z&&(Tt.itemContent.textStyle=ss(Z,this._markerData)),yt!=null&&yt.style&&(Tt.itemContent.richTextStyle=jt(yt.style,this._markerData));const{visible:xe,line:Se={}}=ot,it=ra(ot,["visible","line"]);return Tt.itemLine=xe!==!1?Object.assign(Object.assign({},it),{visible:!0,lineStyle:E(Se.style)}):{visible:!1},new qt(Tt)}_markerLayout(){var t,e,i,s,a;const n=this._spec,o=this._markerData,l=this._relativeSeries,{point:h}=this._computePointsAttr(),d=this._getRelativeDataView().latestData,c=o?o.latestData[0]&&o.latestData[0].latestData?o.latestData[0].latestData:o.latestData:d;let u;if(n.clip||!((t=n.itemContent)===null||t===void 0)&&t.confine){const{minX:g,maxX:p,minY:_,maxY:v}=is([l.getRegion()]);u={x:g,y:_,width:p-g,height:v-_}}if(this._markerComponent){const g=(e=this._markerComponent.attribute)!==null&&e!==void 0?e:{},p=(s=(i=g.itemContent)===null||i===void 0?void 0:i.textStyle)!==null&&s!==void 0?s:{};this._markerComponent.setAttributes({position:h===void 0?{x:null,y:null}:h,itemContent:Object.assign(Object.assign({},g.itemContent),{textStyle:Object.assign(Object.assign({},p),{text:!((a=this._spec.itemContent.text)===null||a===void 0)&&a.formatMethod?this._spec.itemContent.text.formatMethod(c,d):p.text}),offsetX:na(h,g.itemContent.offsetX,this._relativeSeries.getRegion()),offsetY:na(h,g.itemContent.offsetY,this._relativeSeries.getRegion())}),limitRect:u,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}}_initDataView(){const t=this._spec,{doXYProcess:e,doPolarProcess:i,doGeoProcess:s}=Ri(t);if(!(A(t.coordinate)||e||i||s))return;ut(this._option.dataSet,"markerAggregation",as),ut(this._option.dataSet,"markerFilter",rs);const{options:a}=this._computeOptions(),n=new wt(this._option.dataSet,{name:`${this.type}_${this.id}_data`});n.parse([this._getRelativeDataView()],{type:"dataview"}),n.transform({type:"markerAggregation",options:a}),n.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),n.target.on("change",()=>{this._markerLayout()}),this._markerData=n}}pn.specKey="markPoint";class gi extends pn{constructor(){super(...arguments),this.type=L.markPoint,this.name=L.markPoint,this.coordinateType="cartesian"}_computePointsAttr(){var t;const e=this._spec,i=this._markerData,s=this._relativeSeries,a="x"in e&&"y"in e,n="coordinate"in e,o="position"in e,l=(t=e==null?void 0:e.autoRange)!==null&&t!==void 0&&t;let h;return a?h=oi(i,s,s,s,l)[0][0]:n?h=ts(i,s,l,e.coordinatesOffset)[0]:o&&(h=es(e.position,s,e.regionRelative)[0]),{point:h}}_computeOptions(){const t=this._spec,{doXYProcess:e}=Ri(t),i=A(t.coordinate);let s;return e?s=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}])]:i&&(s=this._processSpecCoo(t)),{options:s}}}gi.type=L.markPoint,gi.coordinateType="cartesian";const Yh=()=>{W.registerComponent(gi.type,gi),cl()};class pi extends ye{constructor(){super(...arguments),this.layoutType="none",this.type=L.brush,this.name=L.brush,this.specKey="brush",this.layoutZIndex=bt.Brush,this._linkedSeries=[],this._itemMap={},this._linkedItemMap={},this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._needInitOutState=!0,this._cacheInteractiveRangeAttrs=[],this._needDisablePickable=!1,this._releatedAxes=[],this._regionAxisMap={},this._axisDataZoomMap={},this._zoomRecord=[]}init(){const t=this._transformBrushedMarkAttr(this._spec.inBrush),e=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach(i=>{i.getActiveMarks().forEach(s=>{s&&(i.setMarkStyle(s,Object.assign({},t),"inBrush",at.Series),i.setMarkStyle(s,Object.assign({},e),"outOfBrush",at.Series))})})}static getSpecInfo(t){const e=t[this.specKey];if(!C(e)&&e.visible!==!1)return[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:L.brush}]}created(){super.created(),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initRegionAxisMap(),this._initAxisDataZoomMap(),this._initNeedOperatedItem()}_extendDataInBrush(t){const e=[];for(const i in t)for(const s in t[i])e.push(Object.assign({},t[i][s].data[0]));return e}_extendDatumOutOfBrush(t){var e;const i=[];for(const s in t)i.push((e=t[s].data)===null||e===void 0?void 0:e[0]);return i}_getBrushInteractiveAttr(t){const e=t.getLayoutStartPoint(),i=t.getLayoutRect(),s=e.x,a=s+i.width,n=e.y,o=n+i.height;return{interactiveRange:{minY:n,maxY:o,minX:s,maxX:a},xRange:[s,a],yRange:[n,o]}}_updateBrushComponent(t,e){const i=this._getBrushInteractiveAttr(t),s=this._brushComponents[e];s.setAttributes(i),this._initMarkBrushState(e,""),s.children[0].removeAllChild(),this._needInitOutState=!0}_createBrushComponent(t,e){var i,s;const a=this._getBrushInteractiveAttr(t),n=new Za(Object.assign(Object.assign(Object.assign({zIndex:this.layoutZIndex,brushStyle:E((i=this._spec)===null||i===void 0?void 0:i.style)},a),this._spec),{disableTriggerEvent:this._option.disableTriggerEvent}));n.id=(s=this._spec.id)!==null&&s!==void 0?s:`brush-${this.id}`,this.getContainer().add(n);const{brushMode:o="single"}=this._spec;this._brushComponents.push(n),this._cacheInteractiveRangeAttrs.push(a),n.addEventListener(rt.drawStart,l=>{this._emitEvent(R.brushStart,t)}),n.addEventListener(rt.moveStart,l=>{this._emitEvent(R.brushStart,t)}),n.addEventListener(rt.drawing,l=>{this._needInitOutState&&o==="single"&&this._initMarkBrushState(e,"outOfBrush"),this._needInitOutState=!1,this._needDisablePickable=!0,this._handleBrushChange(R.brushChange,t,l),this._emitEvent(R.brushChange,t)}),n.addEventListener(rt.moving,l=>{this._handleBrushChange(R.brushChange,t,l),this._emitEvent(R.brushChange,t)}),n.addEventListener(rt.brushClear,l=>{this._initMarkBrushState(e,""),this._needInitOutState=!0,this._needDisablePickable=!1,this._handleBrushChange(R.brushChange,t,l),this._handleBrushChange(R.brushClear,t,l),this._emitEvent(R.brushChange,t),this._emitEvent(R.brushClear,t)}),n.addEventListener(rt.drawEnd,l=>{this._needInitOutState=!0,this._needDisablePickable=!1;const{operateMask:h}=l.detail;this._handleBrushChange(R.brushEnd,t,l),this._setAxisAndDataZoom(h,t),this._emitEvent(R.brushEnd,t)}),n.addEventListener(rt.moveEnd,l=>{const{operateMask:h}=l.detail;this._handleBrushChange(R.brushEnd,t,l),this._setAxisAndDataZoom(h,t),this._emitEvent(R.brushEnd,t)})}_handleBrushChange(t,e,i){const{operateMask:s}=i.detail;this._reconfigItem(s,e),this._reconfigLinkedItem(s,e)}_emitEvent(t,e){this.event.emit(t,{model:this,value:{operateType:t,operateRegion:e,inBrushData:this._extendDataInBrush(this._inBrushElementsMap),outOfBrushData:this._extendDatumOutOfBrush(this._outOfBrushElementsMap),linkInBrushData:this._extendDataInBrush(this._linkedInBrushElementsMap),linkOutOfBrushData:this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),inBrushElementsMap:this._inBrushElementsMap,outOfBrushElementsMap:this._outOfBrushElementsMap,linkedInBrushElementsMap:this._linkedInBrushElementsMap,linkedOutOfBrushElementsMap:this._linkedOutOfBrushElementsMap,zoomRecord:this._zoomRecord}})}_transformBrushedMarkAttr(t){const e={};return t!=null&&t.symbol&&(e.symbolType=t.symbol),t!=null&&t.symbolSize&&(e.size=t.symbolSize),t!=null&&t.color&&(e.fill=t.color),t!=null&&t.colorAlpha&&(e.fillOpacity=t.colorAlpha),Object.assign(Object.assign({},E(t)),e)}_reconfigItem(t,e){this._itemMap[e.id].forEach(i=>{const s=i.getProduct();!s||!s.elements||!s.elements.length||s.elements.forEach(a=>{var n,o,l;const h=a.getGraphicItem(),d=i.id+"_"+a.key;!((n=this._outOfBrushElementsMap)===null||n===void 0)&&n[d]&&this._isBrushContainItem(t,h)?(a.addState("inBrush"),this._inBrushElementsMap[t==null?void 0:t.name]||(this._inBrushElementsMap[t==null?void 0:t.name]={}),this._inBrushElementsMap[t==null?void 0:t.name][d]=a,delete this._outOfBrushElementsMap[d]):!((l=(o=this._inBrushElementsMap)===null||o===void 0?void 0:o[t==null?void 0:t.name])===null||l===void 0)&&l[d]&&!this._isBrushContainItem(t,h)&&(a.removeState("inBrush"),a.addState("outOfBrush"),this._outOfBrushElementsMap[d]=a,delete this._inBrushElementsMap[t.name][d]),h.setAttribute("pickable",!this._needDisablePickable)})})}_reconfigLinkedItem(t,e){const i=e.getLayoutStartPoint(),s=e.getSeries().map(a=>a.id);this._linkedSeries.forEach(a=>{if(!s.includes(a.id)){const n=a.getRegion().getLayoutStartPoint(),o=n.x-i.x,l=n.y-i.y;this._linkedItemMap[a.id].forEach(h=>{const d=h.getProduct();!d||!d.elements||!d.elements.length||d.elements.forEach(c=>{var u,g,p;const _=c.getGraphicItem(),v=h.id+"_"+c.key;!((u=this._linkedOutOfBrushElementsMap)===null||u===void 0)&&u[v]&&this._isBrushContainItem(t,_,{dx:o,dy:l})?(c.addState("inBrush"),this._linkedInBrushElementsMap[t==null?void 0:t.name]||(this._linkedInBrushElementsMap[t==null?void 0:t.name]={}),this._linkedInBrushElementsMap[t==null?void 0:t.name][v]=c,delete this._linkedOutOfBrushElementsMap[v]):!((p=(g=this._linkedInBrushElementsMap)===null||g===void 0?void 0:g[t==null?void 0:t.name])===null||p===void 0)&&p[v]&&!this._isBrushContainItem(t,_,{dx:o,dy:l})&&(c.removeState("inBrush"),c.addState("outOfBrush"),this._linkedOutOfBrushElementsMap[v]=c),_.setAttribute("pickable",!this._needDisablePickable)})})}})}_isBrushContainItem(t,e,i){var s,a,n;if(!(t!=null&&t.globalTransMatrix)||!(!((s=t==null?void 0:t.attribute)===null||s===void 0)&&s.points))return!1;const o=(n=(a=t==null?void 0:t.attribute)===null||a===void 0?void 0:a.points)!==null&&n!==void 0?n:[],{a:l,b:h,c:d,d:c,e:u,f:g}=t.globalTransMatrix,p=(i==null?void 0:i.dx)||0,_=(i==null?void 0:i.dy)||0,v=o.map(f=>({x:l*f.x+d*f.y+u+p,y:h*f.x+c*f.y+g+_}));t.globalAABBBounds.clone().set(t.globalAABBBounds.x1+p,t.globalAABBBounds.y1+_,t.globalAABBBounds.x2+p,t.globalAABBBounds.y2+_);const m=e.globalTransMatrix.e,y=e.globalTransMatrix.f;let b=[];if(e.type==="symbol"){const{size:f=0}=e==null?void 0:e.attribute,x=T(f)[0]/2;return b=[{x:m-x,y:y-x},{x:m+x,y:y-x},{x:m+x,y:y+x},{x:m-x,y:y+x}],Ss(v,b)}if(e.type==="rect"){const{x1:f,x2:x,y1:M,y2:k}=e==null?void 0:e.AABBBounds,B=Math.abs(f-x),P=Math.abs(M-k);return b=[{x:m,y},{x:m+B,y},{x:m+B,y:y+P},{x:m,y:y+P}],Ss(v,b)}return t.globalAABBBounds.intersects(e.globalAABBBounds)}_stateClamp(t){return Math.min(Math.max(0,t),1)}_setAxisAndDataZoom(t,e){var i;if(this._zoomRecord=[],this._spec.zoomAfterBrush){const s=t.AABBBounds;(i=this._regionAxisMap["region_"+e.id])===null||i===void 0||i.forEach(a=>{var n,o;const l=a.layoutOrient==="bottom"||a.layoutOrient==="top",h=(n=this._spec.axisRangeExpand)!==null&&n!==void 0?n:0,{x1:d,x2:c,y1:u,y2:g}=s,p=l?"x":"y",_=l?d:u,v=l?c:g;if(this._axisDataZoomMap[a.id]){const m=this._axisDataZoomMap[a.id],y=m.relatedAxisComponent,b=y.getScale().invert(_-e.getLayoutStartPoint()[p]),f=y.getScale().invert(v-e.getLayoutStartPoint()[p]),x=m.dataToStatePoint(b),M=m.dataToStatePoint(f),k=this._stateClamp(x-h),B=this._stateClamp(M+h);m.setStartAndEnd(k,B,["percent","percent"]),this._zoomRecord.push({operateComponent:m,start:k,end:B})}else{const m=a.getScale().range(),y=(o=a.getScale().rangeFactor())!==null&&o!==void 0?o:[0,1],b=m[1]<m[0],f=_-e.getLayoutStartPoint()[p],x=v-e.getLayoutStartPoint()[p],M=b?Math.min(f,x):Math.max(f,x),k=((b?Math.max(f,x):Math.min(f,x))-m[0])/(m[1]-m[0])*(y[1]-y[0])+y[0],B=(M-m[0])/(m[1]-m[0])*(y[1]-y[0])+y[0],P=this._stateClamp(k-h),w=this._stateClamp(B+h);a.getScale().rangeFactor([P,w]),a.effect.scaleUpdate(),this._zoomRecord.push({operateComponent:a,start:P,end:w})}})}}_bindRegions(){A(this._spec.regionId)&&A(this._spec.regionIndex)&&(this._relativeRegions=this._option.getAllRegions()),this._relativeRegions=this._option.getRegionsInUserIdOrIndex(T(this._spec.regionId),T(this._spec.regionIndex))}_bindLinkedSeries(){A(this._spec.brushLinkSeriesId)&&A(this._spec.brushLinkSeriesIndex)||(this._linkedSeries=this._option.getSeriesInUserIdOrIndex(T(this._spec.brushLinkSeriesId),T(this._spec.brushLinkSeriesIndex)))}_initRegionAxisMap(){A(this._spec.axisId)?T(this._spec.axisId).forEach(t=>{this._releatedAxes.push(this._option.getComponentByUserId(t))}):A(this._spec.axisIndex)?T(this._spec.axisIndex).forEach(t=>{this._releatedAxes.push(this._option.getComponentByIndex("axes",t))}):this._releatedAxes=this._option.getComponentsByKey("axes"),this._releatedAxes.forEach(t=>{t==null||t.getRegions().forEach(e=>{this._regionAxisMap["region_"+e.id]?this._regionAxisMap["region_"+e.id].push(t):this._regionAxisMap["region_"+e.id]=[t]})})}_initAxisDataZoomMap(){this._option.getComponentsByKey("dataZoom").forEach(t=>{t.relatedAxisComponent&&(this._axisDataZoomMap[t.relatedAxisComponent.id]=t)})}_initNeedOperatedItem(){const t=this._spec.seriesId,e=this._spec.seriesIndex;this._relativeRegions.forEach(i=>{const s=[];i.getSeries().forEach(a=>{(t&&T(t).includes(a.userId.toString())||e&&T(e).includes(a.getSpecIndex())||!e&&!t)&&s.push(...a.getMarksWithoutRoot()),this._itemMap[i.id]=s})}),this._linkedSeries.forEach(i=>{this._linkedItemMap[i.id]=i.getMarksWithoutRoot()})}_initMarkBrushState(t,e){this._brushComponents.forEach((i,s)=>{s!==t&&i.children[0].removeAllChild()}),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._option.getAllSeries().forEach(i=>{i.getMarksWithoutRoot().forEach(s=>{const a=s.getProduct();!a||!a.elements||!a.elements.length||a.elements.forEach(n=>{const o=s.id+"_"+n.key;n.removeState("inBrush"),n.removeState("outOfBrush"),n.addState(e),this._outOfBrushElementsMap[o]=n,this._linkedOutOfBrushElementsMap[o]=n})})})}initEvent(){}onRender(t){}changeRegions(t){}_getNeedClearVRenderComponents(){return this._brushComponents}_compareSpec(t,e){this._brushComponents&&this._relativeRegions.forEach((s,a)=>{this._updateBrushComponent(s,a)});const i=super._compareSpec(t,e);return te(e,t)||(i.reRender=!0,i.reMake=!0),i}onLayoutEnd(t){var e;super.onLayoutEnd(t),!this._option.disableTriggerEvent&&((e=this._spec.visible)===null||e===void 0||e)&&(this._brushComponents?this._relativeRegions.forEach((i,s)=>{this._updateBrushComponent(i,s)}):(this._brushComponents=[],this._relativeRegions.forEach((i,s)=>{this._createBrushComponent(i,s)})))}clearGraphic(){this._brushComponents&&this._brushComponents.forEach(t=>{t._container.incrementalClearChild()})}clear(){if(this._brushComponents){const t=this.getContainer();this._brushComponents.forEach(e=>{e.removeAllChild(),e.releaseBrushEvents(),t&&t.removeChild(e)}),this._brushComponents=null}}}pi.type=L.brush,pi.specKey="brush";const Xh=()=>{W.registerComponent(pi.type,pi)},Gh=[Ur,$r,Nr,Wr,sn,an,Kl,ql,yh,Xh,Kr,Sh,qr,Jr,Qr,Hh,Fh,Yh,Ah,to],Zh=eo("LineChart",{type:"line",vchartConstrouctor:io},[sh,jh,...Gh]),Qh={title:"VChart/Line"};function ke(){const r={title:{visible:!0,text:""},xField:"year",yField:"value",seriesField:"category",data:{values:[{year:"2010",value:510,category:"Liquid fuel"},{year:"2010",value:481,category:"Solid fuel"},{year:"2010",value:570,category:"Gas flarinl"},{year:"2011",value:513,category:"Liquid fuel"},{year:"2011",value:405,category:"Solid fuel"},{year:"2011",value:164,category:"Gas flarinl"},{year:"2012",value:320,category:"Liquid fuel"},{year:"2012",value:410,category:"Solid fuel"},{year:"2012",value:250,category:"Gas flarinl"},{year:"2013",value:222,category:"Liquid fuel"},{year:"2013",value:512,category:"Solid fuel"},{year:"2013",value:408,category:"Gas flarinl"},{year:"2014",value:428,category:"Liquid fuel"},{year:"2014",value:111,category:"Solid fuel"},{year:"2014",value:568,category:"Gas flarinl"},{year:"2015",value:428,category:"Liquid fuel"},{year:"2015",value:111,category:"Solid fuel"},{year:"2015",value:568,category:"Gas flarinl"}]},legends:{visible:!0,position:"end",orient:"top"},point:{style:{fill:"white",shape:"circle",strokeWidth:1,stroke:{scale:"color",field:"category"}}}};return _n.createElement(Zh,{...r})}ke.__docgenInfo={description:"",methods:[],displayName:"Middle"};var oa,la,ha;ke.parameters={...ke.parameters,docs:{...(oa=ke.parameters)==null?void 0:oa.docs,source:{originalSource:`function Middle() {
  const config: LineProps = {
    title: {
      visible: true,
      text: ''
    },
    xField: 'year',
    yField: 'value',
    seriesField: 'category',
    data: {
      values: [{
        year: '2010',
        value: 510,
        category: 'Liquid fuel'
      }, {
        year: '2010',
        value: 481,
        category: 'Solid fuel'
      }, {
        year: '2010',
        value: 570,
        category: 'Gas flarinl'
      }, {
        year: '2011',
        value: 513,
        category: 'Liquid fuel'
      }, {
        year: '2011',
        value: 405,
        category: 'Solid fuel'
      }, {
        year: '2011',
        value: 164,
        category: 'Gas flarinl'
      }, {
        year: '2012',
        value: 320,
        category: 'Liquid fuel'
      }, {
        year: '2012',
        value: 410,
        category: 'Solid fuel'
      }, {
        year: '2012',
        value: 250,
        category: 'Gas flarinl'
      }, {
        year: '2013',
        value: 222,
        category: 'Liquid fuel'
      }, {
        year: '2013',
        value: 512,
        category: 'Solid fuel'
      }, {
        year: '2013',
        value: 408,
        category: 'Gas flarinl'
      }, {
        year: '2014',
        value: 428,
        category: 'Liquid fuel'
      }, {
        year: '2014',
        value: 111,
        category: 'Solid fuel'
      }, {
        year: '2014',
        value: 568,
        category: 'Gas flarinl'
      }, {
        year: '2015',
        value: 428,
        category: 'Liquid fuel'
      }, {
        year: '2015',
        value: 111,
        category: 'Solid fuel'
      }, {
        year: '2015',
        value: 568,
        category: 'Gas flarinl'
      }]
    },
    legends: {
      visible: true,
      position: 'end',
      orient: 'top'
    },
    point: {
      style: {
        fill: 'white',
        shape: 'circle',
        strokeWidth: 1,
        stroke: {
          scale: 'color',
          field: 'category'
        }
      }
    }
  };
  return <Line {...config} />;
}`,...(ha=(la=ke.parameters)==null?void 0:la.docs)==null?void 0:ha.source}}};const td=["Middle"];export{ke as Middle,td as __namedExportsOrder,Qh as default};
