import{R as X,r as J}from"./index-RYns6xqu.js";import{a as Fr}from"./index-DvSUCdeO.js";import{r as Lr,t as Rr,l as Nn,m as Xe,n as q,W as qe,o as Gn,p as jn,q as et,s as j,u as Ke,v as _t,w as De,x as Fe,y as kr,z as Le,A as Qt,B as Bn,S as Bt,D as $t,E as Mr,F as Zt,G as Ir,H as Nr,I as Qe,M as Gr,U as Ze,J as Je,K as tn,L as fe,N as At,O as $n,P as bt,Q as Dt,R as jr,T as Un,g as N,V as Re,X as Hn,Y as Vn,Z as Br,_ as $r,$ as Jt,a0 as Ur,a1 as ke,a2 as Hr,a3 as Vr,a4 as ne,c as en,a5 as de,a6 as at,a7 as zr,a8 as Wr,a9 as Yr,aa as Xr,ab as Y,d as Mt,ac as zn,ad as qr,ae as Kr,af as Qr,ag as Zr,ah as Jr,ai as ti,aj as ei,ak as ni,al as ri,am as ii,an as oi,ao as Wn,ap as te,aq as Yn,ar as pt,as as Me,at as Xn,au as qn,av as ai,aw as D,ax as ft,ay as Ie,az as W,aA as ui,aB as Kn,aC as nn,aD as rn,aE as vt,aF as si,aG as ci,aH as pe,aI as ve,aJ as Ut,aK as li,aL as fi,aM as di,aN as pi,aO as on,aP as vi,aQ as hi,aR as yi,aS as Rt}from"./index-DiO4j-mk.js";function an(n,t){for(var e in t)t.hasOwnProperty(e)&&e!=="constructor"&&t[e]!==void 0&&(n[e]=t[e])}function gi(n,t,e,r){return t&&an(n,t),e&&an(n,e),n}function _i(){var n=1,t=1,e=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=e,a.x1=n,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(Lr),a}function o(a,s){return function(u){u.children&&Rr(u,u.x0,a*(u.depth+1)/s,u.x1,a*(u.depth+2)/s);var l=u.x0,c=u.y0,d=u.x1-e,p=u.y1-e;d<l&&(l=d=(l+d)/2),p<c&&(c=p=(c+p)/2),u.x0=l,u.y0=c,u.x1=d,u.y1=p}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(n=+a[0],t=+a[1],i):[n,t]},i.padding=function(a){return arguments.length?(e=+a,i):e},i}var he=function(){return he=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},he.apply(this,arguments)},Ft=he({},Fr),mi=Ft.version,Oi=Ft.render;Ft.unmountComponentAtNode;var Ne;try{var xi=Number((mi||"").split(".")[0]);xi>=18&&(Ne=Ft.createRoot)}catch{}function un(n){var t=Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&typeof t=="object"&&(t.usingClientEntryPoint=n)}var sn="__rc_react_root__";function Ai(n,t){un(!0);var e=t[sn]||Ne(t);un(!1),e.render(n),t[sn]=e}function wi(n,t){Oi(n,t)}function Ei(n,t){if(Ne){Ai(n,t);return}wi(n,t)}var It=new Map;typeof document<"u"&&It.set("tooltip",document.createElement("div"));var Si=function(n,t){t===void 0&&(t=!1);var e=null;if(t)e=It.get("tooltip");else if(e=document.createElement("div"),n!=null&&n.key){var r=It.get(n.key);r?e=r:It.set(n.key,e)}return Ei(n,e),e},Ci=function(n){if(typeof document>"u")return"loading";var t=n.attachShadow({mode:"open"}),e=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,e.classList.add("loading"),e.innerHTML="<div></div><div></div><div></div><div></div>",t.appendChild(r),t.appendChild(e)},Ti=function(n){var t=n.loadingTemplate,e=n.theme,r=e===void 0?"light":e,i=X.useRef(null);X.useEffect(function(){!t&&i.current&&Ci(i.current)},[]);var o=function(){return t||X.createElement("div",{ref:i})};return X.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},o())},Pi=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bi=function(n){Pi(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(r){var i=e.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||X.createElement("h5",null,"组件出错了，请核查后重试： ",r.message)}},e}return t.getDerivedStateFromError=function(e){return{hasError:!0,error:e}},t.getDerivedStateFromProps=function(e,r){return r.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):X.createElement(J.Fragment,null,this.props.children)},t}(X.Component),Di=NaN;function cn(n){return typeof n=="number"?n:Nn(n)?Di:+n}function Fi(n,t){return function(e,r){var i;if(e===void 0&&r===void 0)return t;if(e!==void 0&&(i=e),r!==void 0){if(i===void 0)return r;typeof e=="string"||typeof r=="string"?(e=Xe(e),r=Xe(r)):(e=cn(e),r=cn(r)),i=n(e,r)}return i}}var Li=/\s/;function Ri(n){for(var t=n.length;t--&&Li.test(n.charAt(t)););return t}var ki=/^\s+/;function Mi(n){return n&&n.slice(0,Ri(n)+1).replace(ki,"")}var ln=NaN,Ii=/^[-+]0x[0-9a-f]+$/i,Ni=/^0b[01]+$/i,Gi=/^0o[0-7]+$/i,ji=parseInt;function Qn(n){if(typeof n=="number")return n;if(Nn(n))return ln;if(q(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=q(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=Mi(n);var e=Ni.test(n);return e||Gi.test(n)?ji(n.slice(2),e?2:8):Ii.test(n)?ln:+n}var fn=1/0,Bi=17976931348623157e292;function $i(n){if(!n)return n===0?n:0;if(n=Qn(n),n===fn||n===-fn){var t=n<0?-1:1;return t*Bi}return n===n?n:0}function Zn(n){var t=$i(n),e=t%1;return t===t?e?t-e:t:0}function Ge(n){return n}var dn=qe&&new qe;function Ui(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}function je(){}var Hi=4294967295;function ht(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Hi,this.__views__=[]}ht.prototype=Gn(je.prototype);ht.prototype.constructor=ht;function Jn(){}var tr=dn?function(n){return dn.get(n)}:Jn,pn={},Vi=Object.prototype,zi=Vi.hasOwnProperty;function Nt(n){for(var t=n.name+"",e=pn[t],r=zi.call(pn,t)?e.length:0;r--;){var i=e[r],o=i.func;if(o==null||o==n)return i.name}return t}function nt(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}nt.prototype=Gn(je.prototype);nt.prototype.constructor=nt;function Wi(n){if(n instanceof ht)return n.clone();var t=new nt(n.__wrapped__,n.__chain__);return t.__actions__=jn(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}var Yi=Object.prototype,Xi=Yi.hasOwnProperty;function Ht(n){if(et(n)&&!j(n)&&!(n instanceof ht)){if(n instanceof nt)return n;if(Xi.call(n,"__wrapped__"))return Wi(n)}return new nt(n)}Ht.prototype=je.prototype;Ht.prototype.constructor=Ht;function vn(n){var t=Nt(n),e=Ht[t];if(typeof e!="function"||!(t in ht.prototype))return!1;if(n===e)return!0;var r=tr(e);return!!r&&n===r[0]}var qi=800,Ki=16,Qi=Date.now;function Zi(n){var t=0,e=0;return function(){var r=Qi(),i=Ki-(r-e);if(e=r,i>0){if(++t>=qi)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}function Ji(n){return function(){return n}}var to=Ke?function(n,t){return Ke(n,"toString",{configurable:!0,enumerable:!1,value:Ji(t),writable:!0})}:Ge,er=Zi(to);function eo(n,t,e,r){for(var i=n.length,o=e+-1;++o<i;)if(t(n[o],o,n))return o;return-1}function no(n){return n!==n}function ro(n,t,e){for(var r=e-1,i=n.length;++r<i;)if(n[r]===t)return r;return-1}function nr(n,t,e){return t===t?ro(n,t,e):eo(n,no,e)}function io(n,t){var e=n==null?0:n.length;return!!e&&nr(n,t,0)>-1}var hn=Math.max;function rr(n,t,e){return t=hn(t===void 0?n.length-1:t,0),function(){for(var r=arguments,i=-1,o=hn(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=e(a),Ui(n,this,s)}}function oo(n,t){return er(rr(n,t,Ge),n+"")}function ao(n,t,e){if(!q(e))return!1;var r=typeof t;return(r=="number"?_t(e)&&De(t,e.length):r=="string"&&t in e)?Fe(e[t],n):!1}function ir(n){return oo(function(t,e){var r=-1,i=e.length,o=i>1?e[i-1]:void 0,a=i>2?e[2]:void 0;for(o=n.length>3&&typeof o=="function"?(i--,o):void 0,a&&ao(e[0],e[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=e[r];s&&n(t,s,r,o)}return t})}var uo=Object.prototype,so=uo.hasOwnProperty,yn=ir(function(n,t){if(kr(t)||_t(t)){Le(t,Qt(t),n);return}for(var e in t)so.call(t,e)&&Bn(n,e,t[e])}),gn=Bt?Bt.isConcatSpreadable:void 0;function co(n){return j(n)||$t(n)||!!(gn&&n&&n[gn])}function lo(n,t,e,r,i){var o=-1,a=n.length;for(e||(e=co),i||(i=[]);++o<a;){var s=n[o];e(s)?Mr(i,s):i[i.length]=s}return i}function fo(n){var t=n==null?0:n.length;return t?lo(n):[]}function Be(n){return er(rr(n,void 0,fo),n+"")}var po="[object Object]",vo=Function.prototype,ho=Object.prototype,or=vo.toString,yo=ho.hasOwnProperty,go=or.call(Object);function $e(n){if(!et(n)||Zt(n)!=po)return!1;var t=Ir(n);if(t===null)return!0;var e=yo.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&or.call(e)==go}function _o(n,t,e){var r=-1,i=n.length;t<0&&(t=-t>i?0:i+t),e=e>i?i:e,e<0&&(e+=i),i=t>e?0:e-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=n[r+t];return o}var mo=Nr.isFinite,Oo=Math.min;function xo(n){var t=Math[n];return function(e,r){if(e=Qn(e),r=r==null?0:Oo(Zn(r),292),r&&mo(e)){var i=(Qe(e)+"e").split("e"),o=t(i[0]+"e"+(+i[1]+r));return i=(Qe(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(e)}}var Ao=xo("ceil"),wo="__lodash_hash_undefined__";function Eo(n){return this.__data__.set(n,wo),this}function So(n){return this.__data__.has(n)}function St(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Gr;++t<e;)this.add(n[t])}St.prototype.add=St.prototype.push=Eo;St.prototype.has=So;function Co(n,t){for(var e=-1,r=n==null?0:n.length;++e<r;)if(t(n[e],e,n))return!0;return!1}function ar(n,t){return n.has(t)}var To=1,Po=2;function ur(n,t,e,r,i,o){var a=e&To,s=n.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(n),c=o.get(t);if(l&&c)return l==t&&c==n;var d=-1,p=!0,v=e&Po?new St:void 0;for(o.set(n,t),o.set(t,n);++d<s;){var f=n[d],h=t[d];if(r)var y=a?r(h,f,d,t,n,o):r(f,h,d,n,t,o);if(y!==void 0){if(y)continue;p=!1;break}if(v){if(!Co(t,function(g,_){if(!ar(v,_)&&(f===g||i(f,g,e,r,o)))return v.push(_)})){p=!1;break}}else if(!(f===h||i(f,h,e,r,o))){p=!1;break}}return o.delete(n),o.delete(t),p}function bo(n){var t=-1,e=Array(n.size);return n.forEach(function(r,i){e[++t]=[i,r]}),e}function Ue(n){var t=-1,e=Array(n.size);return n.forEach(function(r){e[++t]=r}),e}var Do=1,Fo=2,Lo="[object Boolean]",Ro="[object Date]",ko="[object Error]",Mo="[object Map]",Io="[object Number]",No="[object RegExp]",Go="[object Set]",jo="[object String]",Bo="[object Symbol]",$o="[object ArrayBuffer]",Uo="[object DataView]",_n=Bt?Bt.prototype:void 0,re=_n?_n.valueOf:void 0;function Ho(n,t,e,r,i,o,a){switch(e){case Uo:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case $o:return!(n.byteLength!=t.byteLength||!o(new Ze(n),new Ze(t)));case Lo:case Ro:case Io:return Fe(+n,+t);case ko:return n.name==t.name&&n.message==t.message;case No:case jo:return n==t+"";case Mo:var s=bo;case Go:var u=r&Do;if(s||(s=Ue),n.size!=t.size&&!u)return!1;var l=a.get(n);if(l)return l==t;r|=Fo,a.set(n,t);var c=ur(s(n),s(t),r,i,o,a);return a.delete(n),c;case Bo:if(re)return re.call(n)==re.call(t)}return!1}var Vo=1,zo=Object.prototype,Wo=zo.hasOwnProperty;function Yo(n,t,e,r,i,o){var a=e&Vo,s=Je(n),u=s.length,l=Je(t),c=l.length;if(u!=c&&!a)return!1;for(var d=u;d--;){var p=s[d];if(!(a?p in t:Wo.call(t,p)))return!1}var v=o.get(n),f=o.get(t);if(v&&f)return v==t&&f==n;var h=!0;o.set(n,t),o.set(t,n);for(var y=a;++d<u;){p=s[d];var g=n[p],_=t[p];if(r)var O=a?r(_,g,p,t,n,o):r(g,_,p,n,t,o);if(!(O===void 0?g===_||i(g,_,e,r,o):O)){h=!1;break}y||(y=p=="constructor")}if(h&&!y){var m=n.constructor,x=t.constructor;m!=x&&"constructor"in n&&"constructor"in t&&!(typeof m=="function"&&m instanceof m&&typeof x=="function"&&x instanceof x)&&(h=!1)}return o.delete(n),o.delete(t),h}var Xo=1,mn="[object Arguments]",On="[object Array]",kt="[object Object]",qo=Object.prototype,xn=qo.hasOwnProperty;function Ko(n,t,e,r,i,o){var a=j(n),s=j(t),u=a?On:tn(n),l=s?On:tn(t);u=u==mn?kt:u,l=l==mn?kt:l;var c=u==kt,d=l==kt,p=u==l;if(p&&fe(n)){if(!fe(t))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new At),a||$n(n)?ur(n,t,e,r,i,o):Ho(n,t,u,e,r,i,o);if(!(e&Xo)){var v=c&&xn.call(n,"__wrapped__"),f=d&&xn.call(t,"__wrapped__");if(v||f){var h=v?n.value():n,y=f?t.value():t;return o||(o=new At),i(h,y,e,r,o)}}return p?(o||(o=new At),Yo(n,t,e,r,i,o)):!1}function ee(n,t,e,r,i){return n===t?!0:n==null||t==null||!et(n)&&!et(t)?n!==n&&t!==t:Ko(n,t,e,r,ee,i)}var Qo=1,Zo=2;function Jo(n,t,e,r){var i=e.length,o=i;if(n==null)return!o;for(n=Object(n);i--;){var a=e[i];if(a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<o;){a=e[i];var s=a[0],u=n[s],l=a[1];if(a[2]){if(u===void 0&&!(s in n))return!1}else{var c=new At,d;if(!(d===void 0?ee(l,u,Qo|Zo,r,c):d))return!1}}return!0}function sr(n){return n===n&&!q(n)}function ta(n){for(var t=Qt(n),e=t.length;e--;){var r=t[e],i=n[r];t[e]=[r,i,sr(i)]}return t}function cr(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==void 0||n in Object(e))}}function ea(n){var t=ta(n);return t.length==1&&t[0][2]?cr(t[0][0],t[0][1]):function(e){return e===n||Jo(e,n,t)}}function na(n,t){return n!=null&&t in Object(n)}function ra(n,t,e){t=bt(t,n);for(var r=-1,i=t.length,o=!1;++r<i;){var a=Dt(t[r]);if(!(o=n!=null&&e(n,a)))break;n=n[a]}return o||++r!=i?o:(i=n==null?0:n.length,!!i&&jr(i)&&De(a,i)&&(j(n)||$t(n)))}function lr(n,t){return n!=null&&ra(n,t,na)}var ia=1,oa=2;function aa(n,t){return Un(n)&&sr(t)?cr(Dt(n),t):function(e){var r=N(e,n);return r===void 0&&r===t?lr(e,n):ee(t,r,ia|oa)}}function ua(n){return function(t){return t==null?void 0:t[n]}}function sa(n){return function(t){return Re(t,n)}}function ca(n){return Un(n)?ua(Dt(n)):sa(n)}function He(n){return typeof n=="function"?n:n==null?Ge:typeof n=="object"?j(n)?aa(n[0],n[1]):ea(n):ca(n)}function la(n,t,e,r){for(var i=-1,o=n==null?0:n.length;++i<o;){var a=n[i];t(r,a,e(a),n)}return r}function fa(n){return function(t,e,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[++i];if(e(o[u],u,o)===!1)break}return t}}var fr=fa();function da(n,t){return n&&fr(n,t,Qt)}function pa(n,t){return function(e,r){if(e==null)return e;if(!_t(e))return n(e,r);for(var i=e.length,o=-1,a=Object(e);++o<i&&r(a[o],o,a)!==!1;);return e}}var dr=pa(da);function va(n,t,e,r){return dr(n,function(i,o,a){t(r,i,e(i),a)}),r}function ha(n,t){return function(e,r){var i=j(e)?la:va,o=t?t():{};return i(e,n,He(r),o)}}function ye(n,t,e){(e!==void 0&&!Fe(n[t],e)||e===void 0&&!(t in n))&&Hn(n,t,e)}function ya(n){return et(n)&&_t(n)}function ge(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}function ga(n){return Le(n,Vn(n))}function _a(n,t,e,r,i,o,a){var s=ge(n,e),u=ge(t,e),l=a.get(u);if(l){ye(n,e,l);return}var c=o?o(s,u,e+"",n,t,a):void 0,d=c===void 0;if(d){var p=j(u),v=!p&&fe(u),f=!p&&!v&&$n(u);c=u,p||v||f?j(s)?c=s:ya(s)?c=jn(s):v?(d=!1,c=Br(u,!0)):f?(d=!1,c=$r(u,!0)):c=[]:$e(u)||$t(u)?(c=s,$t(s)?c=ga(s):(!q(s)||Jt(s))&&(c=Ur(u))):d=!1}d&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),ye(n,e,c)}function pr(n,t,e,r,i){n!==t&&fr(t,function(o,a){if(i||(i=new At),q(o))_a(n,t,a,e,pr,r,i);else{var s=r?r(ge(n,a),o,a+"",n,t,i):void 0;s===void 0&&(s=o),ye(n,a,s)}},Vn)}var ma=ir(function(n,t,e,r){pr(n,t,e,r)});function Oa(n){var t=n==null?0:n.length;return t?n[t-1]:void 0}var xa=Fi(function(n,t){return n/t},1);function Aa(n,t){var e=-1,r=_t(n)?Array(n.length):[];return dr(n,function(i,o,a){r[++e]=t(i,o,a)}),r}function yt(n,t){var e=j(n)?ke:Aa;return e(n,He(t))}var wa="Expected a function",Ea=8,Sa=32,Ca=128,Ta=256;function Pa(n){return Be(function(t){for(var e=t.length,r=e,i=nt.prototype.thru;r--;){var o=t[r];if(typeof o!="function")throw new TypeError(wa);if(i&&!a&&Nt(o)=="wrapper")var a=new nt([],!0)}for(r=a?r:e;++r<e;){o=t[r];var s=Nt(o),u=s=="wrapper"?tr(o):void 0;u&&vn(u[0])&&u[1]==(Ca|Ea|Sa|Ta)&&!u[4].length&&u[9]==1?a=a[Nt(u[0])].apply(a,u[3]):a=o.length==1&&vn(o)?a[s]():a.thru(o)}return function(){var l=arguments,c=l[0];if(a&&l.length==1&&j(c))return a.plant(c).value();for(var d=0,p=e?t[d].apply(this,l):c;++d<e;)p=t[d].call(this,p);return p}})}var F=Pa(),ba=Object.prototype,Da=ba.hasOwnProperty,vr=ha(function(n,t,e){Da.call(n,e)?n[e].push(t):Hn(n,e,[t])}),Fa="[object String]";function hr(n){return typeof n=="string"||!j(n)&&et(n)&&Zt(n)==Fa}function La(n,t){return ke(t,function(e){return n[e]})}function Ra(n){return n==null?[]:La(n,Qt(n))}var ka=Math.max;function Ma(n,t,e,r){n=_t(n)?n:Ra(n),e=e&&!r?Zn(e):0;var i=n.length;return e<0&&(e=ka(i+e,0)),hr(n)?e<=i&&n.indexOf(t,e)>-1:!!i&&nr(n,t,e)>-1}function Ia(n,t){return t.length<2?n:Re(n,_o(t,0,-1))}var Na="[object Boolean]";function Ve(n){return n===!0||n===!1||et(n)&&Zt(n)==Na}function An(n,t){return ee(n,t)}var Ga="[object Number]";function gt(n){return typeof n=="number"||et(n)&&Zt(n)==Ga}function ja(n){return n==null}function Ba(n){return n===void 0}function $a(n,t){return t=bt(t,n),n=Ia(n,t),n==null||delete n[Dt(Oa(t))]}function Ua(n){return $e(n)?void 0:n}var Ha=1,Va=2,za=4,ze=Be(function(n,t){var e={};if(n==null)return e;var r=!1;t=ke(t,function(o){return o=bt(o,n),r||(r=o.length>1),o}),Le(n,Hr(n),e),r&&(e=Vr(e,Ha|Va|za,Ua));for(var i=t.length;i--;)$a(e,t[i]);return e});function yr(n,t,e,r){if(!q(n))return n;t=bt(t,n);for(var i=-1,o=t.length,a=o-1,s=n;s!=null&&++i<o;){var u=Dt(t[i]),l=e;if(u==="__proto__"||u==="constructor"||u==="prototype")return n;if(i!=a){var c=s[u];l=void 0,l===void 0&&(l=q(c)?c:De(t[i+1])?[]:{})}Bn(s,u,l),s=s[u]}return n}function Wa(n,t,e){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Re(n,a);e(s,a)&&yr(o,bt(a,n),s)}return o}function Ya(n,t){return Wa(n,t,function(e,r){return lr(n,r)})}var gr=Be(function(n,t){return n==null?{}:Ya(n,t)});function A(n,t,e){return n==null?n:yr(n,t,e)}var Xa=1/0,qa=ne&&1/Ue(new ne([,-0]))[1]==Xa?function(n){return new ne(n)}:Jn,Ka=200;function Qa(n,t,e){var r=-1,i=io,o=n.length,a=!0,s=[],u=s;if(o>=Ka){var l=t?null:qa(n);if(l)return Ue(l);a=!1,i=ar,u=new St}else u=t?[]:s;t:for(;++r<o;){var c=n[r],d=t?t(c):c;if(c=c!==0?c:0,a&&d===d){for(var p=u.length;p--;)if(u[p]===d)continue t;t&&u.push(d),s.push(c)}else i(u,d,e)||(u!==s&&u.push(d),s.push(c))}return s}function ie(n,t){return n&&n.length?Qa(n,He(t)):[]}var Za=function(n){var t=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return t.test(n)},_e=function(){return _e=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_e.apply(this,arguments)},wn=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};function Ja(n,t){var e=J.useRef(),r=J.useRef(),i=J.useRef(null),o=t.onReady,a=t.onEvent,s=function(c,d){var p;c===void 0&&(c="image/png");var v=(p=i.current)===null||p===void 0?void 0:p.getElementsByTagName("canvas")[0];return v==null?void 0:v.toDataURL(c,d)},u=function(c,d,p){c===void 0&&(c="download"),d===void 0&&(d="image/png");var v=c;c.indexOf(".")===-1&&(v="".concat(c,".").concat(d.split("/")[1]));var f=s(d,p),h=document.createElement("a");return h.href=f,h.download=v,document.body.appendChild(h),h.click(),document.body.removeChild(h),h=null,v},l=function(c,d){d===void 0&&(d=!1);var p=Object.keys(c),v=d;p.forEach(function(f){var h=c[f];f==="tooltip"&&(v=!0),Jt(h)&&Za("".concat(h))?c[f]=function(){for(var y=[],g=0;g<arguments.length;g++)y[g]=arguments[g];return Si(h.apply(void 0,y),v)}:j(h)?h.forEach(function(y){l(y,v)}):q(h)?l(h,v):v=d})};return J.useEffect(function(){if(e.current&&!An(r.current,t)){var c=!1;if(r.current){var d=r.current;d.data;var p=wn(d,["data"]);t.data;var v=wn(t,["data"]);c=An(p,v)}r.current=en(t),c?e.current.changeData(N(t,"data")):(l(t),e.current.update(t),e.current.render())}},[t]),J.useEffect(function(){if(!i.current)return function(){return null};r.current||(r.current=en(t)),l(t);var c=new n(i.current,_e({},t));c.toDataURL=s,c.downloadImage=u,c.render(),e.current=c,o&&o(c);var d=function(p){a&&a(c,p)};return c.on("*",d),function(){e.current&&(e.current.destroy(),e.current.off("*",d),e.current=void 0)}},[]),{chart:e,container:i}}const tu={field:"value",size:[1,1],round:!1,padding:0,sort:(n,t)=>t.value-n.value,as:["x","y"],ignoreParentValue:!0},eu="nodeIndex",Ct="childNodeCount",nu="nodeAncestor",oe="Invalid field: it must be a string!";function ru(n,t){const{field:e,fields:r}=n;if(at(e))return e;if(de(e))return console.warn(oe),e[0];if(console.warn(`${oe} will try to get fields instead.`),at(r))return r;if(de(r)&&r.length)return r[0];throw new TypeError(oe)}function iu(n){const t=[];if(n&&n.each){let e,r;n.each(i=>{var o,a;i.parent!==e?(e=i.parent,r=0):r+=1;const s=zr((((o=i.ancestors)===null||o===void 0?void 0:o.call(i))||[]).map(u=>t.find(l=>l.name===u.name)||u),({depth:u})=>u>0&&u<i.depth);i[nu]=s,i[Ct]=((a=i.children)===null||a===void 0?void 0:a.length)||0,i[eu]=r,t.push(i)})}else n&&n.eachNode&&n.eachNode(e=>{t.push(e)});return t}function ou(n,t){t=gi({},tu,t);const e=t.as;if(!de(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=ru(t)}catch(u){console.warn(u)}const o=(u=>_i().size(t.size).round(t.round).padding(t.padding)(Wr(u).sum(l=>Yr(l.children)?t.ignoreParentValue?0:l[r]-Xr(l.children,(c,d)=>c+d[r],0):l[r]).sort(t.sort)))(n),a=e[0],s=e[1];return o.each(u=>{var l,c;u[a]=[u.x0,u.x1,u.x1,u.x0],u[s]=[u.y1,u.y1,u.y0,u.y0],u.name=u.name||((l=u.data)===null||l===void 0?void 0:l.name)||((c=u.data)===null||c===void 0?void 0:c.label),u.data.name=u.name,["x0","x1","y0","y1"].forEach(d=>{e.indexOf(d)===-1&&delete u[d]})}),iu(o)}var au=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const dt="sunburst",We="markType",_r="path",Vt="ancestor-node";function uu(n){const{data:t,encode:e}=n,{color:r,value:i}=e,a=ou(t,{field:i,type:"hierarchy.partition",as:["x","y"]}),s=[];return a.forEach(u=>{var l,c,d,p;if(u.depth===0)return null;let v=u.data.name;const f=[v];let h=Object.assign({},u);for(;h.depth>1;)v=`${(l=h.parent.data)===null||l===void 0?void 0:l.name} / ${v}`,f.unshift((c=h.parent.data)===null||c===void 0?void 0:c.name),h=h.parent;const y=Object.assign(Object.assign(Object.assign({},zn(u.data,[i])),{[_r]:v,[Vt]:h.data.name}),u);r&&r!==Vt&&(y[r]=u.data[r]||((p=(d=u.parent)===null||d===void 0?void 0:d.data)===null||p===void 0?void 0:p[r])),s.push(y)}),s.map(u=>{const l=u.x.slice(0,2),c=[u.y[2],u.y[0]];return l[0]===l[1]&&(c[0]=c[1]=(u.y[2]+u.y[0])/2),Object.assign(Object.assign({},u),{x:l,y:c,fillOpacity:Math.pow(.85,u.depth)})})}const En={id:dt,encode:{x:"x",y:"y",key:_r,color:Vt,value:"value"},axis:{x:!1,y:!1},style:{[We]:dt,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[Ct]:Ct,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},mr=n=>{const{encode:t,data:e=[],legend:r}=n,i=au(n,["encode","data","legend"]),o=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(Y(i,["coordinate","innerRadius"],.2),1e-5)}),a=Object.assign(Object.assign({},En.encode),t),{value:s}=a,u=uu({encode:a,data:e});return console.log(u,"rectData"),[Mt({},En,Object.assign(Object.assign({type:"rect",data:u,encode:a,tooltip:{title:"path",items:[l=>({name:s,value:l[s]})]}},i),{coordinate:o}))]};mr.props={};var su=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(n,t||[])).next())})};const cu=n=>n.querySelectorAll(".element").filter(t=>Y(t,["style",We])===dt);function lu(n){return Kr(n).select(`.${Qr}`).node()}const fu={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function du(n={}){const{breadCrumb:t={},isFixedColor:e=!1}=n,r=Mt({},fu,t);return i=>{const{update:o,setState:a,container:s,view:u,options:l}=i,c=s.ownerDocument,d=lu(s),p=l.marks.find(({id:O})=>O===dt),{state:v}=p,f=c.createElement("g");d.appendChild(f);const h=(O,m)=>su(this,void 0,void 0,function*(){if(f.removeChildren(),O){const x=c.createElement("text",{style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});f.appendChild(x);let L="";const P=O==null?void 0:O.split(" / ");let k=r.style.y,w=f.getBBox().width;const G=d.getBBox().width,b=P.map((C,$)=>{const S=c.createElement("text",{style:Object.assign(Object.assign({x:w,text:" / "},r.style),{y:k})});f.appendChild(S),w+=S.getBBox().width,L=`${L}${C} / `;const M=c.createElement("text",{name:L.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:C,x:w,depth:$+1},r.style),{y:k})});return f.appendChild(M),w+=M.getBBox().width,w>G&&(k=f.getBBox().height,w=0,S.attr({x:w,y:k}),w+=S.getBBox().width,M.attr({x:w,y:k}),w+=M.getBBox().width),M});[x,...b].forEach((C,$)=>{if($===b.length)return;const S=Object.assign({},C.attributes);C.attr("cursor","pointer"),C.addEventListener("mouseenter",()=>{C.attr(r.active)}),C.addEventListener("mouseleave",()=>{C.attr(S)}),C.addEventListener("click",()=>{h(C.name,Y(C,["style","depth"]))})})}a("drillDown",x=>{const{marks:L}=x,P=L.map(k=>{if(k.id!==dt&&k.type!=="rect")return k;const{data:w}=k,G=Object.fromEntries(["color"].map(C=>[C,{domain:u.scale[C].getOptions().domain}])),b=w.filter(C=>{const $=C.path;return e||(C[Vt]=$.split(" / ")[m]),O?new RegExp(`^${O}.+`).test($):!0});return Mt({},k,e?{data:b,scale:G}:{data:b})});return Object.assign(Object.assign({},x),{marks:P})}),yield o()}),y=O=>{const m=O.target;if(Y(m,["style",We])!==dt||Y(m,["markType"])!=="rect"||!Y(m,["style",Ct]))return;const x=Y(m,["__data__","key"]),L=Y(m,["style","depth"]);m.style.cursor="pointer",h(x,L)};d.addEventListener("click",y);const g=qr(Object.assign(Object.assign({},v.active),v.inactive)),_=()=>{cu(d).forEach(m=>{const x=Y(m,["style",Ct]);if(Y(m,["style","cursor"])!=="pointer"&&x){m.style.cursor="pointer";const P=zn(m.attributes,g);m.addEventListener("mouseenter",()=>{m.attr(v.active)}),m.addEventListener("mouseleave",()=>{m.attr(Mt(P,v.inactive))})}})};return d.addEventListener("mousemove",_),()=>{f.remove(),d.removeEventListener("click",y),d.removeEventListener("mousemove",_)}}}function pu(){return{"interaction.drillDown":du,"mark.sunburst":mr}}var zt=function(){return zt=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},zt.apply(this,arguments)},vu=Zr(ti,zt(zt({},Jr()),pu())),R=function(n){var t=yu(n),e=t.children,r=e===void 0?[]:e,i=ze(t,[].concat(Or,Wt.map(function(l){return l.key}))),o=function(l){var c;return(c=xu.find(function(d){return d.key===l}))===null||c===void 0?void 0:c.callback},a=function(l,c,d){var p=o(c);p?p(l,c,d):l[c]=tt({},l[c],d)},s=function(l){Object.keys(l).forEach(function(c){if(l[c]){var d=Wt.find(function(f){return f.key===c});if(d){var p=d.type,v=d.extend_keys;p?r.push(u(tt({},gr(l,v),{type:p},l[c]))):j(l[c])&&l[c].forEach(function(f){r.push(u(f))})}}})},u=function(l){return s(l),Object.keys(Oe).forEach(function(c){var d=Oe[c];if(!Ba(l[c]))if(q(d)){var p=d.value,v=d.target,f=p(l[c]);a(l,v,f)}else A(l,d,l[c])}),l};return r.forEach(function(l){var c=tt({},i,l);u(tt(l,c))}),s(t),hu(t),n},Sn=function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))},hu=function(n){var t=n.children,e=t===void 0?[]:t,r=Object.keys(Oe).concat(Wt.map(function(i){return i.key}));return r.forEach(function(i){delete n[i]}),e.forEach(function(i){Object.keys(i).forEach(function(o){r.includes(o)&&delete i[o]})}),Object.keys(n).forEach(function(i){Sn(Sn([],Or,!0),xe.map(function(o){return o.key}),!0).includes(i)||delete n[i]}),n},yu=function(n){var t=n.options,e=t.children,r=e===void 0?[]:e;return r.forEach(function(i){Object.keys(i).forEach(function(o){j(i[o])&&o!=="data"&&(i[o]=i[o].filter(function(a){return!a[me]}))})}),t},Cn=function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))},gu=function(n,t){if(j(t))return t},tt=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return ma.apply(void 0,Cn(Cn([],n,!1),[gu],!1))};function Tt(n){switch(typeof n){case"function":return n;case"string":return function(t){return N(t,[n])};default:return function(){return n}}}var Pt=function(){return Pt=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Pt.apply(this,arguments)},_u=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},mu=["renderer"],Or=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],me="__transform__",Ou="__skipDelCustomKeys__",rt=function(n,t){return Ve(t)?{type:n,available:t}:Pt({type:n},t)},Oe={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(n){return rt("stackY",n)}},normalize:{target:"transform",value:function(n){return rt("normalizeY",n)}},percent:{target:"transform",value:function(n){return rt("normalizeY",n)}},group:{target:"transform",value:function(n){return rt("dodgeX",n)}},sort:{target:"transform",value:function(n){return rt("sortX",n)}},symmetry:{target:"transform",value:function(n){return rt("symmetryY",n)}},diff:{target:"transform",value:function(n){return rt("diffY",n)}},meta:{target:"scale",value:function(n){return n}},label:{target:"labels",value:function(n){return n}},shape:"style.shape",connectNulls:{target:"style",value:function(n){return Ve(n)?{connect:n}:n}}},ae=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],Wt=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:ae},{key:"point",type:"point",extend_keys:ae},{key:"area",type:"area",extend_keys:ae}],xu=[{key:"transform",callback:function(n,t,e){var r;n[t]=n[t]||[];var i=e.available,o=i===void 0?!0:i,a=_u(e,["available"]);if(o)n[t].push(Pt((r={},r[me]=!0,r),a));else{var s=n[t].indexOf(function(u){return u.type===e.type});s!==-1&&n[t].splice(s,1)}}},{key:"labels",callback:function(n,t,e){var r;if(!e||j(e)){n[t]=e||[];return}e.text||(e.text=n.yField),n[t]=n[t]||[],n[t].push(Pt((r={},r[me]=!0,r),e))}}],xe=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],Au=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yt=function(){return Yt=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Yt.apply(this,arguments)},wu=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},xr=function(n){Au(t,n);function t(e){e===void 0&&(e={});var r=e.style,i=wu(e,["style"]);return n.call(this,Yt({style:Yt({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},i))||this}return t}(ei),Eu=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xt=function(){return Xt=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Xt.apply(this,arguments)},Su=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},Cu=function(n){Eu(t,n);function t(e){e===void 0&&(e={});var r=e.style,i=Su(e,["style"]);return n.call(this,Xt({style:Xt({fill:"#eee"},r)},i))||this}return t}(ni),Tu=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ar=function(n){Tu(t,n);function t(e,r,i){var o=n.call(this,{style:tt(i,r)})||this;return o.chart=e,o}return t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},t.prototype.disconnectedCallback=function(){},t.prototype.attributeChangedCallback=function(e){},t.prototype.update=function(e,r){var i;return this.attr(tt({},this.attributes,e||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.getElementsLayout=function(){var e=this.chart.getContext().canvas,r=e.document.getElementsByClassName("element"),i=[];return r.forEach(function(o){var a=o.getBBox(),s=a.x,u=a.y,l=a.width,c=a.height,d=o.__data__;i.push({bbox:a,x:s,y:u,width:l,height:c,key:d.key,data:d})}),i},t.prototype.bindEvents=function(e,r){},t}(ri),Pu=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qt=function(){return qt=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},qt.apply(this,arguments)},bu=function(n){Pu(t,n);function t(e,r){return n.call(this,e,r,{type:t.tag})||this}return t.prototype.getConversionTagLayout=function(){var e=this.direction==="vertical",r=this.getElementsLayout(),i=r[0],o=i.x,a=i.y,s=i.height,u=i.width,l=i.data,c=["items",0,"value"],d=N(l,c),p=e?r[1].y-a-s:r[1].x-o-u,v=[],f=this.attributes,h=f.size,y=h===void 0?40:h,g=f.arrowSize,_=g===void 0?20:g,O=f.spacing,m=O===void 0?4:O;return r.forEach(function(x,L){if(L>0){var P=x.x,k=x.y,w=x.height,G=x.width,b=x.data,C=x.key,$=N(b,c),S=y/2;if(e){var M=P+G/2,I=k;v.push({points:[[M+S,I-p+m],[M+S,I-_-m],[M,I-m],[M-S,I-_-m],[M-S,I-p+m]],center:[M,I-p/2-m],width:p,value:[d,$],key:C})}else{var M=P,I=k+w/2;v.push({points:[[P-p+m,I-S],[P-_-m,I-S],[M-m,I],[P-_-m,I+S],[P-p+m,I+S]],center:[M-p/2-m,I],width:p,value:[d,$],key:C})}d=$}}),v},t.prototype.render=function(){this.setDirection(),this.drawConversionTag()},t.prototype.setDirection=function(){var e=this.chart.getCoordinate(),r=N(e,"options.transformations"),i="horizontal";r.forEach(function(o){o.includes("transpose")&&(i="vertical")}),this.direction=i},t.prototype.drawConversionTag=function(){var e=this,r=this.getConversionTagLayout(),i=this.attributes,o=i.style,a=i.text,s=a.style,u=a.formatter;r.forEach(function(l){var c=l.points,d=l.center,p=l.value,v=l.key,f=p[0],h=p[1],y=d[0],g=d[1],_=new Cu({style:qt({points:c,fill:"#eee"},o),id:"polygon-".concat(v)}),O=new xr({style:qt({x:y,y:g,text:Jt(u)?u(f,h):(h/f*100).toFixed(2)+"%"},s),id:"text-".concat(v)});e.appendChild(_),e.appendChild(O)})},t.prototype.update=function(){var e=this,r=this.getConversionTagLayout();r.forEach(function(i){var o=i.points,a=i.center,s=i.key,u=a[0],l=a[1],c=e.getElementById("polygon-".concat(s)),d=e.getElementById("text-".concat(s));c.setAttribute("points",o),d.setAttribute("x",u),d.setAttribute("y",l)})},t.tag="ConversionTag",t}(Ar),Ae=32,Tn=16,Pn=48,Du=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wt=function(){return wt=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},wt.apply(this,arguments)},Fu=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},Lu=function(n){Du(t,n);function t(e,r){return n.call(this,e,r,{type:t.tag})||this}return t.prototype.render=function(){this.drawText()},t.prototype.getBidirectionalBarAxisTextLayout=function(){var e=this.attributes.layout,r=e==="vertical",i=this.getElementsLayout(),o=r?ie(i,"x"):ie(i,"y"),a=["title"],s=[],u=this.chart.getContext().views,l=N(u,[0,"layout"]),c=l.width,d=l.height;return o.forEach(function(p){var v=p.x,f=p.y,h=p.height,y=p.width,g=p.data,_=p.key,O=N(g,a);r?s.push({x:v+y/2,y:d,text:O,key:_}):s.push({x:c,y:f+h/2,text:O,key:_})}),ie(s,"text").length!==s.length&&(s=Object.values(vr(s,"text")).map(function(p){var v,f=p.reduce(function(h,y){return h+(r?y.x:y.y)},0);return wt(wt({},p[0]),(v={},v[r?"x":"y"]=f/p.length,v))})),s},t.prototype.transformLabelStyle=function(e){var r={},i=/^label[A-Z]/;return Object.keys(e).forEach(function(o){i.test(o)&&(r[o.replace("label","").replace(/^[A-Z]/,function(a){return a.toLowerCase()})]=e[o])}),r},t.prototype.drawText=function(){var e=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,o=i.layout,a=i.labelFormatter,s=Fu(i,["layout","labelFormatter"]);r.forEach(function(u){var l=u.x,c=u.y,d=u.text,p=u.key,v=new xr({style:wt({x:l,y:c,text:Jt(a)?a(d):d,wordWrap:!0,wordWrapWidth:o==="horizontal"?Ae*2:120,maxLines:2,textOverflow:"ellipsis"},e.transformLabelStyle(s)),id:"text-".concat(p)});e.appendChild(v)})},t.prototype.update=function(){var e=this,r=this.getBidirectionalBarAxisTextLayout();r.forEach(function(i){var o=i.x,a=i.y,s=i.key,u=e.getElementById("text-".concat(s));u.setAttribute("x",o),u.setAttribute("y",a)})},t.tag="BidirectionalBarAxisText",t}(Ar),Ru={ConversionTag:bu,BidirectionalBarAxisText:Lu},ku=function(){function n(t,e){this.container=new Map,this.chart=t,this.config=e,this.init()}return n.prototype.init=function(){var t=this;xe.forEach(function(e){var r,i=e.key,o=e.shape,a=t.config[i];if(a){var s=new Ru[o](t.chart,a),u=t.chart.getContext().canvas;u.appendChild(s),t.container.set(i,s)}else(r=t.container.get(i))===null||r===void 0||r.clear()})},n.prototype.update=function(){var t=this;this.container.size&&xe.forEach(function(e){var r=e.key,i=t.container.get(r);i==null||i.update()})},n}(),Mu=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ct=function(){return ct=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ct.apply(this,arguments)},bn="data-chart-source-type",T=function(n){Mu(t,n);function t(e,r){var i=n.call(this)||this;return i.container=typeof e=="string"?document.getElementById(e):e,i.options=i.mergeOption(r),i.createG2(),i.bindEvents(),i}return t.prototype.getChartOptions=function(){return ct(ct({},gr(this.options,mu)),{container:this.container})},t.prototype.getSpecOptions=function(){return this.type==="base"||this[Ou]?ct(ct({},this.options),this.getChartOptions()):this.options},t.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new vu(this.getChartOptions()),this.container.setAttribute(bn,"Ant Design Charts")},t.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&e.emit(r.type,r)})},t.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},t.prototype.getDefaultOptions=function(){},t.prototype.render=function(){var e=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){e.annotation=new ku(e.chart,e.options)}),this.bindSizeSensor()},t.prototype.update=function(e){this.options=this.mergeOption(e)},t.prototype.mergeOption=function(e){return tt({},this.getBaseOptions(),this.getDefaultOptions(),e)},t.prototype.changeData=function(e){this.chart.changeData(e)},t.prototype.changeSize=function(e,r){this.chart.changeSize(e,r)},t.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(bn)},t.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor();e({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var e=this,r=this.options.autoFit,i=r===void 0?!0:r;i&&this.chart.on(ii.AFTER_CHANGE_SIZE,function(){e.annotation.update()})},t}(oi),Iu=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nu=function(n){Iu(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="base",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return function(e){return e}},t}(T),we=function(){return we=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},we.apply(this,arguments)};function Gu(n){var t=n.options,e=t.stack,r=t.tooltip,i=t.xField;if(!e)return n;var o=Wt.map(function(s){return s.type}).filter(function(s){return!!s}),a=!1;return o.forEach(function(s){t[s]&&(a=!0,A(t,[s,"stack"],we({y1:"y"},typeof e=="object"?e:{})))}),a&&!Ve(r)&&!r&&A(t,"tooltip",{title:i,items:[{channel:"y"}]}),n}function B(n){return F(Gu)(n)}function ju(n){var t=n.options.layout,e=t===void 0?"horizontal":t;return n.options.coordinate.transform=e!=="horizontal"?void 0:[{type:"transpose"}],n}function Bu(n){ju(n);var t=n.options.layout,e=t===void 0?"horizontal":t;return n.options.children.forEach(function(r){var i;!((i=r==null?void 0:r.coordinate)===null||i===void 0)&&i.transform&&(r.coordinate.transform=e!=="horizontal"?void 0:[{type:"transpose"}])}),n}function $u(n){return F(B,R)(n)}var Uu=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hu=function(n){Uu(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="area",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return $u},t}(T),lt=function(){return lt=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},lt.apply(this,arguments)};function wr(n){var t=function(e){var r=e.options;N(r,"children.length")>1&&A(r,"children",[{type:"interval"}]);var i=r.scale,o=r.markBackground,a=r.data,s=r.children,u=r.yField,l=N(i,"y.domain",[]);if(o&&l.length&&j(a)){var c="domainMax",d=a.map(function(p){var v;return lt(lt({originData:lt({},p)},ze(p,u)),(v={},v[c]=l[l.length-1],v))});s.unshift(lt({type:"interval",data:d,yField:c,tooltip:!1,style:{fill:"#eee"},label:!1},o))}return e};return F(t,B,R)(n)}var Vu=function(){var n=function(t,e){return function(r){var i=t.fill,o=i===void 0?"#2888FF":i,a=t.stroke,s=t.fillOpacity,u=s===void 0?1:s,l=t.strokeOpacity,c=l===void 0?.2:l,d=t.pitch,p=d===void 0?8:d,v=r[0],f=r[1],h=r[2],y=r[3],g=(f[1]-v[1])/2,_=e.document,O=_.createElement("g",{}),m=_.createElement("polygon",{style:{points:[v,[v[0]-p,v[1]+g],[h[0]-p,v[1]+g],y],fill:o,fillOpacity:u,stroke:a,strokeOpacity:c,inset:30}}),x=_.createElement("polygon",{style:{points:[[v[0]-p,v[1]+g],f,h,[h[0]-p,v[1]+g]],fill:o,fillOpacity:u,stroke:a,strokeOpacity:c}}),L=_.createElement("polygon",{style:{points:[v,[v[0]-p,v[1]+g],f,[v[0]+p,v[1]+g]],fill:o,fillOpacity:u-.2}});return O.appendChild(m),O.appendChild(x),O.appendChild(L),O}};Wn("shape.interval.bar25D",n)},zu=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Vu();var Wu=function(n){zu(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="Bar",e}return t.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return wr},t}(T),Yu=function(){var n=function(t,e){return function(r){var i=t.fill,o=i===void 0?"#2888FF":i,a=t.stroke,s=t.fillOpacity,u=s===void 0?1:s,l=t.strokeOpacity,c=l===void 0?.2:l,d=t.pitch,p=d===void 0?8:d,v=r[1][0]-r[0][0],f=v/2+r[0][0],h=e.document,y=h.createElement("g",{}),g=h.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[f,r[1][1]+p],[f,r[3][1]+p],[r[3][0],r[3][1]]],fill:o,fillOpacity:u,stroke:a,strokeOpacity:c,inset:30}}),_=h.createElement("polygon",{style:{points:[[f,r[1][1]+p],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[f,r[2][1]+p]],fill:o,fillOpacity:u,stroke:a,strokeOpacity:c}}),O=h.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[f,r[1][1]-p],[r[1][0],r[1][1]],[f,r[1][1]+p]],fill:o,fillOpacity:u-.2}});return y.appendChild(_),y.appendChild(g),y.appendChild(O),y}};Wn("shape.interval.column25D",n)},Xu=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Yu();var qu=function(n){Xu(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="column",e}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return wr},t}(T);function Ku(n){var t=function(r){var i=r.options,o=i.children,a=o===void 0?[]:o,s=i.legend;return s&&a.forEach(function(u){if(!N(u,"colorField")){var l=N(u,"yField");A(u,"colorField",function(){return l})}}),r},e=function(r){var i=r.options,o=i.annotations,a=o===void 0?[]:o,s=i.children,u=s===void 0?[]:s,l=i.scale,c=!1;return N(l,"y.key")||u.forEach(function(d,p){if(!N(d,"scale.y.key")){var v="child".concat(p,"Scale");A(d,"scale.y.key",v);var f=d.annotations,h=f===void 0?[]:f;h.length>0&&(A(d,"scale.y.independent",!1),h.forEach(function(y){A(y,"scale.y.key",v)})),!c&&a.length>0&&N(d,"scale.y.independent")===void 0&&(c=!0,A(d,"scale.y.independent",!1),a.forEach(function(y){A(y,"scale.y.key",v)}))}}),r};return F(t,e,B,R)(n)}var Qu=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dn=function(n){Qu(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="DualAxes",e}return t.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ku},t}(T);function Zu(n){var t=function(o){var a=o.options,s=a.xField,u=a.colorField;return u||A(a,"colorField",s),o},e=function(o){var a=o.options,s=a.compareField,u=a.transform,l=a.isTransposed,c=l===void 0?!0:l,d=a.coordinate;return u||(s?A(a,"transform",[]):A(a,"transform",[{type:"symmetryY"}])),!d&&c&&A(a,"coordinate",{transform:[{type:"transpose"}]}),o},r=function(o){var a=o.options,s=a.compareField,u=a.seriesField,l=a.data,c=a.children,d=a.yField,p=a.isTransposed,v=p===void 0?!0:p;if(s||u){var f=Object.values(vr(l,function(h){return h[s||u]}));c[0].data=f[0],c.push({type:"interval",data:f[1],yField:function(h){return-h[d]}}),delete a.compareField,delete a.data}return u&&(A(a,"type","spaceFlex"),A(a,"ratio",[1,1]),A(a,"direction",v?"row":"col"),delete a.seriesField),o},i=function(o){var a=o.options,s=a.tooltip,u=a.xField,l=a.yField;return s||A(a,"tooltip",{title:!1,items:[function(c){return{name:c[u],value:c[l]}}]}),o};return F(t,e,r,i,B,R)(n)}var Ju=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ts=function(n){Ju(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="column",e}return t.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Zu},t}(T);function es(n){return F(B,R)(n)}var ns=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rs=function(n){ns(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="line",e}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return es},t}(T),Z=function(){return Z=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Z.apply(this,arguments)};function is(n){var t=function(e){var r=e.options,i=r.angleField,o=r.data,a=r.label,s=r.tooltip,u=r.colorField,l=Tt(u);if(j(o)){var c=o.reduce(function(p,v){return p+v[i]},0);if(c===0){var d=o.map(function(p){var v;return Z(Z({},p),(v={},v[i]=1,v))});A(r,"data",d),a&&A(r,"label",Z(Z({},a),{formatter:function(){return 0}})),s!==!1&&A(r,"tooltip",Z(Z({},s),{items:[function(p,v,f){return{name:l(p,v,f),value:0}}]}))}}return e};return F(t,R)(n)}var os=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),as=function(n){os(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="pie",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return is},t}(T);function us(n){return F(B,R)(n)}var ss=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cs=function(n){ss(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="scatter",e}return t.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return us},t}(T);function ls(n){var t=function(e){return A(e,"options.coordinate",{type:N(e,"options.coordinateType","polar")}),e};return F(t,R)(n)}var fs=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ds=function(n){fs(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="radar",e}return t.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ls},t}(T),Q=function(){return Q=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Q.apply(this,arguments)},ps="__stock-range__",vs="trend",hs="up",ys="down";function gs(n){var t=function(r){var i=r.options,o=i.data,a=i.yField;return r.options.data=yt(o,function(s){var u=s&&Q({},s);if(Array.isArray(a)&&u){var l=a[0],c=a[1],d=a[2],p=a[3];u[vs]=u[l]<=u[c]?hs:ys,u[ps]=[u[l],u[c],u[d],u[p]]}return u}),r},e=function(r){var i=r.options,o=i.xField,a=i.yField,s=i.fallingFill,u=i.risingFill,l=a[0],c=a[1],d=a[2],p=a[3],v=Tt(o);return r.options.children=yt(r.options.children,function(f,h){var y=h===0;return Q(Q({},f),{tooltip:{title:function(g,_,O){var m=v(g,_,O);return m instanceof Date?m.toLocaleString():m},items:[{field:d},{field:p},{field:l},{field:c}]},encode:Q(Q({},f.encode||{}),{y:y?[d,p]:[l,c],color:function(g){return Math.sign(g[c]-g[l])}}),style:Q(Q({},f.style||{}),{lineWidth:y?1:10})})}),delete i.yField,r.options.legend={color:!1},s&&A(r,"options.scale.color.range[0]",s),u&&A(r,"options.scale.color.range[2]",u),r};return F(t,e,R)(n)}var _s=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ms=["#26a69a","#999999","#ef5350"],Os=function(n){_s(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="stock",e}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:ms},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return gs},t}(T);function xs(n){return F(B,R)(n)}var As=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ws=function(n){As(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="TinyLine",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return xs},t}(T);function Es(n){return F(B,R)(n)}var Ss=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cs=function(n){Ss(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="TinyArea",e}return t.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Es},t}(T);function Ts(n){return F(B,R)(n)}var Ps=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bs=function(n){Ps(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="TinyColumn",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ts},t}(T),Ee=function(){return Ee=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ee.apply(this,arguments)};function Ds(n){var t=function(e){var r=e.options,i=r.percent,o=r.color,a=o===void 0?[]:o;if(!i)return e;var s={scale:{color:{range:a.length?a:[]}},data:[1,i]};return Object.assign(r,Ee({},s)),e};return F(t,B,R)(n)}var Fs=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ls=function(n){Fs(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="TinyProgress",e}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(e){return e},color:function(e,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ds},t}(T),Se=function(){return Se=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Se.apply(this,arguments)};function Rs(n){var t=function(r){var i=r.options,o=i.radius,a=o===void 0?.8:o;return A(r,"options.coordinate.innerRadius",a),r},e=function(r){var i=r.options,o=i.percent,a=i.color,s=a===void 0?[]:a;if(!o)return r;var u={scale:{color:{range:s.length?s:[]}},data:[1,o]};return Object.assign(i,Se({},u)),r};return F(t,e,B,R)(n)}var ks=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ms=function(n){ks(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="TinyRing",e}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(e){return e},color:function(e,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Rs},t}(T);function Is(n){return F(R)(n)}var Ns=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gs=function(n){Ns(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="rose",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Is},t}(T),ue="__start__",ut="__end__",Ce="__waterfall_value__",Te=function(){return Te=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Te.apply(this,arguments)},js=function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))};function Bs(n){var t=function(r){var i=r.options,o=i.data,a=o===void 0?[]:o,s=i.yField;return a.length&&(a.reduce(function(u,l,c){var d,p=Tt(s),v=p(l,c,a);if(c===0||l.isTotal)l[ue]=0,l[ut]=v,l[Ce]=v;else{var f=(d=u[ut])!==null&&d!==void 0?d:p(u,c,a);l[ue]=f,l[ut]=f+v,l[Ce]=u[ut]}return l},[]),Object.assign(i,{yField:[ue,ut]})),r},e=function(r){var i=r.options,o=i.data,a=o===void 0?[]:o,s=i.xField,u=i.children,l=i.linkStyle,c=js([],a,!0);return c.reduce(function(d,p,v){return v>0&&(p.x1=d[s],p.x2=p[s],p.y1=d[ut]),p},[]),c.shift(),u.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:c,style:Te({stroke:"#697474"},l),label:!1,tooltip:!1}),r};return F(t,e,B,R)(n)}var $s=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Us=function(n){$s(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="waterfall",e}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:Ce,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Bs},t}(T);function Hs(n){var t=function(e){var r=e.options,i=r.data,o=r.binNumber,a=r.binWidth,s=r.children,u=r.channel,l=u===void 0?"count":u,c=N(s,"[0].transform[0]",{});return gt(a)?(yn(c,{thresholds:Ao(xa(i.length,a)),y:l}),e):(gt(o)&&yn(c,{thresholds:o,y:l}),e)};return F(t,B,R)(n)}var Vs=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zs=function(n){Vs(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="Histogram",e}return t.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Hs},t}(T);function Ws(n){var t=function(r){var i=r.options,o=i.tooltip,a=o===void 0?{}:o,s=i.colorField,u=i.sizeField;return a&&!a.field&&(a.field=s||u),r},e=function(r){var i=r.options,o=i.mark,a=i.children;return o&&(a[0].type=o),r};return F(t,e,B,R)(n)}var Ys=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xs=function(n){Ys(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="heatmap",e}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlight:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ws},t}(T);function qs(n){var t=function(e){var r=e.options.boxType,i=r===void 0?"box":r;return e.options.children[0].type=i,e};return F(t,B,R)(n)}var Ks=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qs=function(n){Ks(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="box",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return qs},t}(T);function Zs(n){var t=function(e){var r=e.options,i=r.data,o=[{type:"custom",callback:function(s){return{links:s}}}];if(j(i))i.length>0?A(r,"data",{value:i,transform:o}):delete r.children;else if(N(i,"type")==="fetch"&&N(i,"value")){var a=N(i,"transform");j(a)?A(i,"transform",a.concat(o)):A(i,"transform",o)}return e};return F(t,B,R)(n)}var Js=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tc=function(n){Js(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="sankey",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Zs},t}(T),z=function(){return z=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},z.apply(this,arguments)},Gt=["#f0efff","#5B8FF9","#3D76DD"];function se(n,t,e,r){r===void 0&&(r=!0);var i=0,o=!1,a=yt(n,function(s){var u,l,c=N(s,[t]);if(ja(c))return[];if(hr(c)){var d=Number(c);return isNaN(d)?[]:(u={},u[e]=s[e],u[t]=d,u)}return j(c)?(o=!0,i=Math.max(i,c.length),yt(r?c.sort(function(p,v){return v-p}):c,function(p,v){var f;return f={},f[e]=s[e],f[t]=p,f.index=v,f})):(i=Math.max(1,i),l={},l[e]=s[e],l[t]=c,l)}).flat();return o?[a.map(function(s){return z({index:0},s)}),i]:[a,i]}function ce(n,t){return new Array(n).fill("").map(function(e,r){return j(t)?t[r%t.length]:t})}function ec(n){var t=function(i){var o=i.options,a=o.color,s=o.rangeField,u=s===void 0?"ranges":s,l=o.measureField,c=l===void 0?"measures":l,d=o.targetField,p=d===void 0?"targets":d,v=o.xField,f=v===void 0?"title":v,h=o.mapField,y=o.data,g=se(y,u,f),_=g[0],O=g[1],m=se(y,c,f,!1),x=m[0],L=m[1],P=se(y,p,f,!1),k=P[0],w=P[1],G=N(a,[u],Gt[0]),b=N(a,[c],Gt[1]),C=N(a,[p],Gt[2]),$=[ce(O,G),ce(L,b),ce(w,C)].flat();return i.options.children=yt(i.options.children,function(S,M){var I=[_,x,k][M],K=[u,c,p][M];return z(z({},S),{data:I,encode:z(z({},S.encode||{}),{x:f,y:K,color:function(H){var Ot=H.index,Lt=gt(Ot)?"".concat(K,"_").concat(Ot):K;return h?N(h,[K,Ot],Lt):Lt}}),style:z(z({},S.style||{}),{zIndex:function(H){return-H[K]}}),labels:M!==0?yt(S.labels,function(H){return z(z({},H),{text:K})}):void 0})}),i.options.scale.color.range=$,i.options.legend.color.itemMarker=function(S){return h&&Ma(h==null?void 0:h[p],S)||(S==null?void 0:S.replace(/\_\d$/,""))===p?"line":"square"},i},e=function(i){var o=i.options.layout,a=o===void 0?"horizontal":o;return a!=="horizontal"&&A(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var o=i.options,a=o.range,s=a===void 0?{}:a,u=o.measure,l=u===void 0?{}:u,c=o.target,d=c===void 0?{}:c,p=o.children;return i.options.children=[s,l,d].map(function(v,f){return tt(p[f],v)}),i};return F(t,e,r,Bu,R)(n)}var nc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rc=function(n){nc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="bullet",e}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{range:Gt}},legend:{color:{itemMarker:function(e){return e==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ec},t}(T);function ic(n){var t=function(e){var r=e.options.data;return e.options.data={value:r},e};return F(t,B,R)(n)}var oc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ac=function(n){oc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="Gauge",e}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ic},t}(T);function uc(n){var t=function(e){var r=e.options.percent;return gt(r)&&A(e,"options.data",r),e};return F(t,B,R)(n)}var sc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cc=function(n){sc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="Liquid",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return uc},t}(T);function lc(n){return F(B,R)(n)}var fc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dc=function(n){fc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="WordCloud",e}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return lc},t}(T);function pc(n){var t=function(e){var r=e.options,i=r.data;return i&&A(r,"data",{value:i}),e};return F(t,B,R)(n)}var vc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hc=function(n){vc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="treemap",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return pc},t}(T),it=function(){return it=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},it.apply(this,arguments)};function yc(n){var t=function(i){var o=i.options,a=o.startAngle,s=o.maxAngle,u=o.coordinate,l=gt(a)?a/(2*Math.PI)*360:-90,c=gt(s)?(Number(s)+l)/180*Math.PI:Math.PI;return A(i,["options","coordinate"],it(it({},u),{endAngle:c,startAngle:a??-Math.PI/2})),i},e=function(i){var o=i.options,a=o.tooltip,s=o.xField,u=o.yField,l=Tt(s),c=Tt(u);return a||A(o,"tooltip",{title:!1,items:[function(d,p,v){return{name:l(d,p,v),value:c(d,p,v)}}]}),i},r=function(i){var o=i.options,a=o.markBackground,s=o.children,u=o.scale,l=o.coordinate,c=o.xField,d=N(u,"y.domain",[]);return a&&s.unshift(it({type:"interval",xField:c,yField:d[d.length-1],colorField:a.color,scale:{color:{type:"identity"}},style:{fillOpacity:a.opacity,fill:a.color?void 0:"#e0e4ee"},coordinate:it(it({},l),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},a)),i};return F(t,e,r,B,R)(n)}var gc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_c=function(n){gc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="radial",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return yc},t}(T);function mc(n){return F(R)(n)}var Oc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xc=function(n){Oc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="CirclePacking",e}return t.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mc},t}(T),Kt=function(){return Kt=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Kt.apply(this,arguments)};function Ac(n){var t=function(e){var r=e.options,i=r.xField,o=r.yField,a=r.seriesField,s=r.children,u=s==null?void 0:s.map(function(l){return Kt(Kt({},l),{xField:i,yField:o,seriesField:a,colorField:a,data:l.type==="density"?{transform:[{type:"kde",field:o,groupBy:[i,a]}]}:l.data})}).filter(function(l){return r.violinType!=="density"||l.type==="density"});return A(r,"children",u),r.violinType==="polar"&&A(r,"coordinate",{type:"polar"}),A(r,"violinType",void 0),e};return F(t,B,R)(n)}var wc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ec=function(n){wc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="violin",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ac},t}(T),Et=function(){return Et=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Et.apply(this,arguments)},Sc=function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))};function Cc(n){var t=function(o){var a=o.options,s=a.yField,u=a.children;return u.forEach(function(l,c){A(l,"yField",s[c])}),o},e=function(o){var a=o.options,s=a.yField,u=a.children,l=a.data;if($e(l))return o;var c=j(N(l,[0]))?l:[l,l];return u.forEach(function(d,p){A(d,"data",Sc([],c[p].map(function(v){return Et({groupKey:s[p]},v)}),!0))}),o},r=function(o){var a=o.options,s=a.yField,u=s[0],l=s[1],c=a.tooltip;return c||A(a,"tooltip",{items:[{field:u,value:u},{field:l,value:l}]}),o},i=function(o){var a=o.options,s=a.children,u=a.layout,l=a.coordinate.transform,c=a.paddingBottom,d=c===void 0?Pn:c,p=a.paddingLeft,v=p===void 0?Pn:p,f=a.axis;A(a,"axisText",Et(Et({},(f==null?void 0:f.x)||{}),{layout:u}));var h=s[0],y=s[1];if(u==="vertical")A(a,"direction","col"),A(a,"paddingLeft",v),A(a,"coordinate.transform",l.filter(function(x){return x.type!=="transpose"})),A(h,"paddingBottom",Tn),A(y,"paddingTop",Tn),A(y,"axis",{x:{position:"top"}}),A(y,"scale",{y:{range:[0,1]}});else{A(a,"paddingBottom",d),A(h,"scale",{y:{range:[0,1]}});var g=h.paddingRight,_=g===void 0?Ae:g,O=y.paddingLeft,m=O===void 0?Ae:O;A(h,"paddingRight",_),A(h,"axis",{x:{position:"right"}}),A(y,"paddingLeft",m)}return o};return F(t,e,r,i,B,R)(n)}var Tc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pc=function(n){Tc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="BidirectionalBar",e}return t.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Cc},t}(T),ot;(function(n){n.color="key",n.d="path"})(ot||(ot={}));function bc(n){var t=function(e){var r=e.options,i=r.data,o=r.setsField,a=r.sizeField;return j(i)&&(A(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:o,size:a,as:[ot.color,ot.d]}]}),A(r,"colorField",o),A(r,["children","0","encode","d"],ot.d)),A(e,"options",ze(r,["sizeField","setsField"])),e};return F(t,R)(n)}var Dc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fc=function(n){Dc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="venn",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:ot.color,d:ot.d}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return bc},t}(T);function Lc(n){var t=function(e){return e};return F(t,R)(n)}var Rc=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kc=function(n){Rc(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="Sunburst",e}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Lc},t}(T),Mc={Base:Nu,Line:rs,Column:qu,Pie:as,Area:Hu,Bar:Wu,DualAxes:Dn,Funnel:ts,Scatter:cs,Radar:ds,Rose:Gs,Stock:Os,TinyLine:ws,TinyArea:Cs,TinyColumn:bs,TinyProgress:Ls,TinyRing:Ms,Waterfall:Us,Histogram:zs,Heatmap:Xs,Box:Qs,Sankey:tc,Bullet:rc,Gauge:ac,Liquid:cc,WordCloud:dc,Treemap:hc,RadialBar:_c,CirclePacking:xc,Violin:Ec,BidirectionalBar:Pc,Venn:Fc,Mix:Dn,Sunburst:kc},Pe=function(){return Pe=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Pe.apply(this,arguments)},Fn=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},wl=J.forwardRef(function(n,t){var e=n.chartType,r=e===void 0?"Base":e,i=Fn(n,["chartType"]),o=i.containerStyle,a=o===void 0?{height:"inherit",flex:1}:o,s=i.containerAttributes,u=s===void 0?{}:s,l=i.className,c=i.loading,d=i.loadingTemplate,p=i.errorTemplate,v=Fn(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),f=Ja(Mc[r],v),h=f.chart,y=f.container;return J.useImperativeHandle(t,function(){return h.current}),X.createElement(bi,{errorTemplate:p},c&&X.createElement(Ti,{loadingTemplate:d}),X.createElement("div",Pe({className:l,style:a,ref:y},u)))});const Er=24,El=Er,Sl=Er;var Ic=function(){function n(){}return n.prototype.apply=function(t,e){var r=this,i=t.config.document,o=t.renderingService,a=t.svgElementMap;o.hooks.pick.tapPromise(n.tag,function(s){return Xn(r,void 0,void 0,function(){return qn(this,function(u){return[2,this.pick(a,i,s)]})})}),o.hooks.pickSync.tap(n.tag,function(s){return r.pick(a,i,s)})},n.prototype.pick=function(t,e,r){var i,o,a=r.topmost,s=r.position,u=s.clientX,l=s.clientY;try{var c=[];try{for(var d=ai((e||document).elementsFromPoint(u,l)),p=d.next();!p.done;p=d.next()){var v=p.value;if(v.shadowRoot&&v.shadowRoot!==e)return this.pick(t,v.shadowRoot,r);var f=t.get(v);if(f&&f.isInteractive()&&(c.push(f),a))return r.picked=c,r}}catch(h){i={error:h}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}r.picked=c}catch{r.picked=[]}return r},n.tag="SVGPicker",n}(),Nc=function(n){te(t,n);function t(){var e=n.apply(this,Yn([],pt(arguments),!1))||this;return e.name="svg-picker",e}return t.prototype.init=function(){this.addRenderingPlugin(new Ic)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Me),Gc=function(){function n(){}return n.tag="c-svg-element",n}();function jc(n,t){var e=t.src,r=e===void 0?"":e,i=t.x,o=i===void 0?0:i,a=t.y,s=a===void 0?0:a,u=t.width,l=t.height;if(n.setAttribute("x","".concat(o)),n.setAttribute("y","".concat(s)),at(r))n.setAttribute("href",r);else if(r instanceof Image)u||n.setAttribute("width","".concat(r.width)),l||n.setAttribute("height","".concat(r.height)),n.setAttribute("href",r.src);else if(r instanceof HTMLElement&&at(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",r.toDataURL());else if(r instanceof ImageData){var c=document.createElement("canvas");c.setAttribute("width","".concat(r.width)),c.setAttribute("height","".concat(r.height));var d=c.getContext("2d");d&&(d.putImageData(r,0,0),u||n.setAttribute("width","".concat(r.width)),l||n.setAttribute("height","".concat(r.height)),n.setAttribute("href",c.toDataURL()))}}function Bc(n,t){var e=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.markerStart,s=t.markerEnd,u=t.markerStartOffset,l=t.markerEndOffset,c=0,d=0,p=0,v=0,f=0,h,y;a&&vt(a)&&u&&(h=i-e,y=o-r,f=Math.atan2(y,h),c=Math.cos(f)*(u||0),d=Math.sin(f)*(u||0)),s&&vt(s)&&l&&(h=e-i,y=r-o,f=Math.atan2(y,h),p=Math.cos(f)*(l||0),v=Math.sin(f)*(l||0)),n.setAttribute("x1","".concat(e+c)),n.setAttribute("y1","".concat(r+d)),n.setAttribute("x2","".concat(i+p)),n.setAttribute("y2","".concat(o+v))}function $c(n,t){var e=t.d,r=t.markerStart,i=t.markerEnd,o=t.markerStartOffset,a=t.markerEndOffset,s=0,u=0,l=0,c=0,d=0,p,v;if(r&&vt(r)&&o){var f=pt(r.parentNode.getStartTangent(),2),h=f[0],y=f[1];p=h[0]-y[0],v=h[1]-y[1],d=Math.atan2(v,p),s=Math.cos(d)*(o||0),u=Math.sin(d)*(o||0)}if(i&&vt(i)&&a){var g=pt(i.parentNode.getEndTangent(),2),h=g[0],y=g[1];p=h[0]-y[0],v=h[1]-y[1],d=Math.atan2(v,p),l=Math.cos(d)*(a||0),c=Math.sin(d)*(a||0)}n.setAttribute("d",si(e.absolutePath,s,u,l,c))}function Uc(n,t){var e=t.points.points,r=t.markerStart,i=t.markerStartOffset,o=t.markerEnd,a=t.markerEndOffset,s=e.length;if(e&&s>=2){var u=0,l=0,c=0,d=0,p=0,v=void 0,f=void 0;r&&vt(r)&&i&&(v=e[1][0]-e[0][0],f=e[1][1]-e[0][1],p=Math.atan2(f,v),u=Math.cos(p)*(i||0),l=Math.sin(p)*(i||0)),o&&vt(o)&&a&&(v=e[s-2][0]-e[s-1][0],f=e[s-2][1]-e[s-1][1],p=Math.atan2(f,v),c=Math.cos(p)*(a||0),d=Math.sin(p)*(a||0)),n.setAttribute("points",e.map(function(h,y){var g=0,_=0;return y===0?(g=u,_=l):y===s-1&&(g=c,_=d),"".concat(h[0]+g,",").concat(h[1]+_)}).join(" "))}}function Hc(n,t){var e=t.radius,r=t.x,i=r===void 0?0:r,o=t.y,a=o===void 0?0:o,s=t.width,u=t.height;if(!(!isFinite(s)||!isFinite(u))){var l=e&&e.some(function(O){return O!==0}),c="";if(!l)c="M ".concat(i,",").concat(a," l ").concat(s,",0 l 0,").concat(u," l").concat(-s," 0 z");else{var d=pt(e.map(function(O){return ci(O,0,Math.min(Math.abs(s)/2,Math.abs(u)/2))}),4),p=d[0],v=d[1],f=d[2],h=d[3],y=s>0?1:-1,g=u>0?1:-1,_=y+g!==0?1:0;c=[["M ".concat(y*p+i,",").concat(a)],["l ".concat(s-y*(p+v),",0")],["a ".concat(v,",").concat(v,",0,0,").concat(_,",").concat(y*v,",").concat(g*v)],["l 0,".concat(u-g*(v+f))],["a ".concat(f,",").concat(f,",0,0,").concat(_,",").concat(-y*f,",").concat(g*f)],["l ".concat(y*(f+h)-s,",0")],["a ".concat(h,",").concat(h,",0,0,").concat(_,",").concat(-y*h,",").concat(-g*h)],["l 0,".concat(g*(h+p)-u)],["a ".concat(p,",").concat(p,",0,0,").concat(_,",").concat(y*p,",").concat(-g*p)],["z"]].join(" ")}n.setAttribute("d",c)}}function E(n,t){return(t||document).createElementNS("http://www.w3.org/2000/svg",n)}var Sr="g-filter-";function Vc(n,t,e,r,i){var o=Sr+e.entity,a=t.querySelectorAll("[name=".concat(o,"]"));if(a.length&&a.forEach(function(u){t.removeChild(u)}),i.length===0)r==null||r.removeAttribute("filter");else{var s=i.map(function(u,l){var c=u.name,d=u.params,p=E("filter",n);return p.setAttribute("filterUnits","userSpaceOnUse"),c==="blur"?zc(n,p,d):c==="brightness"?Xc(n,p,d):c==="drop-shadow"?Qc(n,p,d):c==="contrast"?Wc(n,p,d):c==="grayscale"?Zc(n,p,d):c==="sepia"?Jc(n,p,d):c==="saturate"?qc(n,p,d):c==="hue-rotate"?Kc(n,p,d):c==="invert"&&Yc(n,p,d),p.id="".concat(o,"-").concat(l),p.setAttribute("name",o),t.appendChild(p),p.id});setTimeout(function(){r==null||r.setAttribute("filter",s.map(function(u){return"url(#".concat(u,")")}).join(" "))})}}function mt(n){return n.unit===di.kPercentage?n.value/100:n.value}function zc(n,t,e){var r=E("feGaussianBlur",n);r.setAttribute("in","SourceGraphic"),r.setAttribute("stdDeviation","".concat(e[0].value)),t.appendChild(r)}function Ye(n,t,e){var r=e.type,i=e.slope,o=e.intercept,a=e.tableValues,s=E("feComponentTransfer",n);[E("feFuncR",n),E("feFuncG",n),E("feFuncB",n)].forEach(function(u){u.setAttribute("type",r),r==="table"?u.setAttribute("tableValues","".concat(a)):(u.setAttribute("slope","".concat(i)),u.setAttribute("intercept","".concat(o))),s.appendChild(u)}),t.appendChild(s)}function Wc(n,t,e){var r=mt(e[0]);Ye(n,t,{type:"linear",slope:r,intercept:-(.5*r)+.5})}function Yc(n,t,e){var r=mt(e[0]);Ye(n,t,{type:"table",tableValues:"".concat(r," ").concat(1-r)})}function Xc(n,t,e){var r=mt(e[0]);Ye(n,t,{type:"linear",slope:r,intercept:0})}function qc(n,t,e){var r=mt(e[0]),i=E("feColorMatrix",n);i.setAttribute("type","saturate"),i.setAttribute("values","".concat(r)),t.appendChild(i)}function Kc(n,t,e){var r=E("feColorMatrix",n);r.setAttribute("type","hueRotate"),r.setAttribute("values","".concat(e[0].value)),t.appendChild(r)}function Qc(n,t,e){var r=e[0].value,i=e[1].value,o=e[2].value,a=e[3].formatted,s=E("feGaussianBlur",n);s.setAttribute("in","SourceAlpha"),s.setAttribute("stdDeviation","".concat(o)),t.appendChild(s);var u=E("feOffset",n);u.setAttribute("dx","".concat(r)),u.setAttribute("dy","".concat(i)),u.setAttribute("result","offsetblur"),t.appendChild(u);var l=E("feFlood",n);l.setAttribute("flood-color",a),t.appendChild(l);var c=E("feComposite",n);c.setAttribute("in2","offsetblur"),c.setAttribute("operator","in"),t.appendChild(c);var d=E("feMerge",n);t.appendChild(d);var p=E("feMergeNode",n),v=E("feMergeNode",n);v.setAttribute("in","SourceGraphic"),d.appendChild(p),d.appendChild(v)}function Cr(n,t,e){var r=E("feColorMatrix",n);r.setAttribute("type","matrix"),r.setAttribute("values",e.join(" ")),t.appendChild(r)}function Zc(n,t,e){var r=mt(e[0]);Cr(n,t,[.2126+.7874*(1-r),.7152-.7152*(1-r),.0722-.0722*(1-r),0,0,.2126-.2126*(1-r),.7152+.2848*(1-r),.0722-.0722*(1-r),0,0,.2126-.2126*(1-r),.7152-.7152*(1-r),.0722+.9278*(1-r),0,0,0,0,0,1,0])}function Jc(n,t,e){var r=mt(e[0]);Cr(n,t,[.393+.607*(1-r),.769-.769*(1-r),.189-.189*(1-r),0,0,.349-.349*(1-r),.686+.314*(1-r),.168-.168*(1-r),0,0,.272-.272*(1-r),.534-.534*(1-r),.131+.869*(1-r),0,0,0,0,0,1,0])}var tl="g-pattern-",jt={},be=0;function el(){be=0,jt={}}function nl(n,t,e,r,i,o,a,s){if(!i)return"";if(pe(i))e.style[o]==="currentColor"?r==null||r.setAttribute(o,"currentColor"):r==null||r.setAttribute(o,i.isNone?"none":i.toString());else if(Ie(i)){var u=il(n,t,e,i,a,s);return r.style[o]="url(#".concat(u,")"),u}else if(i.length===1){var l=Pr(n,e,t,r,i[0]);return r==null||r.setAttribute(o,"url(#".concat(l,")")),l}else{var c=ol(n,e,t,r,i);return r==null||r.setAttribute("filter","url(#".concat(c,")")),r==null||r.setAttribute("fill","black"),c}return""}function Tr(n,t){t===void 0&&(t={});var e="";if(pi(n)){var r=n.type,i=n.value;if(r===Ut.LinearGradient||r===Ut.RadialGradient){var o=on(on({},i),t),a=o.type,s=o.x,u=o.y,l=o.width,c=o.height,d=o.steps,p=o.angle,v=o.cx,f=o.cy,h=o.size;e="gradient-".concat(a,"-").concat((s==null?void 0:s.toString())||0,"-").concat((u==null?void 0:u.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat((v==null?void 0:v.toString())||0,"-").concat((f==null?void 0:f.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat(l,"-").concat(c,"-").concat(d.map(function(y){var g=y.offset,_=y.color;return"".concat(g).concat(_)}).join("-"))}}else Ie(n)&&(at(n.image)?e="pattern-".concat(n.image,"-").concat(n.repetition):n.image.nodeName==="rect"?e="pattern-rect-".concat(n.image.entity):e="pattern-".concat(be));return e&&(jt[e]||(jt[e]=tl+"".concat(be++))),jt[e]}function rl(n){return vi(n).map(function(t){var e=t.t,r=t.d;if(e==="translate")return"translate(".concat(r[0].value," ").concat(r[1].value,")");if(e==="translatex")return"translate(".concat(r[0].value," 0)");if(e==="translatey")return"translate(0 ".concat(r[0].value,")");if(e==="rotate")return"rotate(".concat(r[0].value,")");if(e==="scale"){var i=(r==null?void 0:r.map(function(v){return v.value}))||[1,1];return"scale(".concat(i[0],", ").concat(i[1],")")}else if(e==="scalex"){var i=(r==null?void 0:r.map(function(f){return f.value}))||[1];return"scale(".concat(i[0],", 1)")}else if(e==="scaley"){var i=(r==null?void 0:r.map(function(f){return f.value}))||[1];return"scale(1, ".concat(i[0],")")}else if(e==="skew"){var o=(r==null?void 0:r.map(function(v){return v.value}))||[0,0];return"skewX(".concat(o[0],") skewY(").concat(o[1],")")}else if(e==="skewx"){var o=(r==null?void 0:r.map(function(f){return f.value}))||[0];return"skewX(".concat(o[0],")")}else if(e==="skewy"){var o=(r==null?void 0:r.map(function(f){return f.value}))||[0];return"skewY(".concat(o[0],")")}else if(e==="matrix"){var a=pt(r.map(function(v){return v.value}),6),s=a[0],u=a[1],l=a[2],c=a[3],d=a[4],p=a[5];return"matrix(".concat(s," ").concat(u," ").concat(l," ").concat(c," ").concat(d," ").concat(p,")")}}).join(" ")}function Ln(n,t,e,r,i,o,a){var s=r.repetition,u=r.transform,l=E("pattern",n);u&&l.setAttribute("patternTransform",rl(u)),l.setAttribute("patternUnits","userSpaceOnUse"),l.id=i,t.appendChild(l);var c=e.getGeometryBounds(),d=c.halfExtents,p=c.min;l.setAttribute("x","".concat(p[0])),l.setAttribute("y","".concat(p[1]));var v=o,f=a;return s==="repeat-x"?f=d[1]*2:s==="repeat-y"?v=d[0]*2:s==="no-repeat"&&(v=d[0]*2,f=d[1]*2),l.setAttribute("width","".concat(v)),l.setAttribute("height","".concat(f)),l}function il(n,t,e,r,i,o){var a=Tr(r),s=t.querySelector("#".concat(a));if(!s){var u=r.image,l="";if(at(u)?l=u:ve&&(u instanceof HTMLImageElement?l=u.src:u instanceof HTMLCanvasElement&&(l=u.toDataURL())),l){var c=E("image",n);c.setAttribute("href",l);var d;i?d=i(l):ve&&(d=new window.Image),l.match(/^data:/i)||(d.crossOrigin="Anonymous",c.setAttribute("crossorigin","anonymous")),d.src=l;var p=function(){var _=Ln(n,t,e,r,a,d.width,d.height);t.appendChild(_),_.appendChild(c),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("width","".concat(d.width)),c.setAttribute("height","".concat(d.height))};d.complete?p():d.onload=p}if(u.nodeName==="rect"){var v=u.parsedStyle,f=v.width,h=v.height,y=Ln(n,t,u,r,a,f,h);u.forEach(function(_){o.createSVGDom(n,_,null);var O=_.elementSVG,m=_.getLocalTransform();o.applyTransform(O.$groupEl,m)});var g=u.elementSVG;y.appendChild(g.$groupEl)}}return a}function Pr(n,t,e,r,i){var o=t.getGeometryBounds(),a=o&&o.halfExtents[0]*2||0,s=o&&o.halfExtents[1]*2||0,u=o&&o.min||[0,0],l=Tr(i,{x:u[0],y:u[1],width:a,height:s}),c=e.querySelector("#".concat(l));if(!c){c=E(i.type===Ut.LinearGradient?"linearGradient":"radialGradient",n),c.setAttribute("gradientUnits","userSpaceOnUse");var d="";i.value.steps.sort(function(G,b){return G.offset.value-b.offset.value}).forEach(function(G){var b=G.offset,C=G.color;d+='<stop offset="'.concat(b.value/100,'" stop-color="').concat(C,'"></stop>')}),c.innerHTML=d,c.id=l,e.appendChild(c)}if(i.type===Ut.LinearGradient){var p=i.value.angle,v=li([u[0],u[1]],a,s,p),f=v.x1,h=v.y1,y=v.x2,g=v.y2;c.setAttribute("x1","".concat(f)),c.setAttribute("y1","".concat(h)),c.setAttribute("x2","".concat(y)),c.setAttribute("y2","".concat(g))}else{var _=i.value,O=_.cx,m=_.cy,x=_.size,L=fi([u[0],u[1]],a,s,O,m,x),P=L.x,k=L.y,w=L.r;c.setAttribute("cx","".concat(P)),c.setAttribute("cy","".concat(k)),c.setAttribute("r","".concat(w))}return l}function ol(n,t,e,r,i){var o=Sr+t.entity+"-gradient",a=e.querySelector("#".concat(o));a||(a=E("filter",n),a.setAttribute("filterUnits","userSpaceOnUse"),a.setAttribute("x","0%"),a.setAttribute("y","0%"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.id=o,e.appendChild(a));var s=0;i.forEach(function(l,c){var d=Pr(n,t,e,r,l),p=d+"_rect",v=E("rect",n);v.setAttribute("x","0"),v.setAttribute("y","0"),v.setAttribute("width","100%"),v.setAttribute("height","100%"),v.setAttribute("fill","url(#".concat(d,")")),v.id=p,e.appendChild(v);var f=E("feImage",n);if(f.setAttribute("href","#".concat(p)),f.setAttribute("result","".concat(o,"-").concat(c)),a.appendChild(f),c>0){var h=E("feBlend",n);h.setAttribute("in",c===1?"".concat(o,"-").concat(c-1):"".concat(o,"-blended-").concat(s-1)),h.setAttribute("in2","".concat(o,"-").concat(c)),h.setAttribute("result","".concat(o,"-blended-").concat(s++)),h.setAttribute("mode","multiply"),a.appendChild(h)}});var u=E("feComposite",n);return u.setAttribute("in","".concat(o,"-blended-").concat(s)),u.setAttribute("in2","SourceGraphic"),u.setAttribute("operator","in"),a.appendChild(u),o}var al="g-filter-dropshadow-";function ul(n,t,e,r,i){var o=e.parsedStyle,a=o.shadowType,s=a===void 0?"outer":a,u=o.shadowBlur,l=o.shadowColor,c=o.shadowOffsetX,d=o.shadowOffsetY,p=!ft(l)&&u>0,v=al+e.entity,f=t.querySelector("#".concat(v));if(f){var h=f.getAttribute("data-type");(h!==s||!p)&&(f.remove(),f=null)}if(p)r==null||r.setAttribute("filter","url(#".concat(v,")"));else{r==null||r.removeAttribute("filter");return}if(!f){if(f=E("filter",n),f.setAttribute("data-type",s),s==="outer"){var y=E("feDropShadow",n);y.setAttribute("dx","".concat((c||0)/2)),y.setAttribute("dy","".concat((d||0)/2)),y.setAttribute("stdDeviation","".concat((u||0)/4)),y.setAttribute("flood-color",l.toString()),f.appendChild(y)}else if(s==="inner"){var g=E("feComponentTransfer",n);g.setAttribute("in","SourceAlpha");var _=E("feFuncA",n);_.setAttribute("type","table"),_.setAttribute("tableValues","1 0"),g.appendChild(_),f.appendChild(g);var O=E("feGaussianBlur",n);O.setAttribute("stdDeviation","".concat((u||0)/4)),f.appendChild(O);var m=E("feOffset",n);m.setAttribute("dx","".concat((c||0)/2)),m.setAttribute("dy","".concat((d||0)/2)),m.setAttribute("result","offsetblur"),f.appendChild(m);var x=E("feFlood",n);x.setAttribute("flood-color",l.toString()),x.setAttribute("result","color"),f.appendChild(x);var L=E("feComposite",n);L.setAttribute("in2","offsetblur"),L.setAttribute("operator","in"),f.appendChild(L);var P=E("feComposite",n);P.setAttribute("in2","SourceAlpha"),P.setAttribute("operator","in"),f.appendChild(P);var k=E("feMerge",n);f.appendChild(k);var w=E("feMergeNode",n);w.setAttribute("in","SourceGraphic");var G=E("feMergeNode",n);k.appendChild(w),k.appendChild(G)}f.id=v,f.setAttribute("filterUnits","userSpaceOnUse"),t.appendChild(f);return}if(s==="inner"){var O=f.children[1],m=f.children[2],x=f.children[3];i==="shadowColor"?x.setAttribute("flood-color",l.toString()):i==="shadowBlur"?O.setAttribute("stdDeviation","".concat((u||0)/4)):i==="shadowOffsetX"?m.setAttribute("dx","".concat((c||0)/2)):i==="shadowOffsetY"&&m.setAttribute("dy","".concat((d||0)/2))}else if(s==="outer"){var y=f.children[0];i==="shadowColor"?y.setAttribute("flood-color",l.toString()):i==="shadowBlur"?y.setAttribute("stdDeviation","".concat((u||0)/4)):i==="shadowOffsetX"?y.setAttribute("dx","".concat((c||0)/2)):i==="shadowOffsetY"&&y.setAttribute("dy","".concat((d||0)/2))}}var sl=/url\("?#(.*)\)/,cl=function(){function n(t){this.context=t,this.gradientCache={}}return n.prototype.getDefElement=function(){return this.$def},n.prototype.init=function(){var t=this.context.config.document,e=this.context.contextService.getContext();this.$def=E("defs",t),e.appendChild(this.$def)},n.prototype.clear=function(t){var e=this;Object.keys(this.gradientCache).forEach(function(r){e.clearUnusedDefElement(e.gradientCache,r,t)})},n.prototype.clearUnusedDefElement=function(t,e,r){if(t[e]&&t[e].size===1&&t[e].has(r)){var i=this.$def.querySelector("#".concat(e));i&&this.$def.removeChild(i)}},n.prototype.createOrUpdateGradientAndPattern=function(t,e,r,i,o){var a=this.context.config,s=a.document,u=a.createImage;if(e){var l="";Ie(r)?l=e.style[i]:l=e.getAttribute(i)||"";var c=l.match(sl);c&&c.length>1&&this.clearUnusedDefElement(this.gradientCache,c[1].replace('"',""),t.entity);var d=nl(s||document,this.$def,t,e,r,i,u,o);d&&(this.gradientCache[d]||(this.gradientCache[d]=new Set),this.gradientCache[d].add(t.entity))}},n.prototype.createOrUpdateShadow=function(t,e,r){var i=this.context.config.document;ul(i||document,this.$def,t,e,r)},n.prototype.createOrUpdateFilter=function(t,e,r){var i=this.context.config.document;Vc(i||document,this.$def,t,e,r)},n}();function st(n){return n.toFixed(6).replace(".000000","")}function Rn(n){var t=/[&|<|>|"|']/g;return n.replace(t,function(e){return e==="&"?"&amp;":e==="<"?"&lt;":e===">"?"&gt;":e==='"'?"&quot;":"&apos;"})}var ll={opacity:"opacity",fillStyle:"fill",fill:"fill",fillRule:"fill-rule",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",clipPath:"clip-path",textPath:"text-path",r:"r",cx:"cx",cy:"cy",rx:"rx",ry:"ry",x:"x",y:"y",width:"width",height:"height",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",letterSpacing:"letter-spacing",startArrow:"marker-start",endArrow:"marker-end",class:"class",id:"id",preserveAspectRatio:"preserveAspectRatio",visibility:"visibility",shadowColor:"flood-color",shadowBlur:"stdDeviation",shadowOffsetX:"dx",shadowOffsetY:"dy",filter:"filter",innerHTML:"innerHTML",textAlign:"text-anchor",pointerEvents:"pointer-events"},fl={textAlign:{inherit:"inherit",left:"left",start:"left",center:"middle",right:"end",end:"end"}},le={textAlign:"inherit",lineCap:"butt",lineJoin:"miter",lineWidth:"1px",opacity:"1",fillOpacity:"1",fillRule:"nonzero",strokeOpacity:"1",strokeWidth:"0",strokeMiterLimit:"4",letterSpacing:"0",fontSize:"inherit",fontFamily:"inherit",pointerEvents:"auto",transform:"matrix(1,0,0,1,0,0)"},kn="g-svg",Mn="clip-path-",br="text-path-",dl=function(){function n(t,e,r){this.pluginOptions=t,this.defElementManager=e,this.context=r,this.svgElementMap=new WeakMap,this.renderQueue=[],this.dirtyAttributes=new WeakMap,this.pendingReorderQueue=new Set,this.clipPathUseMap=new WeakMap}return n.prototype.apply=function(t){var e=this,r=t.renderingService,i=t.renderingContext;this.context=t,this.context.svgElementMap=this.svgElementMap;var o=i.root.ownerDocument.defaultView,a=this.context.config.document,s=function(v){var f=v.target,h=e.clipPathUseMap.get(f);if(h){var y=e.defElementManager.getDefElement(),g=y.querySelector("#".concat(e.getId(f)));g&&g.remove()}e.createSVGDom(a,f,e.$camera)},u=function(v){var f=v.target;e.defElementManager.clear(f.entity),e.clipPathUseMap.delete(f),e.removeSVGDom(f)},l=function(v){var f,h,y=v.parentNode,g=(h=(f=v.parentNode)===null||f===void 0?void 0:f.elementSVG)===null||h===void 0?void 0:h.$groupEl,_=((y==null?void 0:y.children)||[]).slice();g&&e.reorderChildren(a,g,_)},c=function(v){var f=v.target;l(f)},d=function(v){var f=v.target;if(f.elementSVG){var h=v.attrName,y=e.dirtyAttributes.get(f);y||(e.dirtyAttributes.set(f,[]),y=e.dirtyAttributes.get(f)),y.push(h)}},p=function(v){var f,h=v.target,y=(f=h.elementSVG)===null||f===void 0?void 0:f.$el,g=h.parsedStyle,_=g.fill,O=g.stroke,m=g.clipPath;if(_&&!pe(_)&&e.defElementManager.createOrUpdateGradientAndPattern(h,y,_,"fill",e),O&&!pe(O)&&e.defElementManager.createOrUpdateGradientAndPattern(h,y,O,"stroke",e),m){var x=nn(rn(),h.getWorldTransform()),L=Mn+m.entity+"-"+h.entity,P=e.defElementManager.getDefElement(),k=P.querySelector("#".concat(L));k&&e.applyTransform(k,x)}};r.hooks.init.tap(n.tag,function(){var v=e.context.config,f=v.background,h=v.document;e.defElementManager.init();var y=e.context.contextService.getContext();f&&(y.style.background=f),y.setAttribute("color-interpolation-filters","sRGB"),e.$camera=E("g",h),e.$camera.id="".concat(kn,"-camera"),e.applyTransform(e.$camera,e.context.camera.getOrthoMatrix()),y.appendChild(e.$camera),o.addEventListener(W.MOUNTED,s),o.addEventListener(W.UNMOUNTED,u),o.addEventListener(W.REPARENT,c),o.addEventListener(W.ATTR_MODIFIED,d),o.addEventListener(W.BOUNDS_CHANGED,p)}),r.hooks.destroy.tap(n.tag,function(){o.removeEventListener(W.MOUNTED,s),o.removeEventListener(W.UNMOUNTED,u),o.removeEventListener(W.REPARENT,c),o.removeEventListener(W.ATTR_MODIFIED,d),o.removeEventListener(W.BOUNDS_CHANGED,p),el()}),r.hooks.render.tap(n.tag,function(v){e.renderQueue.push(v)}),r.hooks.beginFrame.tap(n.tag,function(){var v=e.context.config.document;e.pendingReorderQueue.size&&(e.pendingReorderQueue.forEach(function(f){var h,y=((f==null?void 0:f.children)||[]).slice(),g=(h=f==null?void 0:f.elementSVG)===null||h===void 0?void 0:h.$groupEl;g&&e.reorderChildren(v||a,g,y||[])}),e.pendingReorderQueue.clear())}),r.hooks.endFrame.tap(n.tag,function(){i.renderReasons.has(ui.CAMERA_CHANGED)&&e.applyTransform(e.$camera,e.context.camera.getOrthoMatrix()),e.renderQueue.forEach(function(v){var f,h,y=(f=v.elementSVG)===null||f===void 0?void 0:f.$el,g=(h=v.elementSVG)===null||h===void 0?void 0:h.$groupEl;if(y&&g){var _=v.getLocalTransform();e.applyTransform(g,_);var O=e.clipPathUseMap.get(v);O&&O.length&&O.forEach(function(x){e.applyTransform(x,v.getWorldTransform())}),v.renderable.dirty=!1}var m=e.dirtyAttributes.get(v);m&&(m.forEach(function(x){x==="zIndex"?l(v):x==="increasedLineWidthForHitTesting"&&e.createOrUpdateHitArea(v,y,g),e.updateAttribute(v,[x])}),e.dirtyAttributes.delete(v))}),e.renderQueue=[]})},n.prototype.getId=function(t){return t.id||"".concat(kn,"-").concat(t.entity)},n.prototype.reorderChildren=function(t,e,r){if(r.sort(function(o,a){return o.sortable.renderOrder-a.sortable.renderOrder}),r.length){var i=(t||document).createDocumentFragment();r.forEach(function(o){if(o.isConnected){var a=o.elementSVG.$groupEl;a&&i.appendChild(a)}}),e.appendChild(i)}},n.prototype.applyTransform=function(t,e){var r="matrix(".concat(st(e[0]),",").concat(st(e[1]),",").concat(st(e[4]),",").concat(st(e[5]),",").concat(st(e[12]),",").concat(st(e[13]),")");r!==t.getAttribute("transform")&&t.setAttribute("transform",r),r===le.transform&&t.removeAttribute("transform")},n.prototype.applyAttributes=function(t){var e=t.elementSVG,r=e==null?void 0:e.$el,i=e==null?void 0:e.$groupEl;if(r&&i){var o=t.nodeName,a=t.attributes;o!==D.HTML&&r.setAttribute("fill","none"),o===D.IMAGE&&r.setAttribute("preserveAspectRatio","none"),this.updateAttribute(t,Object.keys(a))}},n.prototype.updateAttribute=function(t,e){var r=this,i=this.context.enableCSSParsing,o=this.context.config.document,a=t.elementSVG,s=a.$el,u=a.$groupEl,l=a.$hitTestingEl,c=t.parsedStyle,d=t.computedStyle,p=t.nodeName,v=e.some(function(f){return r.context.SVGElementLifeCycleContribution.shouldUpdateElementAttribute(t,f)});v&&s&&[s,l].forEach(function(f){f&&r.context.SVGElementLifeCycleContribution.updateElementAttribute(t,f,r.svgElementMap)}),e.forEach(function(f){var h,y,g=ll[f],_=i?d[f]:c[f],O=!ft(_)&&_.toString(),m=((h=fl[f])===null||h===void 0?void 0:h[O])||O,x=c[f],L=g&&!!(!((y=Kn[f])===null||y===void 0)&&y.inh);if(p===D.HTML)f==="fill"?s.style.background=x.toString():f==="stroke"?(s.style["border-color"]=x.toString(),s.style["border-style"]="solid"):f==="lineWidth"?s.style["border-width"]="".concat(x||0,"px"):f==="lineDash"?s.style["border-style"]="dashed":f==="innerHTML"?r.createOrUpdateInnerHTML(o,s,x):f==="width"||f==="height"||f==="class"?s.setAttribute(f,x.toString()):!ft(t.style[f])&&t.style[f]!==""&&(s.style[f]=t.style[f]);else{if(!g||(p===D.GROUP||t.isCustomElement)&&!i&&(L||g==="fill"||g==="stroke"))return;f==="fill"||f==="stroke"?r.defElementManager.createOrUpdateGradientAndPattern(t,s,x,g,r):i&&L?O!=="unset"&&O!==le[f]?u==null||u.setAttribute(g,m):u==null||u.removeAttribute(g):f==="clipPath"?r.createOrUpdateClipOrTextPath(o,x,t):f==="textPath"?r.createOrUpdateClipOrTextPath(o,x,t,!0):f==="shadowType"||f==="shadowColor"||f==="shadowBlur"||f==="shadowOffsetX"||f==="shadowOffsetY"?r.defElementManager.createOrUpdateShadow(t,s,f):f==="filter"?r.defElementManager.createOrUpdateFilter(t,s,x):ft(_)||[s,l].forEach(function(P){P&&g&&(O!=="unset"&&O!==le[f]?P.setAttribute(g,m):P.removeAttribute(g))})}})},n.prototype.createSVGDom=function(t,e,r,i){var o;i===void 0&&(i=!1),e.elementSVG=new Gc;var a=e.elementSVG,s=this.context.SVGElementLifeCycleContribution.createElement(e,this.svgElementMap);if(s){var u=void 0;e.nodeName===D.HTML&&(e.parsedStyle.$el=s),this.pluginOptions.outputSVGElementId&&(s.id=this.getId(e)),this.pluginOptions.outputSVGElementName&&e.name&&s.setAttribute("name",e.name),(s.hasAttribute("data-wrapgroup")||s.nodeName!=="g")&&!i?(u=E("g",t),u.appendChild(s)):u=s,a.$el=s,a.$groupEl=u,this.applyAttributes(e),this.createOrUpdateHitArea(e,s,u);var l=r||e.parentNode&&((o=e.parentNode.elementSVG)===null||o===void 0?void 0:o.$groupEl);l&&(l.appendChild(u),this.pendingReorderQueue.add(e.parentNode))}},n.prototype.removeSVGDom=function(t){var e,r=(e=t.elementSVG)===null||e===void 0?void 0:e.$groupEl;r&&r.parentNode&&(r.parentNode.removeChild(r),this.context.SVGElementLifeCycleContribution.destroyElement(t,r))},n.prototype.createOrUpdateHitArea=function(t,e,r){var i=t.elementSVG,o=i.$hitTestingEl,a=Number(t.parsedStyle.increasedLineWidthForHitTesting);if(a){if(!o){o=e.cloneNode(),["filter"].forEach(function(u){o.removeAttribute(u)});var s=e.getAttribute("fill")!=="none";o.setAttribute("fill",s?"transparent":"none"),o.setAttribute("stroke","transparent"),r.appendChild(o),i.$hitTestingEl=o,this.svgElementMap.set(o,t)}o.setAttribute("stroke-width","".concat(a+t.parsedStyle.lineWidth))}else o&&(r.removeChild(o),i.$hitTestingEl=null)},n.prototype.createOrUpdateInnerHTML=function(t,e,r){var i=(t||document).createElement("div");typeof r=="string"?i.innerHTML=r:i.appendChild(r),e.innerHTML="",e.appendChild(i)},n.prototype.createOrUpdateClipOrTextPath=function(t,e,r,i){i===void 0&&(i=!1);var o=r.elementSVG.$groupEl,a=i?br:Mn,s=i?"g":"clipPath",u=i?"text-path":"clip-path";if(e){var l=a+e.entity+"-"+r.entity,c=this.defElementManager.getDefElement(),d=c.querySelector("#".concat(l));if(!d){var p=void 0;if(i)this.createSVGDom(t,e,null,!0),p=e.elementSVG.$el;else{if(!e.isConnected){var v=c.querySelector("#".concat(this.getId(e)));v||this.createSVGDom(t,e,c,!0)}p=E(s,t);var f=E("use",t);f.setAttribute("href","#".concat(e.elementSVG.$el.id)),p.appendChild(f);var h=this.clipPathUseMap.get(e);h||(this.clipPathUseMap.set(e,[]),h=this.clipPathUseMap.get(e)),h.push(f),this.applyTransform(f,e.getWorldTransform());var y=nn(rn(),r.getWorldTransform());this.applyTransform(p,y)}this.pluginOptions.outputSVGElementId&&(p.id=l),c.appendChild(p)}this.applyAttributes(e),i||o.setAttribute(u,"url(#".concat(l,")"))}else i||o.removeAttribute(u)},n.tag="SVGRenderer",n}(),In={top:"hanging",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",ideographic:"ideographic",hanging:"hanging"};function pl(n,t,e,r){e.getBounds();var i=t.lineWidth,o=i===void 0?1:i,a=t.x,s=a===void 0?0:a,u=t.y,l=u===void 0?0:u,c=t.dx,d=c===void 0?0:c,p=t.dy,v=p===void 0?0:p,f=t.textPath,h=t.textPathSide,y=h===void 0?"left":h,g=t.textPathStartOffset,_=g===void 0?0:g,O=t.textDecorationLine,m=O===void 0?"":O,x=t.textDecorationColor,L=x===void 0?"":x,P=t.textDecorationStyle,k=P===void 0?"":P,w=t.metrics,G=t.textBaseline,b=G===void 0?"alphabetic":G;!r.enableCSSParsing&&b==="alphabetic"&&(b="bottom"),n.setAttribute("dominant-baseline",In[b]),n.setAttribute("paint-order","stroke");var C=w.lines,$=w.lineHeight,S=w.height,M=C.length,I="";if((d!==0||v!==0)&&(I+="transform:translate(".concat(d,"px, ").concat(v,"px);")),m&&m!=="none"&&(I+="text-decoration:".concat(m," ").concat(k," ").concat(L,";")),I&&n.setAttribute("style",I),s!==0&&n.setAttribute("x","".concat(s)),l!==0&&n.setAttribute("y","".concat(l)),M===1){var K=Rn(C[0]);if(n.setAttribute("dx","".concat(o/2)),(b==="bottom"||b==="top")&&(n.setAttribute("dominant-baseline",In.middle),n.setAttribute("dy",b==="bottom"?"-".concat(S/2,"px"):"".concat(S/2,"px"))),f){n.innerHTML="";var H=E("textPath",n.ownerDocument);H.setAttribute("href","#".concat(br+f.entity)),y!=="left"&&H.setAttribute("side",y),_!==0&&H.setAttribute("startOffset","".concat(_)),H.innerHTML=K,n.appendChild(H)}else n.innerHTML=K}else n.innerHTML=C.map(function(Ot,Lt){var Dr=o/2,xt=0;return Lt===0?b==="middle"?xt=$/2-S/2:b==="top"||b==="hanging"?xt=0:(b==="bottom"||b==="alphabetic"||b==="ideographic")&&(xt=-$*(M-1)):xt=$,"<tspan x=".concat(s,' dx="').concat(Dr,'" dy="').concat(xt,'">').concat(Rn(Ot),"</tspan>")}).join("")}var U,V,vl=(U={},U[D.RECT]="path",U[D.CIRCLE]="circle",U[D.ELLIPSE]="ellipse",U[D.IMAGE]="image",U[D.GROUP]="g",U[D.LINE]="line",U[D.POLYLINE]="polyline",U[D.POLYGON]="polygon",U[D.TEXT]="text",U[D.PATH]="path",U[D.HTML]="foreignObject",U),hl=(V={},V[D.CIRCLE]=["cx","cy","r"],V[D.ELLIPSE]=["cx","cy","rx","ry"],V[D.RECT]=["x","y","width","height","radius"],V[D.IMAGE]=["x","y","src","width","height"],V[D.LINE]=["x1","y1","x2","y2","markerStart","markerEnd","markerStartOffset","markerEndOffset"],V[D.POLYLINE]=["points","markerStart","markerEnd","markerMid","markerStartOffset","markerEndOffset"],V[D.POLYGON]=["points","markerStart","markerEnd","markerMid","markerStartOffset","markerEndOffset"],V[D.PATH]=["d","markerStart","markerEnd","markerMid","markerStartOffset","markerEndOffset"],V[D.TEXT]=["text","font","fontSize","fontFamily","fontStyle","fontWeight","fontVariant","lineHeight","letterSpacing","wordWrap","wordWrapWidth","maxLines","leading","textBaseline","textAlign","textTransform","textOverflow","textPath","textPathSide","textPathStartOffset","textDecorationLine","textDecorationColor","textDecorationStyle","dx","dy"],V),yl=function(){function n(t,e){this.context=t,this.runtime=e}return n.prototype.createElement=function(t,e){var r=this.context.config.document,i=vl[t.nodeName]||"g",o=E(i,r||document);return e.set(o,t),o},n.prototype.destroyElement=function(t,e){},n.prototype.shouldUpdateElementAttribute=function(t,e){var r=t.nodeName;return(hl[r]||[]).indexOf(e)>-1},n.prototype.updateElementAttribute=function(t){var e=t.elementSVG.$el,r=t.nodeName,i=t.parsedStyle;switch(r){case D.IMAGE:{jc(e,i);break}case D.RECT:{Hc(e,i);break}case D.LINE:{Bc(e,i);break}case D.POLYGON:case D.POLYLINE:{Uc(e,i);break}case D.PATH:{$c(e,i);break}case D.TEXT:{pl(e,i,t,this.runtime);break}}},n}(),gl=function(n){te(t,n);function t(e){e===void 0&&(e={});var r=n.call(this)||this;return r.options=e,r.name="svg-renderer",r}return t.prototype.init=function(e){var r=this.options,i=r.outputSVGElementId,o=r.outputSVGElementName,a=new cl(this.context),s=new yl(this.context,e);this.context.defaultElementLifeCycleContribution=s,this.context.SVGElementLifeCycleContribution=s;var u={outputSVGElementId:ft(i)?!0:!!i,outputSVGElementName:ft(o)?!0:!!o};this.addRenderingPlugin(new dl(u,a,this.context))},t.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultElementLifeCycleContribution,delete this.context.SVGElementLifeCycleContribution},t}(Me),_l=function(){function n(t){this.context=t,this.canvasConfig=t.config}return n.prototype.init=function(){var t=this.canvasConfig,e=t.container,r=t.document,i=t.devicePixelRatio;if(this.$container=at(e)?(r||document).getElementById(e):e,this.$container){this.$container.style.position||(this.$container.style.position="relative");var o=E("svg",r);o.setAttribute("width","".concat(this.canvasConfig.width)),o.setAttribute("height","".concat(this.canvasConfig.height)),this.$container.appendChild(o),this.$namespace=o}var a=i||ve&&window.devicePixelRatio||1;a=a>=1?Math.ceil(a):1,this.dpr=a},n.prototype.getDomElement=function(){return this.$namespace},n.prototype.getContext=function(){return this.$namespace},n.prototype.getDPR=function(){return this.dpr},n.prototype.getBoundingClientRect=function(){var t;return(t=this.$namespace)===null||t===void 0?void 0:t.getBoundingClientRect()},n.prototype.destroy=function(){this.$container&&this.$namespace&&this.$namespace.parentNode&&this.$container.removeChild(this.$namespace)},n.prototype.resize=function(t,e){this.$namespace&&(this.$namespace.setAttribute("width","".concat(t)),this.$namespace.setAttribute("height","".concat(e)))},n.prototype.applyCursorStyle=function(t){this.$container&&(this.$container.style.cursor=t)},n.prototype.generateCSSText=function(t,e,r,i,o){o===void 0&&(o={});var a=i.duration,s=i.easing,u=i.delay,l=i.direction,c=i.iterations,d=i.fill;return"@keyframes ".concat(t,"{").concat(r.map(function(p){p.offset,p.composite;var v=p.computedOffset;p.easing;var f=Rt(p,["offset","composite","computedOffset","easing"]),h=Object.keys(f).map(function(y){return"".concat(y,":").concat(o[y]||"").concat(f[y],";")}).join("");return"".concat(v*100,"%{").concat(h,"}")}).join(""),"}")+"".concat(e," {animation: ").concat(t," ").concat(a,"ms ").concat(s," ").concat(u,"ms ").concat(c===1/0?"infinite":c," ").concat(l," ").concat(d,";}")},n.prototype.toDataURL=function(t){return Xn(this,void 0,void 0,function(){var e,r,i,o,a,s,u=this;return qn(this,function(l){return e=this.$namespace.cloneNode(!0),r=this.canvasConfig.document,i=0,o=null,this.context.renderingContext.root.forEach(function(c){var d=c.getAnimations();if(d.length){o||(o=(r||document).createElement("style"),e.appendChild(o));var p=c.elementSVG,v="#".concat(p.$el.id),f="#".concat(p.$groupEl.id),h="",y="";d.forEach(function(g){var _=g.effect.getKeyframes();if(_.length){var O=[],m=[],x=_[0];x.offset,x.composite,x.computedOffset,x.easing,x.transformOrigin;var L=Rt(x,["offset","composite","computedOffset","easing","transformOrigin"]);if(Object.keys(L).forEach(function(w){var G;w==="transform"&&m.push(w);var b=!!(!((G=Kn[w])===null||G===void 0)&&G.inh);b?m.push(w):w!=="transform"&&O.push(w)}),m.length){var P=_.map(function(w){var G=w.offset,b=w.composite,C=w.computedOffset,$=w.easing;w.transformOrigin;var S=Rt(w,["offset","composite","computedOffset","easing","transformOrigin"]),M={offset:G,composite:b,computedOffset:C,easing:$};return Object.keys(S).forEach(function(I){m.includes(I)&&(M[I]=w[I])}),M});y+=u.generateCSSText("a".concat(i++),f,P,g.effect.getComputedTiming(),{transform:p.$groupEl.getAttribute("transform")})}if(O.length){var k=_.map(function(w){var G=w.offset,b=w.composite,C=w.computedOffset,$=w.easing;w.transformOrigin;var S=Rt(w,["offset","composite","computedOffset","easing","transformOrigin"]),M={offset:G,composite:b,computedOffset:C,easing:$};return Object.keys(S).forEach(function(I){O.includes(I)&&(M[I]=w[I])}),M});h+=u.generateCSSText("a".concat(i++),v,k,g.effect.getComputedTiming())}}}),o.textContent+=h+y}}),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),s=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a),s.replaceChild(e,s.documentElement),[2,"data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(new XMLSerializer().serializeToString(s)))]})})},n}(),ml=function(n){te(t,n);function t(){var e=n.apply(this,Yn([],pt(arguments),!1))||this;return e.name="svg-context-register",e}return t.prototype.init=function(){this.context.ContextService=_l},t.prototype.destroy=function(){delete this.context.ContextService},t}(Me),Cl=function(n){te(t,n);function t(e){e===void 0&&(e={});var r=n.call(this,e)||this;return r.registerPlugin(new ml),r.registerPlugin(new gl({outputSVGElementId:e.outputSVGElementId})),r.registerPlugin(new hi),r.registerPlugin(new Nc),r}return t}(yi);export{wl as B,El as D,Cl as R,Sl as a};
